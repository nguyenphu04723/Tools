function run_tests(){var st=new SanityTest;run_beautifier_tests(st,Urlencoded,js_beautify,html_beautify,css_beautify),JavascriptObfuscator.run_tests(st),P_A_C_K_E_R.run_tests(st),Urlencoded.run_tests(st),MyObfuscate.run_tests(st);var results=st.results_raw().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\r/g,"Â·").replace(/\n/g,"<br>");$("#testresults").html(results).show()}function any(a,b){return a||b}function unpacker_filter(source){var trailing_comments="",comment="",unpacked="",found=!1;do found=!1,/^\s*\/\*/.test(source)?(found=!0,comment=source.substr(0,source.indexOf("*/")+2),source=source.substr(comment.length).replace(/^\s+/,""),trailing_comments+=comment+"\n"):/^\s*\/\//.test(source)&&(found=!0,comment=source.match(/^\s*\/\/.*/)[0],source=source.substr(comment.length).replace(/^\s+/,""),trailing_comments+=comment+"\n");while(found);for(var unpackers=[P_A_C_K_E_R,Urlencoded,MyObfuscate],i=0;i<unpackers.length;i++)unpackers[i].detect(source)&&(unpacked=unpackers[i].unpack(source),unpacked!=source&&(source=unpacker_filter(unpacked)));return trailing_comments+source}function read_settings_from_cookie(){$("#tabsize").val(any($.cookie("tabsize"),"4")),$("#brace-style").val(any($.cookie("brace-style"),"collapse")),$("#detect-packers").prop("checked","off"!==$.cookie("detect-packers")),$("#max-preserve-newlines").val(any($.cookie("max-preserve-newlines"),"5")),$("#keep-array-indentation").prop("checked","on"===$.cookie("keep-array-indentation")),$("#break-chained-methods").prop("checked","on"===$.cookie("break-chained-methods")),$("#indent-scripts").val(any($.cookie("indent-scripts"),"normal")),$("#space-before-conditional").prop("checked","off"!==$.cookie("space-before-conditional")),$("#wrap-line-length").val(any($.cookie("wrap-line-length"),"0")),$("#unescape-strings").prop("checked","on"===$.cookie("unescape-strings")),$("#jslint-happy").prop("checked","on"===$.cookie("jslint-happy")),$("#end-with-newline").prop("checked","on"===$.cookie("end-with-newline"))}function store_settings_to_cookie(){var opts={expires:360};$.cookie("tabsize",$("#tabsize").val(),opts),$.cookie("brace-style",$("#brace-style").val(),opts),$.cookie("detect-packers",$("#detect-packers").prop("checked")?"on":"off",opts),$.cookie("max-preserve-newlines",$("#max-preserve-newlines").val(),opts),$.cookie("keep-array-indentation",$("#keep-array-indentation").prop("checked")?"on":"off",opts),$.cookie("break-chained-methods",$("#break-chained-methods").prop("checked")?"on":"off",opts),$.cookie("space-before-conditional",$("#space-before-conditional").prop("checked")?"on":"off",opts),$.cookie("unescape-strings",$("#unescape-strings").prop("checked")?"on":"off",opts),$.cookie("jslint-happy",$("#jslint-happy").prop("checked")?"on":"off",opts),$.cookie("end-with-newline",$("#end-with-newline").prop("checked")?"on":"off",opts),$.cookie("wrap-line-length",$("#wrap-line-length").val(),opts),$.cookie("indent-scripts",$("#indent-scripts").val(),opts)}function beautify(){if(!the.beautify_in_progress){store_settings_to_cookie(),the.beautify_in_progress=!0;var output,source=the.editor?the.editor.getValue():$("#code").val(),opts={};opts.indent_size=$("#tabsize").val(),opts.indent_char=1==opts.indent_size?" ":" ",opts.max_preserve_newlines=$("#max-preserve-newlines").val(),opts.preserve_newlines="-1"!==opts.max_preserve_newlines,opts.keep_array_indentation=$("#keep-array-indentation").prop("checked"),opts.break_chained_methods=$("#break-chained-methods").prop("checked"),opts.indent_scripts=$("#indent-scripts").val(),opts.brace_style=$("#brace-style").val(),opts.space_before_conditional=$("#space-before-conditional").prop("checked"),opts.unescape_strings=$("#unescape-strings").prop("checked"),opts.jslint_happy=$("#jslint-happy").prop("checked"),opts.end_with_newline=$("#end-with-newline").prop("checked"),opts.wrap_line_length=$("#wrap-line-length").val(),looks_like_html(source)?output=html_beautify(source,opts):"css"==the.editor.options.mode?output=css_beautify(source):($("#detect-packers").prop("checked")&&(source=unpacker_filter(source)),output=js_beautify(source,opts)),the.editor?the.editor.setValue(output):$("#code").val(output),the.beautify_in_progress=!1}}function looks_like_html(source){var trimmed=source.replace(/^[ \t\n\r]+/,""),comment_mark="<!--";return trimmed&&"<"===trimmed.substring(0,1)&&trimmed.substring(0,4)!==comment_mark}!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}});var the={use_codemirror:!window.location.href.match(/without-codemirror/),beautify_in_progress:!1,editor:null};$(function(){read_settings_from_cookie(),$("select").change(beautify)}),$(function(){the.editor=CodeMirror.fromTextArea(document.getElementById("code"),{lineNumbers:!0,mode:"javascript",extraKeys:{F11:function(cm){cm.setOption("fullScreen",!cm.getOption("fullScreen"))},Esc:function(cm){cm.getOption("fullScreen")&&cm.setOption("fullScreen",!1)}}});var browserHeight=document.documentElement.clientHeight;the.editor.getWrapperElement().style.height=.5*browserHeight+"px",the.editor.refresh()});