var undoStack=[];function mkUndo(t){var n="#"+t+"-submit-undo",r="#"+t+"-text";$(n).click(function(t){t.preventDefault();var e=undoStack.pop();$(r).val(e),0==undoStack.length&&$(n).hide()})}function mkTool(t,n,r){r=r||{};var e="#"+t+"-submit-undo",o="#"+t+"-text";$("#"+t+"-submit").click(function(){var t=$(o).val();if(r.allowEmptyText||t.length){$("#action-error").hide();try{if(r.asyncResultFn)n(t,r.asyncResultFn);else{var a=n(t,r.asyncResultFn);$(o).val(a)}}catch(t){return void(r.exceptionFn&&r.exceptionFn(t))}undoStack.push(t),$(e).show()}}),mkUndo(t)}$(function(){function t(t,n,r,e){if(0!=$("#tool-"+t).length){var o,a="#submit";$("#file-select").on("change",function(t){$("#action-error").hide();var r=t.target.files[0];if(r.type!=n.inputMime)return $("#action-error").show(),void $("#action-error").text("Selected file is not a "+n.inputHumanFormat);o=r,$(a).attr("disabled",!1)}),$("#drag-and-drop").on("dragover",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").addClass("hover")}),$("#drag-and-drop").on("dragenter",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").addClass("hover")}),$("#drag-and-drop").on("dragleave",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").removeClass("hover")}),$("#drag-and-drop").on("dragend",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").removeClass("hover")}),$("#drag-and-drop").on("drop",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").removeClass("hover"),$("#action-error").hide(),t.dataTransfer=t.originalEvent.dataTransfer;var r=t.dataTransfer.files[0];if(r.type!=n.inputMime)return $("#action-error").show(),void $("#action-error").text("Selected file is not a "+n.inputHumanFormat);$("#drag-and-drop-selected").text("Selected "+r.name),o=r,$(a).attr("disabled",!1)}),$(a).click(function(){var t=new FileReader;t.onload=function(){var n=new Image;n.onload=function(){var t=$("<canvas>")[0];t.width=n.width,t.height=n.height,t.getContext("2d").drawImage(n,0,0),t.toBlob(function(t){var n=o.name.lastIndexOf(".");if(-1!=n)var e=o.name.substring(0,n)+"."+r.outputExt;else e=o.name+"."+optputOpts.outputExt;saveAs(t,e)},r.outputMime)},n.src=t.result},t.readAsDataURL(o)})}}function n(t){var n="";if(t instanceof Array){if(t.length){var r=t[0];if(0==(i=Object.keys(r)).length)for(var e=0;e<t.length;e++){n+=t[e],e!=t.length-1&&(n+="\t")}else{for(e=0;e<i.length;e++){n+=i[e],e!=i.length-1&&(n+="\t")}n+="\n";for(e=0;e<t.length;e++){for(var o=0;o<i.length;o++){var a=i[o];n+=t[e][a],o!=i.length-1&&(n+="\t")}n+="\n"}}}}else{var i=Object.keys(t);for(e=0;e<i.length;e++){n+=i[e],e!=i.length-1&&(n+="\t")}n+="\n";for(o=0;o<i.length;o++){n+=t[a=i[o]],o!=i.length-1&&(n+="\t")}n+="\n"}return n}if($("#copy-to-clipboard").click(function(t){t.preventDefault(),$("#tool-implementation textarea").select(),document.execCommand("copy")}),mkTool("json-to-tsv",function(t){return n(JSON.parse(t))},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("json-to-xml",function(t){try{var n=JSON.parse(t)}catch(t){throw new Error("Invalid JSON")}return vkbeautify.xml(json2xml(n))},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("yaml-to-xml",function(t){try{var n=YAML.parse(t)}catch(t){throw new Error("Invalid YAML")}return vkbeautify.xml(json2xml(n))},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("yaml-to-csv",function(t){try{var n=YAML.parse(t)}catch(t){throw new Error("Invalid YAML")}return json2csv({data:n})},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("json-to-text",function(t){try{var n=JSON.parse(t)}catch(t){throw new Error("Invalid JSON")}return jsonToText(n)},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("json-to-yaml",function(t){try{var n=JSON.parse(t)}catch(t){throw new Error("Invalid JSON")}return YAML.stringify(n)},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("yaml-to-json",function(t){try{var n=YAML.parse(t)}catch(t){throw new Error("Invalid YAML")}return JSON.stringify(n,0,2)},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("yaml-to-tsv",function(t){try{var r=YAML.parse(t)}catch(t){throw new Error("Invalid YAML")}return n(r)},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("tsv-extract-column",function(t){var n=$("#tsv-extract-column-number").val();if(!/^\d+$/.test(n))throw new Error("Invalid column number");for(var r=(t=t.replace("\r\n","\n")).split("\n"),e="",o=0;o<r.length;o++){var a=r[o];if(a.length)e+=a.split("\t")[n-1]+"\n";else e+="\n"}return e},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("tsv-delete-column",function(t){var n=$("#tsv-delete-column-number").val();if(!/^\d+$/.test(n))throw new Error("Invalid column number");for(var r=(t=t.replace("\r\n","\n")).split("\n"),e="",o=0;o<r.length;o++){var a=r[o];if(a.length){var i=a.split("\t");i.splice(n-1,1),e+=i.join("\t")+"\n"}else e+="\n"}return e},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("tsv-replace-column",function(t){var n=$("#tsv-replace-column-number").val();if(!/^\d+$/.test(n))throw new Error("Invalid column number");var r=$("#tsv-replace-column-new-column").val(),e=(t=t.replace("\r\n","\n")).split("\n"),o="";if(0==r.length)for(var a=0;a<e.length;a++){(l=e[a].split("\t")).splice(l-1,1),o+=l.join("\t")+"\n"}else{var i=r.split("\n");if(i.length<e.length){$("#action-error").show(),$("#action-error").text("The new column has less rows than the existing TSV. Replacing anyway.");for(a=0;a<e.length-i.length;a++)i.push("")}i.length>e.length&&($("#action-error").show(),$("#action-error").text("The new column has more rows than the existing TSV. Replacing anyway."),i.splice(e.length,i.length));for(a=0;a<e.length;a++){var l;(l=e[a].split("\t"))[n-1]=i[a],o+=l.join("\t")+"\n"}}return o},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("tsv-append-column",function(t){var n=$("#tsv-append-column-new-column").val(),r=(t=t.replace("\r\n","\n")).split("\n"),e="";if(0==n.length)for(var o=0;o<r.length;o++){(i=r[o].split("\t")).push(""),e+=i.join("\t")+"\n"}else{var a=n.split("\n");if(a.length<r.length){$("#action-error").show(),$("#action-error").text("The new column has less rows than the existing TSV. Appending anyway.");for(o=0;o<r.length-a.length;o++)a.push("")}a.length>r.length&&($("#action-error").show(),$("#action-error").text("The new column has more rows than the existing TSV. Appending anyway."),a.splice(r.length,a.length));for(o=0;o<r.length;o++){var i;(i=r[o].split("\t")).push(a[o]),e+=i.join("\t")+"\n"}}return e},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("tsv-insert-column",function(t){var n=$("#tsv-insert-column-number").val();if(!/^-?\d+$/.test(n))throw new Error("Invalid column number");var r=$("#tsv-insert-column-new-column").val(),e=(t=t.replace("\r\n","\n")).split("\n"),o="";if(0==r.length)for(var a=0;a<e.length;a++){var i=e[a].split("\t");if(-1==n){var l=i.length;i.splice(l,0,"")}else i.splice(n-1,0,"");o+=i.join("\t")+"\n"}else{var s=r.split("\n");if(s.length<e.length){$("#action-error").show(),$("#action-error").text("The new column has less rows than the existing TSV. Inserting anyway.");for(a=0;a<e.length-s.length;a++)s.push("")}s.length>e.length&&($("#action-error").show(),$("#action-error").text("The new column has more rows than the existing TSV. Inserting anyway."),s.splice(e.length,s.length));for(a=0;a<e.length;a++){i=e[a].split("\t");if(-1==n){l=i.length;i.splice(l,0,s[a])}else i.splice(n-1,0,s[a]);o+=i.join("\t")+"\n"}}return o},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("extract-column",function(t){var n=$("#extract-column-number").val(),r=$("#extract-column-delimiter").val();if(!/^\d+$/.test(n))throw new Error("Invalid column number");for(var e=(t=t.replace("\r\n","\n")).split("\n"),o="",a=0;a<e.length;a++){var i=e[a];if(i.length){if(" "==r)var l=i.split(/\s+/g);else l=i.split(r);o+=l[n-1]+"\n"}else o+="\n"}return o},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("delete-column",function(t){var n=$("#delete-column-number").val(),r=$("#delete-column-delimiter").val();if(!/^\d+$/.test(n))throw new Error("Invalid column number");for(var e=(t=t.replace("\r\n","\n")).split("\n"),o="",a=0;a<e.length;a++){var i=e[a];if(i.length){if(" "==r)var l=i.split(/\s+/g);else l=i.split(r);l.splice(n-1,1),o+=l.join(r)+"\n"}else o+="\n"}return o},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("replace-column",function(t){var n=$("#replace-column-number").val(),r=$("#replace-column-delimiter").val();if(!/^\d+$/.test(n))throw new Error("Invalid column number");var e=$("#replace-column-new-column").val(),o=(t=t.replace("\r\n","\n")).split("\n"),a="";if(0==e.length)for(var i=0;i<o.length;i++){(s=o[i].split(r)).splice(s-1,1),a+=s.join(r)+"\n"}else{var l=e.split("\n");if(l.length<o.length){$("#action-error").show(),$("#action-error").text("The new column has less rows than the existing TSV. Replacing anyway.");for(i=0;i<o.length-l.length;i++)l.push("")}l.length>o.length&&($("#action-error").show(),$("#action-error").text("The new column has more rows than the existing TSV. Replacing anyway."),l.splice(o.length,l.length));for(i=0;i<o.length;i++){var s;(s=o[i].split(r))[n-1]=l[i],a+=s.join(r)+"\n"}}return a},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("swap-columns",function(t){var n=$("#swap-columns-col1").val(),r=$("#swap-columns-col2").val(),e=$("#swap-columns-delimiter").val();if(!/^\d+$/.test(n))throw new Error("Invalid column 1 number");if(!/^\d+$/.test(r))throw new Error("Invalid column 2 number");if(n==r)throw new Error("Can't swap the same column");for(var o=(t=t.replace("\r\n","\n")).split("\n"),a="",i=0;i<o.length;i++){var l=o[i];if(l.length){if(" "==e)var s=l.split(/\s+/g);else s=l.split(e);var c=s[n-1],p=s[r-1];s[n-1]=p,s[r-1]=c,a+=s.join(e)+"\n"}else a+="\n"}return a},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("change-delimiter",function(t){for(var n=(t=t.replace("\r\n","\n")).split("\n"),r=$("#change-delimiter-old-delimiter").val(),e=$("#change-delimiter-new-delimiter").val(),o="",a=0;a<n.length;a++){var i=n[a];if(" "==r)var l=i.split(/\s+/g);else l=i.split(r);o+=(l=l.join(e))+"\n"}return o}),mkTool("csv-columns-to-rows",function(t,n){var r=(t=t.replace("\r\n","\n")).split("\n");r.splice(0,0,r[0]),t=r.join("\n");var e=new(0,window.csvtojson.Converter)({});e.transform=function(t,n,r){t.rowIndex_xyzzy=r,t.row_xyzzy=n},e.fromString(t,function(r,e){if(r)throw new Error(r);n(e,t)})},{asyncResultFn:function(t,n){for(var r=[],e=0;e<t.length;e++)for(var o=t[e].row_xyzzy,a=0;a<o.length;a++)void 0==r[a]&&(r[a]=[]),r[a].push(o[a]);var i=json2csv({data:r});i=i.split("\n").slice(1).join("\n"),$("#csv-columns-to-rows-text").val(i)},exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("csv-rows-to-columns",function(t,n){var r=(t=t.replace("\r\n","\n")).split("\n");r.splice(0,0,r[0]),t=r.join("\n");var e=new(0,window.csvtojson.Converter)({});e.transform=function(t,n,r){t.rowIndex_xyzzy=r,t.row_xyzzy=n},e.fromString(t,function(r,e){if(r)throw new Error(r);n(e,t)})},{asyncResultFn:function(t,n){for(var r=[],e=0;e<t.length;e++)for(var o=t[e].row_xyzzy,a=0;a<o.length;a++)void 0==r[a]&&(r[a]=[]),r[a].push(o[a]);var i=json2csv({data:r});i=i.split("\n").slice(1).join("\n"),$("#csv-rows-to-columns-text").val(i)},exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("csv-swap-columns",function(t,n){var r=$("#csv-swap-columns-col1").val();if(!/^\d+$/.test(r))throw new Error("Invalid column 1 number");var e=$("#csv-swap-columns-col2").val();if(!/^\d+$/.test(e))throw new Error("Invalid column 2 number");if(r==e)throw new Error("Can't swap the same column");var o=(t=t.replace("\r\n","\n")).split("\n");o.splice(0,0,o[0]),t=o.join("\n");var a=new(0,window.csvtojson.Converter)({});a.transform=function(t,n,r){t.rowIndex_xyzzy=r,t.row_xyzzy=n},a.fromString(t,function(o,a){if(o)throw new Error(o);n(a,t,r,e)})},{asyncResultFn:function(t,n,r,e){if(void 0===t[0].row_xyzzy[r-1]){var o="Column "+r+" doesn't exist";return $("#action-error").show(),void $("#action-error").text(o)}if(void 0===t[0].row_xyzzy[e-1]){o="Column "+e+" doesn't exist";return $("#action-error").show(),void $("#action-error").text(o)}for(var a=[],i=0;i<t.length;i++){var l=t[i].row_xyzzy,s=l[r-1],c=l[e-1];l[r-1]=c,l[e-1]=s,a.push(l)}var p=json2csv({data:a});p=p.split("\n").slice(1).join("\n"),$("#csv-swap-columns-text").val(p)},exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("csv-replace-column",function(t,n){var r=$("#csv-replace-column-number").val();if(!/^\d+$/.test(r))throw new Error("Invalid column number");var e=$("#csv-replace-column-new-column").val(),o=(t=t.replace("\r\n","\n")).split("\n");o.splice(0,0,o[0]),t=o.join("\n");var a=new(0,window.csvtojson.Converter)({});a.transform=function(t,n,r){t.rowIndex_xyzzy=r,t.row_xyzzy=n},a.fromString(t,function(o,a){if(o)throw new Error(o);n(a,t,r,e)})},{asyncResultFn:function(t,n,r,e){if(void 0===t[0].row_xyzzy[r-1]){var o="Column "+r+" doesn't exist";return $("#action-error").show(),void $("#action-error").text(o)}if(0==e.length){for(var a=[],i=0;i<t.length;i++)t[i].row_xyzzy.splice(r-1,1),a.push(t[i].row_xyzzy);l=(l=json2csv({data:a})).split("\n").slice(1).join("\n"),$("#csv-replace-column-text").val(l)}else{var l,s=e.split("\n");if(s.length<t.length){$("#action-error").show(),$("#action-error").text("The new column has less rows than the existing CSV. Replacing anyway.");for(i=0;i<t.length-s.length;i++)s.push("")}s.length>t.length&&($("#action-error").show(),$("#action-error").text("The new column has more rows than the existing CSV. Replacing anyway."),s.splice(t.length,s.length));for(a=[],i=0;i<t.length;i++)t[i].row_xyzzy[r-1]=s[i],a.push(t[i].row_xyzzy);l=(l=json2csv({data:a})).split("\n").slice(1).join("\n"),$("#csv-replace-column-text").val(l)}},exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("csv-append-column",function(t,n){var r=$("#csv-append-column-new-column").val(),e=(t=t.replace("\r\n","\n")).split("\n");e.splice(0,0,e[0]),t=e.join("\n");var o=new(0,window.csvtojson.Converter)({});o.transform=function(t,n,r){t.rowIndex_xyzzy=r,t.row_xyzzy=n},o.fromString(t,function(e,o){if(e)throw new Error(e);n(o,t,r)})},{asyncResultFn:function(t,n,r){var e=r.split("\n");if(e.length<t.length){$("#action-error").show(),$("#action-error").text("The new column has less rows than the existing CSV. Appending anyway.");for(var o=0;o<t.length-e.length;o++)e.push("")}e.length>t.length&&($("#action-error").show(),$("#action-error").text("The new column has more rows than the existing CSV. Appending anyway."),e.splice(t.length,e.length));var a=t[0].row_xyzzy.length,i=[];for(o=0;o<t.length;o++)t[o].row_xyzzy[a]=e[o],i.push(t[o].row_xyzzy);var l=json2csv({data:i});l=l.split("\n").slice(1).join("\n"),$("#csv-append-column-text").val(l)},exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("csv-insert-column",function(t,n){var r=$("#csv-insert-column-number").val();if(!/^-?\d+$/.test(r))throw new Error("Invalid column number");var e=$("#csv-insert-column-new-column").val(),o=(t=t.replace("\r\n","\n")).split("\n");o.splice(0,0,o[0]),t=o.join("\n");var a=new(0,window.csvtojson.Converter)({});a.transform=function(t,n,r){t.rowIndex_xyzzy=r,t.row_xyzzy=n},a.fromString(t,function(o,a){if(o)throw new Error(o);n(a,t,r,e)})},{asyncResultFn:function(t,n,r,e){if(0==e.length){for(var o=[],a=0;a<t.length;a++){if(-1==r){var i=t[a].row_xyzzy.length;t[a].row_xyzzy.splice(i,0,"")}else t[a].row_xyzzy.splice(r-1,0,"");o.push(t[a].row_xyzzy)}l=(l=json2csv({data:o})).split("\n").slice(1).join("\n"),$("#csv-insert-column-text").val(l)}else{var l,s=e.split("\n");if(s.length<t.length){$("#action-error").show(),$("#action-error").text("The new column has less rows than the existing CSV. Inserting anyway.");for(a=0;a<t.length-s.length;a++)s.push("")}s.length>t.length&&($("#action-error").show(),$("#action-error").text("The new column has more rows than the existing CSV. Inserting anyway."),s.splice(t.length,s.length));for(o=[],a=0;a<t.length;a++){if(-1==r){i=t[a].row_xyzzy.length;t[a].row_xyzzy.splice(i,0,s[a])}else t[a].row_xyzzy.splice(r-1,0,s[a]);o.push(t[a].row_xyzzy)}l=(l=json2csv({data:o})).split("\n").slice(1).join("\n"),$("#csv-insert-column-text").val(l)}},exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("csv-change-delimiter",function(t,n){var r=$("#csv-change-delimiter-new-delimiter").val(),e=(t=t.replace("\r\n","\n")).split("\n");e.splice(0,0,e[0]),t=e.join("\n"),new(0,window.csvtojson.Converter)({}).fromString(t,function(e,o){if(e)throw new Error(e);n(o,t,r)})},{asyncResultFn:function(t,n,r){var e=json2csv({data:t,del:r});e=e.split("\n").slice(1).join("\n"),$("#csv-change-delimiter-text").val(e)},exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("tsv-change-delimiter",function(t){for(var n=(t=t.replace("\r\n","\n")).split("\n"),r=$("#tsv-change-delimiter-new-delimiter").val(),e="",o=0;o<n.length;o++){var a=n[o].split("\t");e+=(a=a.join(r))+"\n"}return e}),mkTool("tsv-swap-columns",function(t){var n=$("#tsv-swap-columns-col1").val();if(!/^\d+$/.test(n))throw new Error("Invalid column 1 number");var r=$("#tsv-swap-columns-col2").val();if(!/^\d+$/.test(r))throw new Error("Invalid column 2 number");if(n==r)throw new Error("Can't swap the same column");for(var e=(t=t.replace("\r\n","\n")).split("\n"),o="",a=0;a<e.length;a++){var i=e[a];if(i.length){var l=i.split("\t"),s=l[n-1],c=l[r-1];l[n-1]=c,l[r-1]=s,o+=l.join("\t")+"\n"}else o+="\n"}return o},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("tsv-columns-to-rows",function(t,n){for(var r=(t=t.replace("\r\n","\n")).split("\n"),e=[],o=0;o<r.length;o++)for(var a=r[o].split("\t"),i=0;i<a.length;i++)void 0==e[i]&&(e[i]=[]),e[i].push(a[i]);for(o=0;o<e.length;o++)e[o]=e[o].join("\t");return e.join("\n")}),mkTool("tsv-rows-to-columns",function(t,n){for(var r=(t=t.replace("\r\n","\n")).split("\n"),e=[],o=0;o<r.length;o++)for(var a=r[o].split("\t"),i=0;i<a.length;i++)void 0==e[i]&&(e[i]=[]),e[i].push(a[i]);for(o=0;o<e.length;o++)e[o]=e[o].join("\t");return e.join("\n")}),mkTool("text-columns-to-rows",function(t,n){for(var r=(t=t.replace("\r\n","\n")).split("\n"),e=$("#text-columns-to-rows-delimiter").val(),o=[],a=0;a<r.length;a++){var i=r[a];if(" "==e)var l=i.split(/\s+/g);else l=i.split(e);for(var s=0;s<l.length;s++)void 0==o[s]&&(o[s]=[]),o[s].push(l[s])}for(a=0;a<o.length;a++)o[a]=o[a].join(e);return o.join("\n")}),mkTool("text-rows-to-columns",function(t,n){for(var r=(t=t.replace("\r\n","\n")).split("\n"),e=$("#text-rows-to-columns-delimiter").val(),o=[],a=0;a<r.length;a++){var i=r[a];if(" "==e)var l=i.split(/\s+/g);else l=i.split(e);for(var s=0;s<l.length;s++)void 0==o[s]&&(o[s]=[]),o[s].push(l[s])}for(a=0;a<o.length;a++)o[a]=o[a].join(e);return o.join("\n")}),mkTool("tsv-transpose",function(t){for(var n=(t=t.replace("\r\n","\n")).split("\n"),r=[],e=0;e<n.length;e++)for(var o=n[e].split("\t"),a=0;a<o.length;a++)void 0==r[a]&&(r[a]=[]),r[a].push(o[a]);for(e=0;e<r.length;e++)r[e]=r[e].join("\t");return r.join("\n")}),mkTool("text-transpose",function(t){for(var n=(t=t.replace("\r\n","\n")).split("\n"),r=$("#text-transpose-delimiter").val(),e=[],o=0;o<n.length;o++){var a=n[o];if(" "==r)var i=a.split(/\s+/g);else i=a.split(r);for(var l=0;l<i.length;l++)void 0==e[l]&&(e[l]=[]),e[l].push(i[l])}for(o=0;o<e.length;o++)e[o]=e[o].join(r);return e.join("\n")}),mkTool("xml-prettify",function(t){return vkbeautify.xml(t)}),mkTool("xml-minify",function(t){return vkbeautify.xmlmin(t)}),mkTool("mysql-password",function(t){var n=CryptoJS.SHA1(t);return("*"+CryptoJS.SHA1(n)).toUpperCase()}),mkTool("mariadb-password",function(t){var n=CryptoJS.SHA1(t);return("*"+CryptoJS.SHA1(n)).toUpperCase()}),mkTool("postgres-password",function(t){var n=$("#postgres-username").val();return"md5"+CryptoJS.MD5(t.toString()+n.toString())}),mkTool("bcrypt",function(t,n){var r=new bCrypt,e=$("#bcrypt-pass").val(),o=$("#bcrypt-rounds").val()||10;r.hashpw(e,r.gensalt(o),function(t){n(t)})},{allowEmptyText:!0,asyncResultFn:function(t){$("#bcrypt-text").val(t)},exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("bcrypt-check",function(t,n){for(var r=t.split("\n"),e=new bCrypt,o=$("#bcrypt-check-pass").val(),a=0;a<r.length;a++){var i=r[a];0!=i.length&&function(){var t=a;e.checkpw(o,i,function(r){n(i,t,r)})}()}},{asyncResultFn:function(t,n,r){var e=$("#bcrypt-check-text").val().split("\n"),o=!1;1==r&&(o=!0),e[n]=o?"Valid: "+e[n]:"Invalid: "+e[n],$("#bcrypt-check-text").val(e.join("\n"))},exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),"undefined"!=typeof scrypt_module_factory){function r(t){mkTool("scrypt",function(n){var r=$("#scrypt-pass").val(),e=$("#scrypt-salt").val(),o=$("#scrypt-output-size").val(),a=$("#scrypt-n").val(),i=$("#scrypt-r").val(),l=$("#scrypt-p").val(),s=t.crypto_scrypt(t.encode_utf8(r),t.encode_utf8(e),a,i,l,o);return t.to_hex(s)},{allowEmptyText:!0,exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}})}scrypt_module_factory(r)}if("undefined"!=typeof scrypt_module_factory){function r(t){mkTool("scrypt-check",function(n){for(var r=n.split("\n"),e=$("#scrypt-check-pass").val(),o=$("#scrypt-check-salt").val(),a=($("#scrypt-check-output-size").val(),$("#scrypt-check-n").val()),i=$("#scrypt-check-r").val(),l=$("#scrypt-check-p").val(),s="",c=0;c<r.length;c++){var p=r[c];if(0==p.length)s+="\n";else{var u=t.crypto_scrypt(t.encode_utf8(e),t.encode_utf8(o),a,i,l,p.length/2);s+=(u=t.to_hex(u))==p?"Valid: "+p+"\n":"Invalid: "+p+"\n"}}return s},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}})}scrypt_module_factory(r)}if(mkTool("xor-encrypt",function(t){var n=$("#xor-encrypt-pass").val();if(0==n.length)throw new Error("empty pass");for(var r="",e=0;e<t.length;e++){var o=(t[e].charCodeAt(0)^n[e%n.length].charCodeAt(0)).toString(16);1==o.length&&(o="0"+o),r+=o,e!=t.length-1&&(r+="-")}return r},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("xor-decrypt",function(t){var n=$("#xor-decrypt-pass").val();if(0==n.length)throw new Error("empty pass");for(var r=t.split("-"),e="",o=0;o<r.length;o++){var a=parseInt(r[o],16),i=n[o%n.length].charCodeAt(0);e+=String.fromCharCode(a^i)}return e},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("aes-encrypt",function(t){var n=$("#aes-encrypt-pass").val();return CryptoJS.AES.encrypt(t,n)}),mkTool("aes-decrypt",function(t){var n=$("#aes-decrypt-pass").val(),r=CryptoJS.AES.decrypt(t,n);return CryptoJS.enc.Utf8.stringify(r)}),mkTool("rc4-encrypt",function(t){var n=$("#rc4-encrypt-pass").val();return CryptoJS.RC4.encrypt(t,n)}),mkTool("rc4-decrypt",function(t){var n=$("#rc4-decrypt-pass").val(),r=CryptoJS.RC4.decrypt(t,n);return CryptoJS.enc.Utf8.stringify(r)}),mkTool("des-encrypt",function(t){var n=$("#des-encrypt-pass").val();return CryptoJS.DES.encrypt(t,n)}),mkTool("des-decrypt",function(t){var n=$("#des-decrypt-pass").val(),r=CryptoJS.DES.decrypt(t,n);return CryptoJS.enc.Utf8.stringify(r)}),mkTool("triple-des-encrypt",function(t){var n=$("#triple-des-encrypt-pass").val();return CryptoJS.TripleDES.encrypt(t,n)}),mkTool("triple-des-decrypt",function(t){var n=$("#triple-des-decrypt-pass").val(),r=CryptoJS.TripleDES.decrypt(t,n);return CryptoJS.enc.Utf8.stringify(r)}),mkTool("rabbit-encrypt",function(t){var n=$("#rabbit-encrypt-pass").val();return CryptoJS.Rabbit.encrypt(t,n)}),mkTool("rabbit-decrypt",function(t){var n=$("#rabbit-decrypt-pass").val(),r=CryptoJS.Rabbit.decrypt(t,n);return CryptoJS.enc.Utf8.stringify(r)}),mkTool("ntlm-hash",function(t){var n=t.split("").join("\0")+"\0";return md4(n).toUpperCase()}),mkTool("md2-hash",function(t){return md2(t)},{allowEmptyText:!0}),mkTool("md4-hash",function(t){return md4(t)},{allowEmptyText:!0}),mkTool("md5-hash",function(t){return CryptoJS.MD5(t)},{allowEmptyText:!0}),mkTool("md6-hash",function(t){var n=parseInt($("#md6-hash-size").val(),10);return(new md6hash).hex(t,n)},{allowEmptyText:!0}),mkTool("ripemd128-hash",function(t){return CryptoJS.RIPEMD128(t)},{allowEmptyText:!0}),mkTool("ripemd160-hash",function(t){return CryptoJS.RIPEMD160(t)},{allowEmptyText:!0}),mkTool("ripemd256-hash",function(t){return CryptoJS.RIPEMD256(t)},{allowEmptyText:!0}),mkTool("ripemd320-hash",function(t){return CryptoJS.RIPEMD320(t)},{allowEmptyText:!0}),mkTool("sha1-hash",function(t){return CryptoJS.SHA1(t)},{allowEmptyText:!0}),mkTool("sha2-hash",function(t){var n=parseInt($("#sha2-hash-size").val(),10);return 224==n?CryptoJS.SHA224(t):256==n?CryptoJS.SHA256(t):384==n?CryptoJS.SHA384(t):512==n?CryptoJS.SHA512(t):"unknown hash size"},{allowEmptyText:!0}),mkTool("sha3-hash",function(t){var n=parseInt($("#sha3-hash-size").val(),10);if(224==n)var r=sha3_224(t);else if(256==n)r=sha3_256(t);else if(384==n)r=sha3_384(t);else if(512==n)r=sha3_512(t);return r},{allowEmptyText:!0}),mkTool("sha224-hash",function(t){return CryptoJS.SHA224(t)},{allowEmptyText:!0}),mkTool("sha256-hash",function(t){return CryptoJS.SHA256(t)},{allowEmptyText:!0}),mkTool("sha384-hash",function(t){return CryptoJS.SHA384(t)},{allowEmptyText:!0}),mkTool("sha512-hash",function(t){return CryptoJS.SHA512(t)},{allowEmptyText:!0}),mkTool("crc16-hash",function(t){return crc16(t)},{allowEmptyText:!0}),mkTool("crc32-hash",function(t){return(CRC32.str(t)>>>0).toString(16)},{allowEmptyText:!0}),mkTool("adler32-hash",function(t){for(var n=(ADLER32.str(t)>>>0).toString(16),r=8-n.length;r-- >0;)n="0"+n;return n},{allowEmptyText:!0}),mkTool("whirlpool-hash",function(t){return Whirlpool(t)},{allowEmptyText:!0}),mkTool("seconds-to-hms",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=0;e<n.length;e++){var o=n[e];if(/(\d+)/.test(o)){var a=o;r+=Math.floor(a/3600)+":"+Math.floor(a/60)+":"+(a=a%60)}else r+=o;r+="\n"}return r}),mkTool("hms-to-seconds",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=0;e<n.length;e++){var o=n[e];if(/(\d+)/.test(o)){var a=o.split(":");r+=(3600*parseInt(a[0],10)+60*parseInt(a[1],10)+parseInt(a[2],10)).toString()}else r+=o;r+="\n"}return r}),mkTool("dec-to-gray",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=0;e<n.length;e++){var o=n[e];if(o=(o=o.replace(/^\s+/,"")).replace(/\s+$/,""),/(\d+)/.test(o)){for(var a=parseInt(o,10),i=(a^a>>1).toString(2);i.length<8;)i="0"+i;r+=i}r+="\n"}return r},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("gray-to-dec",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=0;e<n.length;e++){var o=n[e];if(o=(o=o.replace(/^\s+/,"")).replace(/\s+$/,""),/[01]+/.test(o)){for(var a=parseInt(o,2),i=a>>1;0!=i;i>>=1)a^=i;r+=a.toString()}else r+=o;r+="\n"}return r},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("bin-to-gray",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=0;e<n.length;e++){var o=n[e];if(o=(o=o.replace(/^\s+/,"")).replace(/\s+$/,""),/(\d+)/.test(o)){for(var a=parseInt(o,2),i=(a^a>>1).toString(2);i.length<8;)i="0"+i;r+=i}r+="\n"}return r},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("gray-to-bin",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=0;e<n.length;e++){var o=n[e];if(o=(o=o.replace(/^\s+/,"")).replace(/\s+$/,""),/[01]+/.test(o)){for(var a=parseInt(o,2),i=a>>1;0!=i;i>>=1)a^=i;for(var l=a.toString(2);l.length<8;)l="0"+l;r+=l}else r+=o;r+="\n"}return r},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("hex-to-gray",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=0;e<n.length;e++){var o=n[e];if(o=(o=(o=o.replace(/^\s+/,"")).replace(/\s+$/,"")).replace(/^0x/i,""),/[0-9a-f]/i.test(o)){for(var a=parseInt(o,16),i=(a^a>>1).toString(2);i.length<8;)i="0"+i;r+=i}r+="\n"}return r},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("gray-to-hex",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=0;e<n.length;e++){var o=n[e];if(o=(o=o.replace(/^\s+/,"")).replace(/\s+$/,""),/[01]+/.test(o)){for(var a=parseInt(o,2),i=a>>1;0!=i;i>>=1)a^=i;r+="0x"+a.toString(16)}else r+=o;r+="\n"}return r},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("markdown-to-html",function(t){return(new showdown.Converter).makeHtml(t)}),mkTool("text-to-binary",function(t){for(var n=[],r=0;r<t.length;r++)for(var e=unescape(encodeURIComponent(t[r])),o=0;o<e.length;o++)n.push(e[o].charCodeAt(0));var a="",i=$("#text-to-binary-format-field input").val();for(r=0;r<n.length;r++){for(var l=n[r].toString(2),s=l;s.length<8;)s="0"+s.toString();var c=i;a+=c=(c=c.replace(/%0b/g,s)).replace(/%b/g,l)}return a}),$("#text-to-binary-format").click(function(t){t.preventDefault(),$("#text-to-binary-format-field").slideToggle()}),mkTool("binary-to-text",function(t){t=t.replace(/\s+/g," "),bytes=t.split(" ");for(var n=0;n<bytes.length;n++)if(bytes[n].length<8)for(var r=bytes[n].length;8!=r;r++)bytes[n]="0"+bytes[n];if((t=bytes.join("")).length%8!=0)throw new Error("Input binary doesnt split into groups of 8 bits evenly.");var e="";for(n=0;n<t.length;n+=8)e+=String.fromCharCode(parseInt(t.substr(n,8),2));return e},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("text-to-octal",function(t){for(var n=[],r=0;r<t.length;r++)for(var e=unescape(encodeURIComponent(t[r])),o=0;o<e.length;o++)n.push(e[o].charCodeAt(0));var a="",i=$("#text-to-octal-format-field input").val();for(r=0;r<n.length;r++){var l=n[r].toString(8),s=i;a+=s=s.replace(/%o/g,l)}return a}),$("#text-to-octal-format").click(function(t){t.preventDefault(),$("#text-to-octal-format-field").slideToggle()}),mkTool("octal-to-text",function(t){t=t.replace(/\s+/g," "),bytes=t.split(" ");for(var n=0;n<bytes.length;n++)if(bytes[n].length<3)for(var r=bytes[n].length;3!=r;r++)bytes[n]="0"+bytes[n];if((t=bytes.join("")).length%3!=0)throw new Error("Input octal doesnt split into groups of 3 digits evenly.");var e="";for(n=0;n<t.length;n+=3)e+=String.fromCharCode(parseInt(t.substr(n,3),8));return e},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("text-to-ascii",function(t){for(var n=[],r=0;r<t.length;r++)for(var e=unescape(encodeURIComponent(t[r])),o=0;o<e.length;o++)n.push(e[o].charCodeAt(0));var a="";for(r=0;r<n.length;r++){var i=n[r].toString(10),l="%d ";a+=l=l.replace(/%d/g,i)}return a}),mkTool("ascii-to-text",function(t){t=t.replace(/\s+/g," "),bytes=t.split(" ");for(var n="",r=0;r<bytes.length;r++)n+=String.fromCharCode(bytes[r]);return n},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),$("#text-to-decimal-format").click(function(t){t.preventDefault(),$("#text-to-decimal-format-field").slideToggle()}),mkTool("text-to-decimal",function(t){for(var n=[],r=0;r<t.length;r++)for(var e=unescape(encodeURIComponent(t[r])),o=0;o<e.length;o++)n.push(e[o].charCodeAt(0));var a="",i=$("#text-to-decimal-format-field input").val();for(r=0;r<n.length;r++){var l=n[r].toString(10),s=i;a+=s=s.replace(/%d/g,l)}return a}),mkTool("decimal-to-text",function(t){t=t.replace(/\s+/g," "),bytes=t.split(" ");for(var n="",r=0;r<bytes.length;r++)n+=String.fromCharCode(bytes[r]);return n},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("text-to-hex",function(t){for(var n=[],r=0;r<t.length;r++)for(var e=unescape(encodeURIComponent(t[r])),o=0;o<e.length;o++)n.push(e[o].charCodeAt(0));var a="",i=$("#text-to-hex-format-field input").val();for(r=0;r<n.length;r++){var l=n[r].toString(16);1==l.length&&(l="0"+l);var s=i;a+=s=s.replace(/%x/g,l)}return a}),$("#text-to-hex-format").click(function(t){t.preventDefault(),$("#text-to-hex-format-field").slideToggle()}),mkTool("hex-to-text",function(t){t=(t=t.replace(/0x/g,"")).replace(/\s+/g," "),bytes=t.split(" ");for(var n=0;n<bytes.length;n++)1==bytes[n].length&&(bytes[n]="0"+bytes[n]);if((t=bytes.join("")).length%2!=0)throw new Error("Uneven number of hex characters.");var r="";for(n=0;n<t.length;n+=2)r+=String.fromCharCode(parseInt(t.substr(n,2),16));return r},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("text-lowercase",function(t){for(var n="",r=0;r<t.length;r++)n+=t[r].toLowerCase();return n}),mkTool("text-uppercase",function(t){for(var n="",r=0;r<t.length;r++)n+=t[r].toUpperCase();return n}),mkTool("text-titlecase",function(t){return t=t.toLowerCase(),titleCase(t)}),mkTool("text-capitalize",function(t){for(var n=(t=t.replace(/\r\n/,"\n")).split("\n"),r=0;r<n.length;r++){for(var e=n[r].split(" "),o=0;o<e.length;o++)e[o]=e[o].charAt(0).toUpperCase()+e[o].substring(1);n[r]=e.join(" ")}return n.join("\n")}),mkTool("text-invert-case",function(t){for(var n="",r=0;r<t.length;r++){n+=t[r].toLowerCase()==t[r]?t[r].toUpperCase():t[r].toLowerCase()}return n}),mkTool("text-randomcase",function(t){for(var n="",r=0;r<t.length;r++){var e=t[r].toLowerCase();Math.random()<.5?n+=e:n+=e.toUpperCase()}return n}),mkTool("spaces-to-tabs",function(t){var n=$("#spaces-to-tabs-count").val(),r=new RegExp(" {"+n+"}","g");return t.replace(r,"\t")}),mkTool("tabs-to-spaces",function(t){for(var n=$("#tabs-to-spaces-count").val(),r="",e=1;e<=n;e++)r+=" ";return t.replace(/\t/g,r)}),mkTool("spaces-to-newlines",function(t){return t.replace(/\s+/g,"\n")}),mkTool("newlines-to-spaces",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r=[],e=0;e<n.length;e++)/\w/.test(n[e])&&r.push(n[e]);return r.join(" ")}),mkTool("add-slashes",function(t){return t=(t=(t=(t=(t=t.replace(/\\/g,"\\\\")).replace(/\t/g,"\\t")).replace(/\n/g,"\\n")).replace(/'/g,"\\'")).replace(/"/g,'\\"')}),mkTool("strip-slashes",function(t){return t.replace(/\\(.?)/g,function(t,n){return"\\"==n?"\\":"t"==n?"\t":"n"==n?"\n":""==n?"":n})}),mkTool("remove-accents",function(t){return t=removeAccents(t)}),mkTool("remove-whitespace",function(t){return t=(t=(t=(t=t.replace(/ +/g," ")).replace(/\t+/g," ")).replace(/^\s+/g,"")).replace(/\s+$/g,"")}),mkTool("remove-all-whitespace",function(t){return t=t.replace(/\s+/g,"")}),mkTool("remove-punctuation",function(t){return t=t.replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,\-.\/:;<=>?@\[\]^_`{|}~]/g,"")}),mkTool("text-repeat",function(t){for(var n=$("#text-repeat-count").val(),r="",e=1;e<=n;e++)r+=t;return r}),mkTool("text-right-align",function(t){for(var n=t.split("\n"),r=0,e=0;e<n.length;e++)n[e].length>r&&(r=n[e].length);ret="";for(e=0;e<n.length;e++){for(var o=n[e],a=r-o.length,i=o,l=0;l<a;l++)i=" "+i.toString();ret+=i+"\n"}return ret}),mkTool("text-left-pad",function(t){var n=$("#text-left-pad-width").val(),r=$("#text-left-pad-symbol").val(),e=t.split("\n");ret="";for(var o=0;o<e.length;o++){var a=e[o];if(a.length>=n)ret+=a;else{for(var i=n-a.length,l=a,s=0;s<i;s++)l=r.toString()+l.toString();ret+=l}ret+="\n"}return ret}),mkTool("text-right-pad",function(t){var n=$("#text-right-pad-width").val(),r=$("#text-right-pad-symbol").val(),e=t.split("\n");ret="";for(var o=0;o<e.length;o++){var a=e[o];if(a.length>=n)ret+=a;else{for(var i=n-a.length,l=a,s=0;s<i;s++)l+=r.toString();ret+=l}ret+="\n"}return ret}),mkTool("text-replace",function(t){var n=$("#text-replace-from").val(),r=$("#text-replace-to").val();return"\\n"==r?r="\n":"\\t"==r&&(r="\t"),t.split(n).join(r)}),mkTool("text-reverse",function(t){return t.split("").reverse().join("")}),mkTool("text-length",function(t){return t.length}),mkTool("text-truncate",function(t){var n=t.split("\n"),r=$("#text-truncate-length").val();ret="";for(var e=0;e<n.length;e++){var o=n[e];o.length>r&&(o=o.substr(0,r)),ret+=o+"\n"}return ret}),mkTool("text-trim",function(t){var n=t.split("\n");ret="";for(var r=0;r<n.length;r++){var e=n[r];e=(e=e.replace(/^\s+/g,"")).replace(/\s+$/g,""),ret+=e+"\n"}return ret}),mkTool("merge-lists",function(t){for(var n=t.split("\n"),r=$("#merge-lists-text2").val().split("\n"),e=$("#merge-lists-delimiter").val(),o="",a=0;a<n.length;a++){var i=n[a],l=r[a];if(void 0===l)break;o+=i+""+e+l+"\n"}return o}),mkTool("zip-lists",function(t){for(var n=t.split("\n"),r=$("#zip-lists-text2").val().split("\n"),e="",o=0;o<n.length;o++){var a=n[o],i=r[o];if(void 0===i)break;e+=a+"\n",e+=i+"\n"}return e}),mkTool("common-elements",function(t){for(var n=t.split("\n"),r=$("#common-elements-text2").val().split("\n"),e={},o=0;o<n.length;o++){e[n[o]]=1}var a="";for(o=0;o<r.length;o++){var i=r[o];void 0!==e[i]&&(a+=i+"\n")}return $("#common-elements-text2").val(""),a}),mkTool("distinct-elements",function(t){for(var n=t.split("\n"),r=$("#distinct-elements-text2").val().split("\n"),e={},o=0;o<n.length;o++){e[l=n[o]]=1}var a={};for(o=0;o<r.length;o++){a[s=r[o]]=1}var i="";for(o=0;o<n.length;o++){var l;void 0===e[l=n[o]]&&void 0!==a[l]?i+=l+"\n":void 0!==e[l]&&void 0===a[l]&&(i+=l+"\n")}for(o=0;o<r.length;o++){var s;void 0===e[s=r[o]]&&void 0!==a[s]?i+=s+"\n":void 0!==e[s]&&void 0===a[s]&&(i+=s+"\n")}return $("#distinct-elements-text2").val(""),i}),mkTool("grep",function(t){var n=$("#grep-regex").val(),r=$("#grep-invert").is(":checked"),e=n.match(/^\/(.*?)\/([gimuy]*)$/);if(e)var o=new RegExp(e[1],e[2]);else o=new RegExp(n);for(var a=(t=t.replace(/\r\n/g,"\n")).split("\n"),i="",l=0;l<a.length;l++){var s=a[l];r?o.test(s)||(i+=s+"\n"):o.test(s)&&(i+=s+"\n")}return i}),mkTool("head",function(t){for(var n=$("#head-how-many").val(),r=(t=t.replace(/\r\n/g,"\n")).split("\n"),e="",o=0;o<n&&!(o>=r.length);o++)e+=r[o]+"\n";return e}),mkTool("tail",function(t){var n=$("#tail-how-many").val(),r=(t=t.replace(/\r\n/g,"\n")).split("\n");r=r.reverse();for(var e=[],o=0;o<n&&!(o>=r.length);o++)e.push(r[o]);return(e=e.reverse()).join("\n")}),mkTool("extract-lines",function(t){for(var n=$("#extract-lines-start").val(),r=$("#extract-lines-end").val(),e=(t=t.replace(/\r\n/g,"\n")).split("\n"),o="",a=n-1;a<=r-1&&!(a>=e.length);a++)o+=e[a]+"\n";return o}),mkTool("letter-count",function(t){return t.length}),$("#number-lines-format").click(function(t){t.preventDefault(),$("#number-lines-field").slideToggle()}),mkTool("number-lines",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=$('#number-lines-field input[name="format"]').val(),o=0;o<n.length;o++){var a=n[o];r+=e.replace("NR",o+1)+a+"\n"}return r}),mkTool("prefix-lines",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=$('#prefix-lines-field input[name="prefix"]').val(),o=0;o<n.length;o++){r+=e+n[o]+"\n"}return r}),mkTool("suffix-lines",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=$('#suffix-lines-field input[name="suffix"]').val(),o=0;o<n.length;o++){r+=n[o]+e+"\n"}return r}),mkTool("prefix-suffix-lines",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=$('#prefix-suffix-lines-field input[name="prefix"]').val(),o=$('#prefix-suffix-lines-field input[name="suffix"]').val(),a=0;a<n.length;a++){r+=e+n[a]+o+"\n"}return r}),mkTool("longest-line",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=0;e<n.length;e++){var o=n[e];o.length>r.length&&(r=o)}return r}),mkTool("shortest-line",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=-1,o=0;o<n.length;o++){var a=n[o];a.length&&(-1==e||a.length<r.length)&&(r=a,e=a.length)}return r}),mkTool("duplicate-lines",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r={},e="",o=0;o<n.length;o++){var a=n[o];r[a]||(r[a]=1,e+=a+"\n")}return e}),mkTool("empty-lines",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=0;e<n.length;e++){var o=n[e];/^[\s\t]*$/.test(o)||(r+=o+"\n")}return r}),mkTool("random-lines",function(t){var n=(t=t.replace(/\r\n/g,"\n")).split("\n");return(n=function(t){for(var n,r,e=t.length;0!==e;)r=Math.floor(Math.random()*e),n=t[e-=1],t[e]=t[r],t[r]=n;return t}(n)).join("\n")}),mkTool("random-letters",function(t){var n=(t=t.replace(/\r\n/g,"\n")).split("");return(n=function(t){for(var n,r,e=t.length;0!==e;)r=Math.floor(Math.random()*e),n=t[e-=1],t[e]=t[r],t[r]=n;return t}(n)).join("")}),mkTool("join-lines",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r=[],e=$("#join-lines-symbol").val(),o=0;o<n.length;o++)/\w/.test(n[o])&&r.push(n[o]);return r.join(e)}),mkTool("filter-lines",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=$("#filter-lines-pattern").val(),o=$("#filter-lines-invert").is(":checked"),a=0;a<n.length;a++)o?n[a].indexOf(e)>=0||(r+=n[a]+"\n"):n[a].indexOf(e)>=0&&(r+=n[a]+"\n");return r}),mkTool("text-split",function(t){var n=$("#text-split-symbol").val();return t.split(n).join("\n")}),mkTool("reverse-lines",function(t){var n=(t=t.replace(/\r\n/g,"\n")).split("\n");return n.reverse(),n.join("\n")}),mkTool("text-sort",function(t){var n=(t=t.replace(/\r\n/g,"\n")).split("\n");return n.sort(),n.join("\n")}),mkTool("numeric-sort",function(t){var n=(t=t.replace(/\r\n/g,"\n")).split("\n");return n.sort(function(t,n){return parseInt(t,10)-parseInt(n,10)}),n.join("\n")}),mkTool("word-sort",function(t){var n=(t=(t=(t=t.replace(/[?.,!"]/g," ")).replace(/\s+$/g,"")).replace(/^\s+/g,"")).split(/\s+/);return n.sort(function(t,n){return t.toLowerCase()<n.toLowerCase()?-1:t.toLowerCase()>n.toLowerCase()?1:0}),n.join(" ")}),mkTool("line-length-sort",function(t){var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r=$("#line-length-sort-format").val();return n.sort(function(t,n){return"s2l"==r?t.length-n.length:n.length-t.length}),n.join("\n")}),mkTool("ip-sort",function(t){var n=(t=t.replace(/\r\n/g,"\n")).split("\n");return n.sort(function(t,n){var r=t.split("."),e=n.split(".");return 256*parseInt(r[0],10)*256*256+256*parseInt(r[1],10)*256+256*parseInt(r[2],10)+parseInt(r[3],10)-(256*parseInt(e[0],10)*256*256+256*parseInt(e[1],10)*256+256*parseInt(e[2],10)+parseInt(e[3],10))}),n.join("\n")}),mkTool("word-wrap",function(t){var n=$("#word-wrap-length").val();return wordwrap(n)(t)}),mkTool("word-split",function(t){return t.split(/\s+/g).join("\n")}),mkTool("word-count",function(t){return t.match(/\S+/g).length}),mkTool("line-count",function(t){return t.split("\n").length}),mkTool("paragraph-count",function(t){for(var n=t.split(/\n\n+/g),r=0,e=0;e<n.length;e++)0!=n[e].length&&r++;return r}),mkTool("text-from-regex",function(t){for(var n=parseInt($("#text-from-regex-how-many").val(),10),r=$("#text-from-regex-regex").val(),e="",o=1;o<=n;o++){e+=new RandExp(r).gen(),e+="\n"}return e},{allowEmptyText:!0,exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("regex-replace",function(t){var n=$("#regex-replace-regex").val(),r=n.match(/^\/(.*?)\/([gimuy]*)$/);if(r)var e=new RegExp(r[1],r[2]);else e=new RegExp(n);var o=$("#regex-replace-to").val();return t=t.replace(e,o)},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("regex-extract-matches",function(t){var n=$("#regex-extract-matches-regex").val(),r=n.match(/^\/(.*?)\/([gimuy]*)$/);if(r)var e=new RegExp(r[1],r[2]);else e=new RegExp(n);var o=t.match(e),a="";if(o)for(var i=0;i<o.length;i++)a+=o[i],a+="\n";return a},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("extract-emails",function(t){var n=t.match(/[a-z0-9._%+-]+@[a-z0-9-]+\.([a-z0-9]+)/gi),r="";if(n)for(var e=0;e<n.length;e++)r+=n[e],r+="\n";return r}),mkTool("extract-urls",function(t){var n=new RegExp("(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?","gi"),r=t.match(n),e="";if(r)for(var o=0;o<r.length;o++)e+=r[o],e+="\n";return e},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("extract-numbers",function(t){var n=t.match(/-?[0-9](\.[0-9]+)?/gi),r="";if(n)for(var e=0;e<n.length;e++)r+=n[e],r+="\n";return r},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("text-info",function(t){for(var n=t.length,r=t.match(/\S+/g).length,e=t.split("\n").length,o=t.split(/\n\n+/g),a=0,i=0;i<o.length;i++)0!=o[i].length&&a++;var l=t.split(/[.?!]+/),s=0;for(i=0;i<l.length;i++)/\w/.test(l[i])&&s++;var c={},p={},u=0,m=0,f=0,h=t.split("");for(i=0;i<h.length;i++){var g=h[i];void 0===c[g]?c[g]=1:c[g]++;var v=g.charCodeAt(0);v>=0&&v<=127?u++:v>127&&v<=255?m++:f++}var d=t.split(/\s+/g);for(i=0;i<d.length;i++){var w=d[i].toLowerCase();(w=w.replace(/[,.?!]+/,"")).length&&(void 0===p[w]?p[w]=1:p[w]++)}var $="Text statistics:\nLength:      "+n+"\nWords:       "+r+"\nSentences:   "+s+"\nLines:       "+e+"\nParagraphs:  "+a+"\n\nAscii Characters (0-127):            "+u+"\nExtended Ascii Characters (127-255): "+m+"\nAll Ascii Characters (0-255):        "+(m+u)+"\nUnicode Characters (255+):           "+f+"\n\nWord statistics:\n",x=Object.keys(p).sort(function(t,n){return p[n]-p[t]});for(i=0;i<x.length;i++){$+=(T=x[i])+": "+p[T]+"\n"}$+="\nCharacter statistics:\n";var y=Object.keys(c).sort(function(t,n){return c[n]-c[t]});for(i=0;i<y.length;i++){var T,k=T=y[i];"10"==T.charCodeAt(0)?k="â†µ":"32"==T.charCodeAt(0)&&(k="âŽµ"),$+=k+": "+c[T]+"\n"}return $}),mkTool("random-pick",function(t){for(var n=t.split("\n"),r=parseInt($("#random-pick-how-many").val(),10),e=[],o=0;o<r;o++){var a=parseInt(Math.random()*n.length,10);e.push(n[a]),n.splice(a,1)}return e.join("\n")}),$("#random-string-format").change(function(){"custom"==$("#random-string-format").val()?$("#random-string-custom-format").slideDown():$("#random-string-custom-format").slideUp()}),mkTool("random-string",function(){var t=$("#random-string-length").val(),n=$("#random-string-format").val(),r="abcdefghijklmnopqrstuvwxyz",e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",a="abcdefghijklmnopqrstuvwxyz0123456789",i="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",s="0123456789";if("custom"==n){var c=$("#random-string-custom-format input").val();if(0==c.length)return""}for(var p="",u=0;u<t;u++){if("alphalc"==n)p+=r.charAt(Math.random()*r.length);else if("alphauc"==n){p+=e.charAt(Math.random()*e.length)}else if("alphamix"==n){p+=o.charAt(Math.random()*o.length)}else if("alphalcnum"==n){p+=a.charAt(Math.random()*a.length)}else if("alphaucnum"==n){p+=i.charAt(Math.random()*i.length)}else if("alphamixnum"==n){p+=l.charAt(Math.random()*l.length)}else if("num"==n){p+=s.charAt(Math.random()*s.length)}else if("custom"==n){p+=c.charAt(Math.random()*c.length)}}return p},{allowEmptyText:!0}),$("#random-password-format").change(function(){"custom"==$("#random-password-format").val()?$("#random-password-custom-format").slideDown():$("#random-password-custom-format").slideUp()}),mkTool("random-password",function(){var t=$("#random-password-length").val(),n=$("#random-password-format").val(),r="abcdefghijklmnopqrstuvwxyz",e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",a="abcdefghijklmnopqrstuvwxyz0123456789",i="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",s="0123456789";if("custom"==n){var c=$("#random-password-custom-format input").val();if(0==c.length)return""}for(var p="",u=0;u<t;u++){if("alphalc"==n)p+=r.charAt(Math.random()*r.length);else if("alphauc"==n){p+=e.charAt(Math.random()*e.length)}else if("alphamix"==n){p+=o.charAt(Math.random()*o.length)}else if("alphalcnum"==n){p+=a.charAt(Math.random()*a.length)}else if("alphaucnum"==n){p+=i.charAt(Math.random()*i.length)}else if("alphamixnum"==n){p+=l.charAt(Math.random()*l.length)}else if("num"==n){p+=s.charAt(Math.random()*s.length)}else if("custom"==n){p+=c.charAt(Math.random()*c.length)}}return p},{allowEmptyText:!0}),mkTool("random-number",function(){for(var t=parseInt($("#random-number-start").val(),10),n=parseInt($("#random-number-end").val(),10),r=parseInt($("#random-number-how-many").val(),10),e="",o=0;o<r;o++)e+=parseInt(Math.random()*(n-t+1)+t,10).toString(),o!=r-1&&(e+="\n");return e},{allowEmptyText:!0}),mkTool("random-bin",function(){for(var t=parseInt($("#random-bin-how-many-digits").val(),10),n=parseInt($("#random-bin-how-many-results").val(),10),r="",e=0;e<n;e++){for(var o="",a=0;a<t;a++){o+=parseInt(2*Math.random(),10)}r+=o,r+="\n"}return r},{allowEmptyText:!0}),mkTool("random-oct",function(){for(var t=parseInt($("#random-oct-how-many-digits").val(),10),n=parseInt($("#random-oct-how-many-results").val(),10),r="",e=0;e<n;e++){for(var o="",a=0;a<t;a++){o+=parseInt(8*Math.random(),10)}r+=o,r+="\n"}return r},{allowEmptyText:!0}),mkTool("random-dec",function(){for(var t=parseInt($("#random-dec-how-many-digits").val(),10),n=parseInt($("#random-dec-how-many-results").val(),10),r="",e=0;e<n;e++){for(var o="",a=0;a<t;a++){o+=parseInt(10*Math.random(),10)}r+=o,r+="\n"}return r},{allowEmptyText:!0}),mkTool("random-hex",function(){for(var t=parseInt($("#random-hex-how-many-digits").val(),10),n=parseInt($("#random-hex-how-many-results").val(),10),r="",e=0;e<n;e++){for(var o="",a=0;a<t;a++){o+=parseInt(16*Math.random(),10).toString(16)}r+=o,r+="\n"}return r},{allowEmptyText:!0}),mkTool("random-fractions",function(){for(var t=parseInt($("#random-fractions-start").val(),10),n=parseInt($("#random-fractions-end").val(),10),r=parseInt($("#random-fractions-how-many").val(),10),e=parseInt($("#random-fractions-precision").val(),10),o="",a=0;a<r;a++)o+=(Math.random()*(n-t)+t).toFixed(e).toString(),a!=r-1&&(o+="\n");return o},{allowEmptyText:!0}),$("#random-ip-range").click(function(t){t.preventDefault(),$("#random-ip-range-field").slideToggle()}),mkTool("random-ip",function(){var t=parseInt($("#random-ip-how-many").val(),10),n=$('#random-ip-range-field input[name="start"]').val(),r=$('#random-ip-range-field input[name="end"]').val();function e(t,n){return parseInt(parseInt(t,10)+Math.random()*(parseInt(n,10)-parseInt(t,10)+1),10).toString()}for(var o="",a=0;a<t;a++){o+=e(n.split(".")[0],r.split(".")[0])+"."+e(n.split(".")[1],r.split(".")[1])+"."+e(n.split(".")[2],r.split(".")[2])+"."+e(n.split(".")[3],r.split(".")[3]),a!=t-1&&(o+="\n")}return o},{allowEmptyText:!0}),$("#random-mac-range").click(function(t){t.preventDefault(),$("#random-mac-range-field").slideToggle()}),mkTool("random-mac",function(){var t=parseInt($("#random-mac-how-many").val(),10),n=$('#random-mac-range-field input[name="start"]').val(),r=$('#random-mac-range-field input[name="end"]').val();function e(t,n){return parseInt(parseInt(t,16)+Math.random()*(parseInt(n,16)-parseInt(t,16)),16)}for(var o="",a=0;a<t;a++){var i=e(n.split(":")[0],r.split(":")[0]).toString(16);1==(i=parseInt(i,10).toString(16)).length&&(i="0"+i);var l=e(n.split(":")[1],r.split(":")[1]).toString(16);1==(l=parseInt(l,10).toString(16)).length&&(l="0"+l);var s=e(n.split(":")[2],r.split(":")[2]).toString(16);1==(s=parseInt(s,10).toString(16)).length&&(s="0"+s);var c=e(n.split(":")[3],r.split(":")[3]).toString(16);1==(c=parseInt(c,10).toString(16)).length&&(c="0"+c);var p=e(n.split(":")[4],r.split(":")[4]).toString(16);1==(p=parseInt(p,10).toString(16)).length&&(p="0"+p);var u=e(n.split(":")[5],r.split(":")[5]).toString(16);1==(u=parseInt(u,10).toString(16)).length&&(u="0"+u),o+=i+":"+l+":"+s+":"+c+":"+p+":"+u,a!=t-1&&(o+="\n")}return o},{allowEmptyText:!0}),$("#random-date-format").change(function(){"custom"==$("#random-date-format").val()?$("#random-date-custom-format").slideDown():$("#random-date-custom-format").slideUp()}),$("#random-date-range").click(function(t){t.preventDefault(),$("#random-date-range-field").slideToggle()}),mkTool("random-date",function(){var t=parseInt($("#random-date-how-many").val(),10),n=$("#random-date-format").val(),r=$('#random-date-range-field input[name="start"]').val(),e=$('#random-date-range-field input[name="end"]').val(),o=new Date(r).getTime(),a=new Date(e).getTime();if(isNaN(o))o=new Date(1900,0,1).getTime();if(isNaN(a))a=new Date(2099,0,31).getTime();for(var i="",l=0;l<t;l++){var s=new Date(o+Math.random()*(a-o+1e3)),c=s.getFullYear(),p=s.getFullYear().toString().substr(2,2),u=["January","February","March","April","May","June","July","August","September","October","November","December"][s.getMonth()],m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][s.getMonth()],f=s.getMonth()+1;f<10&&(f="0"+f.toString());var h=s.getDate(),g=s.getDate();g<10&&(g="0"+g.toString());var v=s.getHours(),d=s.getHours();d<10&&(d="0"+d.toString());var w=s.getMinutes(),x=s.getMinutes();x<10&&(x="0"+x.toString());var y=s.getSeconds(),T=s.getSeconds();if(T<10&&(T="0"+T.toString()),"yyyy-mm-dd-hh-mm-ss"==n)i+=[c,f,g].join("-")+" "+[d,x,T].join(":");else if("yyyy-dd-mm-hh-mm-ss"==n)i+=[c,g,f].join("-")+" "+[d,x,T].join(":");else if("mm-dd-yyyy-hh-mm-ss"==n)i+=[f,g,c].join("-")+" "+[d,x,T].join(":");else if("iso8601"==n){var k=s.toISOString();i+=k=k.replace(/\.\d+Z/,"Z")}else if("year-month-date-hh-mm-ss"==n)i+=[c,u,g].join(" ")+" "+[d,x,T].join(":");else if("year-date-month-hh-mm-ss"==n)i+=[c,u,g].join(" ")+" "+[d,x,T].join(":");else if("month-date-year-hh-mm-ss"==n)i+=[u,g,c].join(" ")+" "+[d,x,T].join(":");else if("custom"==n){var b=$("#random-date-custom-format input").val();i+=b=(b=(b=(b=(b=(b=(b=(b=(b=(b=(b=(b=(b=b.replace("YYYY",c)).replace("YY",p)).replace("MM",f)).replace("month",u)).replace("mon",m)).replace("DD",g)).replace("d",h)).replace("hh",d)).replace("h",v)).replace("mm",x)).replace("m",w)).replace("ss",T)).replace("s",y)}l!=t-1&&(i+="\n")}return i},{allowEmptyText:!0}),$("#random-time-format").change(function(){"custom"==$("#random-time-format").val()?$("#random-time-custom-format").slideDown():$("#random-time-custom-format").slideUp()}),$("#random-time-range").click(function(t){t.preventDefault(),$("#random-time-range-field").slideToggle()}),mkTool("random-time",function(){var t=parseInt($("#random-time-how-many").val(),10),n=$("#random-time-format").val(),r=$('#random-time-range-field input[name="start"]').val(),e=$('#random-time-range-field input[name="end"]').val();if(!/\d+:\d+:\d+/.test(r))throw new Error("Invalid start time, doesn't match h:m:s");if(!/\d+:\d+:\d+/.test(e))throw new Error("Invalid end time, doesn't match h:m:s");var o=parseInt(r.split(":")[0],10),a=parseInt(r.split(":")[1],10),i=parseInt(r.split(":")[2],10),l=parseInt(e.split(":")[0],10),s=parseInt(e.split(":")[1],10),c=parseInt(e.split(":")[2],10);if(isNaN(o))throw new Error("Start time hour isn't a valid number");if(isNaN(a))throw new Error("Start time minute isn't a valid number");if(isNaN(i))throw new Error("Start time second isn't a valid number");if(isNaN(l))throw new Error("End time hour isn't a valid number");if(isNaN(s))throw new Error("End time minute isn't a valid number");if(isNaN(c))throw new Error("End time second isn't a valid number");if(o>24)throw new Error("Start time hour bigger than 24");if(a>60)throw new Error("Start time minute bigger than 60");if(i>60)throw new Error("Start time second bigger than 60");if(l>24)throw new Error("End time hour bigger than 24");if(s>60)throw new Error("End time minute bigger than 60");if(c>60)throw new Error("End time second bigger than 60");var p=3600*o+60*a+i,u=3600*l+60*s+c;if(p>u)throw new Error("Start time is bigger than end time");for(var m,f,h="",g=0;g<t;g++){var v=(m=p,f=u,parseInt(Math.random()*(f-m+1)+m,10).toString()),d=parseInt(v/3600,10),w=d;1==w.toString().length&&(w="0"+w);var x=parseInt(v%3600/60,10),y=x;1==y.toString().length&&(y="0"+y);var T=parseInt(v%60,10),k=T;1==k.toString().length&&(k="0"+k);var b="am";if(d>=12&&(d-=12,b="pm"),"hh-mm-ss"==n)h+=w+":"+y+":"+k;else if("h-m-s"==n)h+=d+":"+x+":"+T;else if("h-m-s-am-pm"==n)h+=d+":"+x+":"+T+" "+b;else if("custom"==n){var S=$("#random-time-custom-format input").val();h+=S=(S=(S=(S=(S=(S=(S=S.replace("hh",w)).replace("h",d)).replace("mm",y)).replace("m",x)).replace("ss",k)).replace("s",T)).replace("ampm",b)}h+="\n"}return h},{allowEmptyText:!0,exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("prime-numbers",function(){for(var t=parseInt($("#prime-numbers-how-many").val(),10),n=[],r=parseInt($("#prime-numbers-start").val(),10);;r++){isPrime=!0,upTo=Math.floor(Math.sqrt(r));for(var e=2;e<=upTo;e++)if(r%e==0){isPrime=!1;break}if(isPrime&&(n.push(r),n.length>=t))break}return n.join("\n")},{allowEmptyText:!0}),mkTool("fibonacci-numbers",function(){var t=parseInt($("#fibonacci-numbers-how-many").val(),10),n=parseInt($("#fibonacci-numbers-start").val(),10),r=[],e=1,o=1,a=1;for(t>1&&1==n&&r.push(e),t>2&&1==n&&r.push(o);!(r.length>=t);)a=e+o,e=o,a>=n&&r.push(a),o=a;return r.join("\n")},{allowEmptyText:!0}),mkTool("pi-digits",function(){var t=parseInt($("#pi-digits-how-many").val(),10);if(0==t)return"3";Decimal.config({precision:t+2});for(var n=new Decimal(0),r=new Decimal(1),e=new Decimal(2),o=new Decimal(4),a=r,i=n,l=t+2,s=n,c=n;c.lte(l);c=c.plus(r)){var p=o.div(s.plus(1)).minus(e.div(s.plus(4))).minus(r.div(s.plus(5))).minus(r.div(s.plus(6)));i=i.plus(a.times(p)),a=a.div(16),s=s.plus(8)}return i.toString().substr(0,i.toString().length-1)},{allowEmptyText:!0}),mkTool("e-digits",function(){var t=parseInt($("#e-digits-how-many").val(),10);if(0==t)return"2";function n(t){if(0==t)return new Decimal(1);for(var n=new Decimal(1),r=new Decimal(1);r.lte(t);r=r.plus(new Decimal(1)))n=n.mul(r);return n}Decimal.config({precision:t+100});for(var r=new Decimal(1),e=t+100,o=new Decimal(1);o.lte(e);o=o.plus(new Decimal(1))){var a=new Decimal(1);a=a.div(n(o.toFixed())),r=r.plus(a)}return r.toString().substr(0,t+2)},{allowEmptyText:!0}),mkTool("miles-to-km",function(t){for(var n=t.split("\n"),r="",e=0;e<n.length;e++){var o=n[e],a=parseFloat(o);if(NaN==a)r+=o+"\n";else r+=(1.609344*a).toFixed(4)+"\n"}return r}),mkTool("km-to-miles",function(t){for(var n=t.split("\n"),r="",e=0;e<n.length;e++){var o=n[e],a=parseFloat(o);if(NaN==a)r+=o+"\n";else r+=(a/1.609344).toFixed(4)+"\n"}return r}),mkTool("c-to-f",function(t){for(var n=t.split("\n"),r="",e=0;e<n.length;e++){var o=n[e],a=parseFloat(o);if(NaN==a)r+=o+"\n";else r+=(1.8*a+32).toFixed(4)+"\n"}return r}),mkTool("f-to-c",function(t){for(var n=t.split("\n"),r="",e=0;e<n.length;e++){var o=n[e],a=parseFloat(o);if(NaN==a)r+=o+"\n";else r+=((a-32)/1.8).toFixed(4)+"\n"}return r}),mkTool("deg-to-rad",function(t){for(var n=t.split("\n"),r="",e=0;e<n.length;e++){var o=n[e],a=parseFloat(o);if(NaN==a)r+=o+"\n";else r+=(a*Math.PI/180).toFixed(4)+"\n"}return r}),mkTool("rad-to-deg",function(t){for(var n=t.split("\n"),r="",e=0;e<n.length;e++){var o=n[e],a=parseFloat(o);if(NaN==a)r+=o+"\n";else r+=(180*a/Math.PI).toFixed(4)+"\n"}return r}),mkTool("kg-to-lbs",function(t){for(var n=t.split("\n"),r="",e=0;e<n.length;e++){var o=n[e],a=parseFloat(o);if(NaN==a)r+=o+"\n";else r+=(2.2046226218*a).toFixed(4)+"\n"}return r}),mkTool("lbs-to-kg",function(t){for(var n=t.split("\n"),r="",e=0;e<n.length;e++){var o=n[e],a=parseFloat(o);if(NaN==a)a+=o+"\n";else r+=(a/2.2046226218).toFixed(4)+"\n"}return r}),mkTool("hex-to-rgb",function(t){$("#action-error").hide();for(var n=t.split("\n"),r="",e=0;e<n.length;e++){var o=n[e];if(0!=o.length){if(3==(o=(o=o.replace(/\s+/g,"")).replace(/^#/,"")).length)var a=o[0].toString()+o[0].toString(),i=o[1].toString()+o[1].toString(),l=o[2].toString()+o[2].toString();else{if(6!=o.length)return $("#action-error").show(),$("#action-error").text("Invalid Hex value. Should be #RRGGBB or #RGB"),t;a=o[0].toString()+o[1].toString(),i=o[2].toString()+o[3].toString(),l=o[4].toString()+o[5].toString()}var s=parseInt(a,16),c=parseInt(i,16),p=parseInt(l,16);if(isNaN(s))return $("#action-error").show(),$("#action-error").text("Invalid RED value"),t;if(isNaN(c))return $("#action-error").show(),$("#action-error").text("Invalid GREEN value"),t;if(isNaN(p))return $("#action-error").show(),$("#action-error").text("Invalid BLUE value"),t;r+=n[e]+" rgb("+s+", "+c+", "+p+")\n"}else r+="\n"}return r}),mkTool("rgb-to-hex",function(t){$("#action-error").hide();for(var n=t.split("\n"),r="",e=0;e<n.length;e++){var o=n[e];if(0!=o.length){var a=(o=(o=o.replace(/,/g," ")).replace(/\./g," ")).match(/(\d+)\s+(\d+)\s+(\d+)/);if(!a)return $("#action-error").show(),$("#action-error").text("Invalid color on line "+(e+1)),t;var i=parseInt(a[1],10),l=parseInt(a[2],10),s=parseInt(a[3],10),c=i.toString(16);1==c.length&&(c="0"+c);var p=l.toString(16);1==p.length&&(p="0"+p);var u=s.toString(16);1==u.length&&(u="0"+u),r+=n[e]+" #"+c+p+u+"\n"}else r+="\n"}return r}),t("jpg-to-png",{inputMime:"image/jpeg",inputHumanFormat:"JPEG"},{outputMime:"image/png",outputExt:"png"}),t("png-to-jpg",{inputMime:"image/png",inputHumanFormat:"PNG"},{outputMime:"image/jpeg",outputExt:"jpg"}),t("gif-to-png",{inputMime:"image/gif",inputHumanFormat:"GIF"},{outputMime:"image/png",outputExt:"png"}),t("gif-to-jpg",{inputMime:"image/gif",inputHumanFormat:"GIF"},{outputMime:"image/jpeg",outputExt:"jpg"}),t("bmp-to-png",{inputMime:"image/bmp",inputHumanFormat:"BMP"},{outputMime:"image/png",outputExt:"png"}),t("bmp-to-jpg",{inputMime:"image/bmp",inputHumanFormat:"BMP"},{outputMime:"image/jpeg",outputExt:"jpg"}),$("#tool-image-to-base64").length){var e="#file-select",o="#submit";$(e).on("change",function(t){$("#action-error").hide();var n=t.target.files[0];a=n,$(o).attr("disabled",!1)}),$("#drag-and-drop").on("dragover",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").addClass("hover")}),$("#drag-and-drop").on("dragenter",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").addClass("hover")}),$("#drag-and-drop").on("dragleave",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").removeClass("hover")}),$("#drag-and-drop").on("dragend",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").removeClass("hover")}),$("#drag-and-drop").on("drop",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").removeClass("hover"),$("#action-error").hide(),t.dataTransfer=t.originalEvent.dataTransfer;var n=t.dataTransfer.files[0];$("#drag-and-drop-selected").text("Selected "+n.name),a=n,$(o).attr("disabled",!1)}),$(o).click(function(){var t=new FileReader;t.onload=function(){var n=t.result.indexOf(","),r=t.result.substr(n+1);$("#image-to-base64-output textarea").val(r),$("#image-to-base64-output").slideDown()},t.readAsDataURL(a)})}if($("#tool-file-to-base64").length){var a;e="#file-select",o="#submit";$(e).on("change",function(t){$("#action-error").hide();var n=t.target.files[0];a=n,$(o).attr("disabled",!1)}),$("#drag-and-drop").on("dragover",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").addClass("hover")}),$("#drag-and-drop").on("dragenter",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").addClass("hover")}),$("#drag-and-drop").on("dragleave",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").removeClass("hover")}),$("#drag-and-drop").on("dragend",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").removeClass("hover")}),$("#drag-and-drop").on("drop",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").removeClass("hover"),$("#action-error").hide(),t.dataTransfer=t.originalEvent.dataTransfer;var n=t.dataTransfer.files[0];$("#drag-and-drop-selected").text("Selected "+n.name),a=n,$(o).attr("disabled",!1)}),$(o).click(function(){var t=new FileReader;t.onload=function(){var n=t.result.indexOf(","),r=t.result.substr(n+1);$("#file-to-base64-output textarea").val(r),$("#file-to-base64-output").slideDown()},t.readAsDataURL(a)})}});
!function(n,e){"use strict";function t(n){for(var e=Object.create(null),t=0;t<n.length;++t)e[n[t]]=!0;return e}function r(n){return n.split("")}function i(n,e){for(var t=e.length;--t>=0;)if(e[t]==n)return!0;return!1}function o(n,e){for(var t=0,r=e.length;t<r;++t)if(n(e[t]))return e[t]}function a(n,e){Error.call(this,n),this.msg=n,this.defs=e}function u(n,e,t){!0===n&&(n={});var r=n||{};if(t)for(var i in r)r.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&a.croak("`"+i+"` is not a supported option",e);for(var i in e)e.hasOwnProperty(i)&&(r[i]=n&&n.hasOwnProperty(i)?n[i]:e[i]);return r}function s(n,e){var t=0;for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r],t++);return t}function c(){}a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a.croak=function(n,e){throw new a(n,e)};var f=function(){function n(n,o,a){var u,s=[],c=[];function f(){var f=o(n[u],u),l=f instanceof i;return l&&(f=f.v),f instanceof t?(f=f.v)instanceof r?c.push.apply(c,a?f.v.slice().reverse():f.v):c.push(f):f!==e&&(f instanceof r?s.push.apply(s,a?f.v.slice().reverse():f.v):s.push(f)),l}if(n instanceof Array)if(a){for(u=n.length;--u>=0&&!f(););s.reverse(),c.reverse()}else for(u=0;u<n.length&&!f();++u);else for(u in n)if(n.hasOwnProperty(u)&&f())break;return c.concat(s)}n.at_top=function(n){return new t(n)},n.splice=function(n){return new r(n)},n.last=function(n){return new i(n)};var e=n.skip={};function t(n){this.v=n}function r(n){this.v=n}function i(n){this.v=n}return n}();function l(n,e){n.indexOf(e)<0&&n.push(e)}function p(n,e){return n.replace(/\{(.+?)\}/g,function(n,t){return e[t]})}function d(n,e){for(var t=n.length;--t>=0;)n[t]===e&&n.splice(t,1)}function h(n,e){if(n.length<2)return n.slice();return function n(t){if(t.length<=1)return t;var r=Math.floor(t.length/2),i=t.slice(0,r),o=t.slice(r);return function(n,t){for(var r=[],i=0,o=0,a=0;i<n.length&&o<t.length;)e(n[i],t[o])<=0?r[a++]=n[i++]:r[a++]=t[o++];return i<n.length&&r.push.apply(r,n.slice(i)),o<t.length&&r.push.apply(r,t.slice(o)),r}(i=n(i),o=n(o))}(n)}function m(n){n instanceof Array||(n=n.split(" "));var e="",t=[];n:for(var r=0;r<n.length;++r){for(var i=0;i<t.length;++i)if(t[i][0].length==n[r].length){t[i].push(n[r]);continue n}t.push([n[r]])}function o(n){if(1==n.length)return e+="return str === "+JSON.stringify(n[0])+";";e+="switch(str){";for(var t=0;t<n.length;++t)e+="case "+JSON.stringify(n[t])+":";e+="return true}return false;"}if(t.length>3){t.sort(function(n,e){return e.length-n.length}),e+="switch(str.length){";for(r=0;r<t.length;++r){var a=t[r];e+="case "+a[0].length+":",o(a)}e+="}"}else o(n);return new Function("str",e)}function v(){this._values=Object.create(null),this._size=0}function _(e,t,r,i){arguments.length<4&&(i=b);var o=t=t?t.split(/\s+/):[];i&&i.PROPS&&(t=t.concat(i.PROPS));for(var a="return function AST_"+e+"(props){ if (props) { ",u=t.length;--u>=0;)a+="this."+t[u]+" = props."+t[u]+";";var s=i&&new i;(s&&s.initialize||r&&r.initialize)&&(a+="this.initialize();"),a+="}}";var c=new Function(a)();if(s&&(c.prototype=s,c.BASE=i),i&&i.SUBCLASSES.push(c),c.prototype.CTOR=c,c.PROPS=t||null,c.SELF_PROPS=o,c.SUBCLASSES=[],e&&(c.prototype.TYPE=c.TYPE=e),r)for(u in r)r.hasOwnProperty(u)&&(/^\$/.test(u)?c[u.substr(1)]=r[u]:c.prototype[u]=r[u]);return c.DEFMETHOD=function(n,e){this.prototype[n]=e},n["AST_"+e]=c,c}v.prototype={set:function(n,e){return this.has(n)||++this._size,this._values["$"+n]=e,this},add:function(n,e){return this.has(n)?this.get(n).push(e):this.set(n,[e]),this},get:function(n){return this._values["$"+n]},del:function(n){return this.has(n)&&(--this._size,delete this._values["$"+n]),this},has:function(n){return"$"+n in this._values},each:function(n){for(var e in this._values)n(this._values[e],e.substr(1))},size:function(){return this._size},map:function(n){var e=[];for(var t in this._values)e.push(n(this._values[t],t.substr(1)));return e},toObject:function(){return this._values}},v.fromObject=function(n){var e=new v;return e._size=s(e._values,n),e};var g=_("Token","type value line col pos endline endcol endpos nlb comments_before file raw",{},null),b=_("Node","start end",{clone:function(){return new this.CTOR(this)},$documentation:"Base class of all AST nodes",$propdoc:{start:"[AST_Token] The first token of this node",end:"[AST_Token] The last token of this node"},_walk:function(n){return n._visit(this)},walk:function(n){return this._walk(n)}},null);b.warn_function=null,b.warn=function(n,e){b.warn_function&&b.warn_function(p(n,e))};var y=_("Statement",null,{$documentation:"Base class of all statements"}),A=_("Debugger",null,{$documentation:"Represents a debugger statement"},y),w=_("Directive","value scope quote",{$documentation:'Represents a directive, like "use strict";',$propdoc:{value:"[string] The value of this directive as a plain string (it's not an AST_String!)",scope:"[AST_Scope/S] The scope that this directive affects",quote:"[string] the original quote character"}},y),E=_("SimpleStatement","body",{$documentation:"A statement consisting of an expression, i.e. a = 1 + 2",$propdoc:{body:"[AST_Node] an expression node (should not be instanceof AST_Statement)"},_walk:function(n){return n._visit(this,function(){this.body._walk(n)})}},y);function D(n,e){n.body instanceof y?n.body._walk(e):n.body.forEach(function(n){n._walk(e)})}var F=_("Block","body",{$documentation:"A body of statements (usually bracketed)",$propdoc:{body:"[AST_Statement*] an array of statements"},_walk:function(n){return n._visit(this,function(){D(this,n)})}},y),C=_("BlockStatement",null,{$documentation:"A block statement"},F),k=_("EmptyStatement",null,{$documentation:"The empty statement (empty block or simply a semicolon)",_walk:function(n){return n._visit(this)}},y),x=_("StatementWithBody","body",{$documentation:"Base class for all statements that contain one nested body: `For`, `ForIn`, `Do`, `While`, `With`",$propdoc:{body:"[AST_Statement] the body; this should always be present, even if it's an AST_EmptyStatement"},_walk:function(n){return n._visit(this,function(){this.body._walk(n)})}},y),B=_("LabeledStatement","label",{$documentation:"Statement with a label",$propdoc:{label:"[AST_Label] a label definition"},_walk:function(n){return n._visit(this,function(){this.label._walk(n),this.body._walk(n)})}},x),S=_("IterationStatement",null,{$documentation:"Internal class.  All loops inherit from it."},x),T=_("DWLoop","condition",{$documentation:"Base class for do/while statements",$propdoc:{condition:"[AST_Node] the loop condition.  Should not be instanceof AST_Statement"}},S),$=_("Do",null,{$documentation:"A `do` statement",_walk:function(n){return n._visit(this,function(){this.body._walk(n),this.condition._walk(n)})}},T),O=_("While",null,{$documentation:"A `while` statement",_walk:function(n){return n._visit(this,function(){this.condition._walk(n),this.body._walk(n)})}},T),q=_("For","init condition step",{$documentation:"A `for` statement",$propdoc:{init:"[AST_Node?] the `for` initialization code, or null if empty",condition:"[AST_Node?] the `for` termination clause, or null if empty",step:"[AST_Node?] the `for` update clause, or null if empty"},_walk:function(n){return n._visit(this,function(){this.init&&this.init._walk(n),this.condition&&this.condition._walk(n),this.step&&this.step._walk(n),this.body._walk(n)})}},S),M=_("ForIn","init name object",{$documentation:"A `for ... in` statement",$propdoc:{init:"[AST_Node] the `for/in` initialization code",name:"[AST_SymbolRef?] the loop variable, only if `init` is AST_Var",object:"[AST_Node] the object that we're looping through"},_walk:function(n){return n._visit(this,function(){this.init._walk(n),this.object._walk(n),this.body._walk(n)})}},S),z=_("With","expression",{$documentation:"A `with` statement",$propdoc:{expression:"[AST_Node] the `with` expression"},_walk:function(n){return n._visit(this,function(){this.expression._walk(n),this.body._walk(n)})}},x),H=_("Scope","directives variables functions uses_with uses_eval parent_scope enclosed cname",{$documentation:"Base class for all statements introducing a lexical scope",$propdoc:{directives:"[string*/S] an array of directives declared in this scope",variables:"[Object/S] a map of name -> SymbolDef for all variables/functions defined in this scope",functions:"[Object/S] like `variables`, but only lists function declarations",uses_with:"[boolean/S] tells whether this scope uses the `with` statement",uses_eval:"[boolean/S] tells whether this scope contains a direct call to the global `eval`",parent_scope:"[AST_Scope?/S] link to the parent scope",enclosed:"[SymbolDef*/S] a list of all symbol definitions that are accessed from this scope or any subscopes",cname:"[integer/S] current index for mangling variables (used internally by the mangler)"}},F),N=_("Toplevel","globals",{$documentation:"The toplevel scope",$propdoc:{globals:"[Object/S] a map of name -> SymbolDef for all undeclared names"},wrap_enclose:function(n){var e=this,t=[],r=[];n.forEach(function(n){var e=n.lastIndexOf(":");t.push(n.substr(0,e)),r.push(n.substr(e+1))});var i="(function("+r.join(",")+"){ '$ORIG'; })("+t.join(",")+")";return i=(i=xe(i)).transform(new Be(function(n){if(n instanceof w&&"$ORIG"==n.value)return f.splice(e.body)}))},wrap_commonjs:function(n,e){var t=this,r=[];e&&(t.figure_out_scope(),t.walk(new Qn(function(n){n instanceof Bn&&n.definition().global&&(o(function(e){return e.name==n.name},r)||r.push(n))})));var i="(function(exports, global){ '$ORIG'; '$EXPORTS'; global['"+n+"'] = exports; }({}, (function(){return this}())))";return i=(i=xe(i)).transform(new Be(function(n){if(n instanceof w)switch(n.value){case"$ORIG":return f.splice(t.body);case"$EXPORTS":var e=[];return r.forEach(function(n){e.push(new E({body:new yn({left:new hn({expression:new Hn({name:"exports"}),property:new Rn({value:n.name})}),operator:"=",right:new Hn(n)})}))}),f.splice(e)}}))}},H),j=_("Lambda","name argnames uses_arguments",{$documentation:"Base class for functions",$propdoc:{name:"[AST_SymbolDeclaration?] the name of this function",argnames:"[AST_SymbolFunarg*] array of function arguments",uses_arguments:"[boolean/S] tells whether this function accesses the arguments array"},_walk:function(n){return n._visit(this,function(){this.name&&this.name._walk(n),this.argnames.forEach(function(e){e._walk(n)}),D(this,n)})}},H),P=_("Accessor",null,{$documentation:"A setter/getter function.  The `name` property is always null."},j),R=_("Function",null,{$documentation:"A function expression"},j),I=_("Defun",null,{$documentation:"A function definition"},j),L=_("Jump",null,{$documentation:"Base class for â€œjumpsâ€ (for now that's `return`, `throw`, `break` and `continue`)"},y),U=_("Exit","value",{$documentation:"Base class for â€œexitsâ€ (`return` and `throw`)",$propdoc:{value:"[AST_Node?] the value returned or thrown by this statement; could be null for AST_Return"},_walk:function(n){return n._visit(this,this.value&&function(){this.value._walk(n)})}},L),V=_("Return",null,{$documentation:"A `return` statement"},U),Y=_("Throw",null,{$documentation:"A `throw` statement"},U),W=_("LoopControl","label",{$documentation:"Base class for loop control statements (`break` and `continue`)",$propdoc:{label:"[AST_LabelRef?] the label, or null if none"},_walk:function(n){return n._visit(this,this.label&&function(){this.label._walk(n)})}},L),J=_("Break",null,{$documentation:"A `break` statement"},W),G=_("Continue",null,{$documentation:"A `continue` statement"},W),X=_("If","condition alternative",{$documentation:"A `if` statement",$propdoc:{condition:"[AST_Node] the `if` condition",alternative:"[AST_Statement?] the `else` part, or null if not present"},_walk:function(n){return n._visit(this,function(){this.condition._walk(n),this.body._walk(n),this.alternative&&this.alternative._walk(n)})}},x),Z=_("Switch","expression",{$documentation:"A `switch` statement",$propdoc:{expression:"[AST_Node] the `switch` â€œdiscriminantâ€"},_walk:function(n){return n._visit(this,function(){this.expression._walk(n),D(this,n)})}},F),K=_("SwitchBranch",null,{$documentation:"Base class for `switch` branches"},F),Q=_("Default",null,{$documentation:"A `default` switch branch"},K),nn=_("Case","expression",{$documentation:"A `case` switch branch",$propdoc:{expression:"[AST_Node] the `case` expression"},_walk:function(n){return n._visit(this,function(){this.expression._walk(n),D(this,n)})}},K),en=_("Try","bcatch bfinally",{$documentation:"A `try` statement",$propdoc:{bcatch:"[AST_Catch?] the catch block, or null if not present",bfinally:"[AST_Finally?] the finally block, or null if not present"},_walk:function(n){return n._visit(this,function(){D(this,n),this.bcatch&&this.bcatch._walk(n),this.bfinally&&this.bfinally._walk(n)})}},F),tn=_("Catch","argname",{$documentation:"A `catch` node; only makes sense as part of a `try` statement",$propdoc:{argname:"[AST_SymbolCatch] symbol for the exception"},_walk:function(n){return n._visit(this,function(){this.argname._walk(n),D(this,n)})}},F),rn=_("Finally",null,{$documentation:"A `finally` node; only makes sense as part of a `try` statement"},F),on=_("Definitions","definitions",{$documentation:"Base class for `var` or `const` nodes (variable declarations/initializations)",$propdoc:{definitions:"[AST_VarDef*] array of variable definitions"},_walk:function(n){return n._visit(this,function(){this.definitions.forEach(function(e){e._walk(n)})})}},y),an=_("Var",null,{$documentation:"A `var` statement"},on),un=_("Const",null,{$documentation:"A `const` statement"},on),sn=_("VarDef","name value",{$documentation:"A variable declaration; only appears in a AST_Definitions node",$propdoc:{name:"[AST_SymbolVar|AST_SymbolConst] name of the variable",value:"[AST_Node?] initializer, or null of there's no initializer"},_walk:function(n){return n._visit(this,function(){this.name._walk(n),this.value&&this.value._walk(n)})}}),cn=_("Call","expression args",{$documentation:"A function call expression",$propdoc:{expression:"[AST_Node] expression to invoke as function",args:"[AST_Node*] array of arguments"},_walk:function(n){return n._visit(this,function(){this.expression._walk(n),this.args.forEach(function(e){e._walk(n)})})}}),fn=_("New",null,{$documentation:"An object instantiation.  Derives from a function call since it has exactly the same properties"},cn),ln=_("Seq","car cdr",{$documentation:"A sequence expression (two comma-separated expressions)",$propdoc:{car:"[AST_Node] first element in sequence",cdr:"[AST_Node] second element in sequence"},$cons:function(n,e){var t=new ln(n);return t.car=n,t.cdr=e,t},$from_array:function(n){if(0==n.length)return null;if(1==n.length)return n[0].clone();for(var e=null,t=n.length;--t>=0;)e=ln.cons(n[t],e);for(var r=e;r;){if(r.cdr&&!r.cdr.cdr){r.cdr=r.cdr.car;break}r=r.cdr}return e},to_array:function(){for(var n=this,e=[];n;){if(e.push(n.car),n.cdr&&!(n.cdr instanceof ln)){e.push(n.cdr);break}n=n.cdr}return e},add:function(n){for(var e=this;e;){if(!(e.cdr instanceof ln)){var t=ln.cons(e.cdr,n);return e.cdr=t}e=e.cdr}},_walk:function(n){return n._visit(this,function(){this.car._walk(n),this.cdr&&this.cdr._walk(n)})}}),pn=_("PropAccess","expression property",{$documentation:'Base class for property access expressions, i.e. `a.foo` or `a["foo"]`',$propdoc:{expression:"[AST_Node] the â€œcontainerâ€ expression",property:"[AST_Node|string] the property to access.  For AST_Dot this is always a plain string, while for AST_Sub it's an arbitrary AST_Node"}}),dn=_("Dot",null,{$documentation:"A dotted property access expression",_walk:function(n){return n._visit(this,function(){this.expression._walk(n)})}},pn),hn=_("Sub",null,{$documentation:'Index-style property access, i.e. `a["foo"]`',_walk:function(n){return n._visit(this,function(){this.expression._walk(n),this.property._walk(n)})}},pn),mn=_("Unary","operator expression",{$documentation:"Base class for unary expressions",$propdoc:{operator:"[string] the operator",expression:"[AST_Node] expression that this unary operator applies to"},_walk:function(n){return n._visit(this,function(){this.expression._walk(n)})}}),vn=_("UnaryPrefix",null,{$documentation:"Unary prefix expression, i.e. `typeof i` or `++i`"},mn),_n=_("UnaryPostfix",null,{$documentation:"Unary postfix expression, i.e. `i++`"},mn),gn=_("Binary","left operator right",{$documentation:"Binary expression, i.e. `a + b`",$propdoc:{left:"[AST_Node] left-hand side expression",operator:"[string] the operator",right:"[AST_Node] right-hand side expression"},_walk:function(n){return n._visit(this,function(){this.left._walk(n),this.right._walk(n)})}}),bn=_("Conditional","condition consequent alternative",{$documentation:"Conditional expression using the ternary operator, i.e. `a ? b : c`",$propdoc:{condition:"[AST_Node]",consequent:"[AST_Node]",alternative:"[AST_Node]"},_walk:function(n){return n._visit(this,function(){this.condition._walk(n),this.consequent._walk(n),this.alternative._walk(n)})}}),yn=_("Assign",null,{$documentation:"An assignment expression â€” `a = b + 5`"},gn),An=_("Array","elements",{$documentation:"An array literal",$propdoc:{elements:"[AST_Node*] array of elements"},_walk:function(n){return n._visit(this,function(){this.elements.forEach(function(e){e._walk(n)})})}}),wn=_("Object","properties",{$documentation:"An object literal",$propdoc:{properties:"[AST_ObjectProperty*] array of properties"},_walk:function(n){return n._visit(this,function(){this.properties.forEach(function(e){e._walk(n)})})}}),En=_("ObjectProperty","key value",{$documentation:"Base class for literal object properties",$propdoc:{key:"[string] the property name converted to a string for ObjectKeyVal.  For setters and getters this is an arbitrary AST_Node.",value:"[AST_Node] property value.  For setters and getters this is an AST_Function."},_walk:function(n){return n._visit(this,function(){this.value._walk(n)})}}),Dn=_("ObjectKeyVal","quote",{$documentation:"A key: value object property",$propdoc:{quote:"[string] the original quote character"}},En),Fn=_("ObjectSetter",null,{$documentation:"An object setter property"},En),Cn=_("ObjectGetter",null,{$documentation:"An object getter property"},En),kn=_("Symbol","scope name thedef",{$propdoc:{name:"[string] name of this symbol",scope:"[AST_Scope/S] the current scope (not necessarily the definition scope)",thedef:"[SymbolDef/S] the definition of this symbol"},$documentation:"Base class for all symbols"}),xn=_("SymbolAccessor",null,{$documentation:"The name of a property accessor (setter/getter function)"},kn),Bn=_("SymbolDeclaration","init",{$documentation:"A declaration symbol (symbol in var/const, function name or argument, symbol in catch)",$propdoc:{init:"[AST_Node*/S] array of initializers for this declaration."}},kn),Sn=_("SymbolVar",null,{$documentation:"Symbol defining a variable"},Bn),Tn=_("SymbolConst",null,{$documentation:"A constant declaration"},Bn),$n=_("SymbolFunarg",null,{$documentation:"Symbol naming a function argument"},Sn),On=_("SymbolDefun",null,{$documentation:"Symbol defining a function"},Bn),qn=_("SymbolLambda",null,{$documentation:"Symbol naming a function expression"},Bn),Mn=_("SymbolCatch",null,{$documentation:"Symbol naming the exception in catch"},Bn),zn=_("Label","references",{$documentation:"Symbol naming a label (declaration)",$propdoc:{references:"[AST_LoopControl*] a list of nodes referring to this label"},initialize:function(){this.references=[],this.thedef=this}},kn),Hn=_("SymbolRef",null,{$documentation:"Reference to some symbol (not definition/declaration)"},kn),Nn=_("LabelRef",null,{$documentation:"Reference to a label symbol"},kn),jn=_("This",null,{$documentation:"The `this` symbol"},kn),Pn=_("Constant",null,{$documentation:"Base class for all constants",getValue:function(){return this.value}}),Rn=_("String","value quote",{$documentation:"A string literal",$propdoc:{value:"[string] the contents of this string",quote:"[string] the original quote character"}},Pn),In=_("Number","value literal",{$documentation:"A number literal",$propdoc:{value:"[number] the numeric value",literal:"[string] numeric value as string (optional)"}},Pn),Ln=_("RegExp","value",{$documentation:"A regexp literal",$propdoc:{value:"[RegExp] the actual regexp"}},Pn),Un=_("Atom",null,{$documentation:"Base class for atoms"},Pn),Vn=_("Null",null,{$documentation:"The `null` atom",value:null},Un),Yn=_("NaN",null,{$documentation:"The impossible value",value:NaN},Un),Wn=_("Undefined",null,{$documentation:"The `undefined` value",value:void 0},Un),Jn=_("Hole",null,{$documentation:"A hole in an array",value:void 0},Un),Gn=_("Infinity",null,{$documentation:"The `Infinity` value",value:1/0},Un),Xn=_("Boolean",null,{$documentation:"Base class for booleans"},Un),Zn=_("False",null,{$documentation:"The `false` atom",value:!1},Xn),Kn=_("True",null,{$documentation:"The `true` atom",value:!0},Xn);function Qn(n){this.visit=n,this.stack=[],this.directives=Object.create(null)}Qn.prototype={_visit:function(n,e){this.push(n);var t=this.visit(n,e?function(){e.call(n)}:c);return!t&&e&&e.call(n),this.pop(n),t},parent:function(n){return this.stack[this.stack.length-2-(n||0)]},push:function(n){n instanceof j?this.directives=Object.create(this.directives):n instanceof w&&(this.directives[n.value]=!this.directives[n.value]||"up"),this.stack.push(n)},pop:function(n){this.stack.pop(),n instanceof j&&(this.directives=Object.getPrototypeOf(this.directives))},self:function(){return this.stack[this.stack.length-1]},find_parent:function(n){for(var e=this.stack,t=e.length;--t>=0;){var r=e[t];if(r instanceof n)return r}},has_directive:function(n){var e=this.directives[n];if(e)return e;var t=this.stack[this.stack.length-1];if(t instanceof H)for(var r=0;r<t.body.length;++r){var i=t.body[r];if(!(i instanceof w))break;if(i.value==n)return!0}},in_boolean_context:function(){for(var n=this.stack,e=n.length,t=n[--e];e>0;){var r=n[--e];if(r instanceof X&&r.condition===t||r instanceof bn&&r.condition===t||r instanceof T&&r.condition===t||r instanceof q&&r.condition===t||r instanceof vn&&"!"==r.operator&&r.expression===t)return!0;if(!(r instanceof gn)||"&&"!=r.operator&&"||"!=r.operator)return!1;t=r}},loopcontrol_target:function(n){var e=this.stack;if(n)for(var t=e.length;--t>=0;){if((r=e[t])instanceof B&&r.label.name==n.name)return r.body}else for(t=e.length;--t>=0;){var r;if((r=e[t])instanceof Z||r instanceof S)return r}}};var ne="break case catch const continue debugger default delete do else finally for function if in instanceof new return switch throw try typeof var void while with",ee="false null true",te="abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized this throws transient volatile yield "+ee+" "+ne,re="return new delete throw else case";ne=m(ne),te=m(te),re=m(re),ee=m(ee);var ie=m(r("+-*&%=<>!?|~^")),oe=/^0x[0-9a-f]+$/i,ae=/^0[0-7]+$/,ue=m(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&=","&&","||"]),se=m(r(" Â \n\r\t\f\vâ€‹á Žâ€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€\ufeff")),ce=m(r("[{(,.;:")),fe=m(r("[]{}(),;:")),le=(m(r("gmsiy")),{letter:new RegExp("[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),digit:new RegExp("[\\u0030-\\u0039\\u0660-\\u0669\\u06F0-\\u06F9\\u07C0-\\u07C9\\u0966-\\u096F\\u09E6-\\u09EF\\u0A66-\\u0A6F\\u0AE6-\\u0AEF\\u0B66-\\u0B6F\\u0BE6-\\u0BEF\\u0C66-\\u0C6F\\u0CE6-\\u0CEF\\u0D66-\\u0D6F\\u0DE6-\\u0DEF\\u0E50-\\u0E59\\u0ED0-\\u0ED9\\u0F20-\\u0F29\\u1040-\\u1049\\u1090-\\u1099\\u17E0-\\u17E9\\u1810-\\u1819\\u1946-\\u194F\\u19D0-\\u19D9\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1B50-\\u1B59\\u1BB0-\\u1BB9\\u1C40-\\u1C49\\u1C50-\\u1C59\\uA620-\\uA629\\uA8D0-\\uA8D9\\uA900-\\uA909\\uA9D0-\\uA9D9\\uA9F0-\\uA9F9\\uAA50-\\uAA59\\uABF0-\\uABF9\\uFF10-\\uFF19]"),non_spacing_mark:new RegExp("[\\u0300-\\u036F\\u0483-\\u0487\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065E\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0900-\\u0902\\u093C\\u0941-\\u0948\\u094D\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09BC\\u09C1-\\u09C4\\u09CD\\u09E2\\u09E3\\u0A01\\u0A02\\u0A3C\\u0A41\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81\\u0A82\\u0ABC\\u0AC1-\\u0AC5\\u0AC7\\u0AC8\\u0ACD\\u0AE2\\u0AE3\\u0B01\\u0B3C\\u0B3F\\u0B41-\\u0B44\\u0B4D\\u0B56\\u0B62\\u0B63\\u0B82\\u0BC0\\u0BCD\\u0C3E-\\u0C40\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0CBC\\u0CBF\\u0CC6\\u0CCC\\u0CCD\\u0CE2\\u0CE3\\u0D41-\\u0D44\\u0D4D\\u0D62\\u0D63\\u0DCA\\u0DD2-\\u0DD4\\u0DD6\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F71-\\u0F7E\\u0F80-\\u0F84\\u0F86\\u0F87\\u0F90-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102D-\\u1030\\u1032-\\u1037\\u1039\\u103A\\u103D\\u103E\\u1058\\u1059\\u105E-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108D\\u109D\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B7-\\u17BD\\u17C6\\u17C9-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193B\\u1A17\\u1A18\\u1A56\\u1A58-\\u1A5E\\u1A60\\u1A62\\u1A65-\\u1A6C\\u1A73-\\u1A7C\\u1A7F\\u1B00-\\u1B03\\u1B34\\u1B36-\\u1B3A\\u1B3C\\u1B42\\u1B6B-\\u1B73\\u1B80\\u1B81\\u1BA2-\\u1BA5\\u1BA8\\u1BA9\\u1C2C-\\u1C33\\u1C36\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE0\\u1CE2-\\u1CE8\\u1CED\\u1DC0-\\u1DE6\\u1DFD-\\u1DFF\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2CEF-\\u2CF1\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F\\uA67C\\uA67D\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA825\\uA826\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA951\\uA980-\\uA982\\uA9B3\\uA9B6-\\uA9B9\\uA9BC\\uAA29-\\uAA2E\\uAA31\\uAA32\\uAA35\\uAA36\\uAA43\\uAA4C\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uABE5\\uABE8\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE26]"),space_combining_mark:new RegExp("[\\u0903\\u093E-\\u0940\\u0949-\\u094C\\u094E\\u0982\\u0983\\u09BE-\\u09C0\\u09C7\\u09C8\\u09CB\\u09CC\\u09D7\\u0A03\\u0A3E-\\u0A40\\u0A83\\u0ABE-\\u0AC0\\u0AC9\\u0ACB\\u0ACC\\u0B02\\u0B03\\u0B3E\\u0B40\\u0B47\\u0B48\\u0B4B\\u0B4C\\u0B57\\u0BBE\\u0BBF\\u0BC1\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCC\\u0BD7\\u0C01-\\u0C03\\u0C41-\\u0C44\\u0C82\\u0C83\\u0CBE\\u0CC0-\\u0CC4\\u0CC7\\u0CC8\\u0CCA\\u0CCB\\u0CD5\\u0CD6\\u0D02\\u0D03\\u0D3E-\\u0D40\\u0D46-\\u0D48\\u0D4A-\\u0D4C\\u0D57\\u0D82\\u0D83\\u0DCF-\\u0DD1\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0F3E\\u0F3F\\u0F7F\\u102B\\u102C\\u1031\\u1038\\u103B\\u103C\\u1056\\u1057\\u1062-\\u1064\\u1067-\\u106D\\u1083\\u1084\\u1087-\\u108C\\u108F\\u109A-\\u109C\\u17B6\\u17BE-\\u17C5\\u17C7\\u17C8\\u1923-\\u1926\\u1929-\\u192B\\u1930\\u1931\\u1933-\\u1938\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A19-\\u1A1B\\u1A55\\u1A57\\u1A61\\u1A63\\u1A64\\u1A6D-\\u1A72\\u1B04\\u1B35\\u1B3B\\u1B3D-\\u1B41\\u1B43\\u1B44\\u1B82\\u1BA1\\u1BA6\\u1BA7\\u1BAA\\u1C24-\\u1C2B\\u1C34\\u1C35\\u1CE1\\u1CF2\\uA823\\uA824\\uA827\\uA880\\uA881\\uA8B4-\\uA8C3\\uA952\\uA953\\uA983\\uA9B4\\uA9B5\\uA9BA\\uA9BB\\uA9BD-\\uA9C0\\uAA2F\\uAA30\\uAA33\\uAA34\\uAA4D\\uAA7B\\uABE3\\uABE4\\uABE6\\uABE7\\uABE9\\uABEA\\uABEC]"),connector_punctuation:new RegExp("[\\u005F\\u203F\\u2040\\u2054\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFF3F]")});function pe(n){return n>=97&&n<=122||n>=65&&n<=90||n>=170&&le.letter.test(String.fromCharCode(n))}function de(n){return n>=48&&n<=57}function he(n){return!te(n)&&/^[a-z_$][a-z0-9_$]*$/i.test(n)}function me(n){return 36==n||95==n||pe(n)}function ve(n){var e,t,r,i=n.charCodeAt(0);return me(i)||de(i)||8204==i||8205==i||(r=n,le.non_spacing_mark.test(r)||le.space_combining_mark.test(r))||(t=n,le.connector_punctuation.test(t))||(e=i,le.digit.test(String.fromCharCode(e)))}function _e(n){return/^[a-z_$][a-z0-9_$]*$/i.test(n)}function ge(n,e,t,r,i){this.message=n,this.filename=e,this.line=t,this.col=r,this.pos=i,this.stack=(new Error).stack}function be(n,e,t,r,i){throw new ge(n,e,t,r,i)}function ye(n,e,t){return n.type==e&&(null==t||n.value==t)}ge.prototype.toString=function(){return this.message+" (line: "+this.line+", col: "+this.col+", pos: "+this.pos+")\n\n"+this.stack};var Ae={};function we(n,e,t,r){var i={text:n,filename:e,pos:0,tokpos:0,line:1,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[]};function o(){return i.text.charAt(i.pos)}function a(n,e){var t=i.text.charAt(i.pos++);if(n&&!t)throw Ae;return"\r\n\u2028\u2029".indexOf(t)>=0?(i.newline_before=i.newline_before||!e,++i.line,i.col=0,e||"\r"!=t||"\n"!=o()||(++i.pos,t="\n")):++i.col,t}function u(n){for(;n-- >0;)a()}function s(n){return i.text.substr(i.pos,n.length)==n}function c(n,e){var t=i.text.indexOf(n,i.pos);if(e&&-1==t)throw Ae;return t}var f=!1;function l(t,r,o){i.regex_allowed="operator"==t&&!De(r)||"keyword"==t&&re(r)||"punc"==t&&ce(r),f="punc"==t&&"."==r;var a={type:t,value:r,line:i.tokline,col:i.tokcol,pos:i.tokpos,endline:i.line,endcol:i.col,endpos:i.pos,nlb:i.newline_before,file:e};if(/^(?:num|string|regexp)$/i.test(t)&&(a.raw=n.substring(a.pos,a.endpos)),!o){a.comments_before=i.comments_before,i.comments_before=[];for(var u=0,s=a.comments_before.length;u<s;u++)a.nlb=a.nlb||a.comments_before[u].nlb}return i.newline_before=!1,new g(a)}function p(n){for(var e,t="",r=0;(e=o())&&n(e,r++);)t+=a();return t}function d(n){be(n,e,i.tokline,i.tokcol,i.tokpos)}function h(n){var e=!1,t=!1,r=!1,i="."==n,o=p(function(o,a){var u,s=o.charCodeAt(0);switch(s){case 120:case 88:return!r&&(r=!0);case 101:case 69:return!!r||!e&&(e=t=!0);case 45:return t||0==a&&!n;case 43:return t;case t=!1,46:return!(i||r||e)&&(i=!0)}return de(u=s)||pe(u)});n&&(o=n+o);var a=function(n){if(oe.test(n))return parseInt(n.substr(2),16);if(ae.test(n))return parseInt(n.substr(1),8);var e=parseFloat(n);return e==n?e:void 0}(o);if(!isNaN(a))return l("num",a);d("Invalid syntax: "+o)}function m(n){var e=a(!0,n);switch(e.charCodeAt(0)){case 110:return"\n";case 114:return"\r";case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 48:return"\0";case 120:return String.fromCharCode(v(2));case 117:return String.fromCharCode(v(4));case 10:return"";case 13:if("\n"==o())return a(!0,n),""}return e}function v(n){for(var e=0;n>0;--n){var t=parseInt(a(!0),16);isNaN(t)&&d("Invalid hex-character pattern in string"),e=e<<4|t}return e}var _=D("Unterminated string constant",function(n){for(var e=a(),t="";;){var r=a(!0,!0);if("\\"==r){var i=0,o=null;r=p(function(n){if(n>="0"&&n<="7"){if(!o)return o=n,++i;if(o<="3"&&i<=2)return++i;if(o>="4"&&i<=1)return++i}return!1}),r=i>0?String.fromCharCode(parseInt(r,8)):m(!0)}else if(r==e)break;t+=r}var u=l("string",t);return u.quote=n,u});function b(n){var e,t=i.regex_allowed,r=c("\n");return-1==r?(e=i.text.substr(i.pos),i.pos=i.text.length):(e=i.text.substring(i.pos,r),i.pos=r),i.col=i.tokcol+(i.pos-i.tokpos),i.comments_before.push(l(n,e,!0)),i.regex_allowed=t,F()}var y=D("Unterminated multiline comment",function(){var n=i.regex_allowed,e=c("*/",!0),t=i.text.substring(i.pos,e),r=t.split("\n"),o=r.length;i.pos=e+2,i.line+=o-1,o>1?i.col=r[o-1].length:i.col+=r[o-1].length,i.col+=2;var a=i.newline_before=i.newline_before||t.indexOf("\n")>=0;return i.comments_before.push(l("comment2",t,!0)),i.regex_allowed=n,i.newline_before=a,F()});function A(){for(var n,e,t=!1,r="",i=!1;null!=(n=o());)if(t)"u"!=n&&d("Expecting UnicodeEscapeSequence -- uXXXX"),ve(n=m())||d("Unicode char: "+n.charCodeAt(0)+" is not valid in identifier"),r+=n,t=!1;else if("\\"==n)i=t=!0,a();else{if(!ve(n))break;r+=a()}return ne(r)&&i&&(e=r.charCodeAt(0).toString(16).toUpperCase(),r="\\u"+"0000".substr(e.length)+e+r.slice(1)),r}var w=D("Unterminated regular expression",function(n){for(var e,t=!1,r=!1;e=a(!0);)if(t)n+="\\"+e,t=!1;else if("["==e)r=!0,n+=e;else if("]"==e&&r)r=!1,n+=e;else{if("/"==e&&!r)break;"\\"==e?t=!0:n+=e}var i=A();try{return l("regexp",new RegExp(n,i))}catch(n){d(n.message)}});function E(n){return l("operator",function n(e){if(!o())return e;var t=e+o();return ue(t)?(a(),n(t)):e}(n||a()))}function D(n,e){return function(t){try{return e(t)}catch(e){if(e!==Ae)throw e;d(n)}}}function F(n){if(null!=n)return w(n);if(function(){for(var n;se(n=o())||"\u2028"==n||"\u2029"==n;)a()}(),i.tokline=i.line,i.tokcol=i.col,i.tokpos=i.pos,t){if(s("\x3c!--"))return u(4),b("comment3");if(s("--\x3e")&&i.newline_before)return u(3),b("comment4")}var e=o();if(!e)return l("eof");var c,p=e.charCodeAt(0);switch(p){case 34:case 39:return _(e);case 46:return a(),de(o().charCodeAt(0))?h("."):l("punc",".");case 47:return function(){switch(a(),o()){case"/":return a(),b("comment1");case"*":return a(),y()}return i.regex_allowed?w(""):E("/")}()}return de(p)?h():fe(e)?l("punc",a()):ie(e)?E():92==p||me(p)?(c=A(),f?l("name",c):ee(c)?l("atom",c):ne(c)?ue(c)?l("operator",c):l("keyword",c):l("name",c)):r&&0==i.pos&&s("#!")?(u(2),b("comment5")):void d("Unexpected character '"+e+"'")}return F.context=function(n){return n&&(i=n),i},F}var Ee=m(["typeof","void","delete","--","++","!","~","-","+"]),De=m(["--","++"]),Fe=m(["=","+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&="]),Ce=function(n,e){for(var t=0;t<n.length;++t)for(var r=n[t],i=0;i<r.length;++i)e[r[i]]=t+1;return e}([["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"]],{}),ke=(t(["for","do","while","switch"]),t(["atom","num","string","regexp","name"]));function xe(n,e){e=u(e,{strict:!1,filename:null,toplevel:null,expression:!1,html5_comments:!0,bare_returns:!1,shebang:!0});var t={input:"string"==typeof n?we(n,e.filename,e.html5_comments,e.shebang):n,token:null,prev:null,peeked:null,in_function:0,in_directives:!0,in_loop:0,labels:[]};function r(n,e){return ye(t.token,n,e)}function i(){return t.peeked||(t.peeked=t.input())}function a(){return t.prev=t.token,t.peeked?(t.token=t.peeked,t.peeked=null):t.token=t.input(),t.in_directives=t.in_directives&&("string"==t.token.type||r("punc",";")),t.token}function s(){return t.prev}function c(n,e,r,i){var o=t.input.context();be(n,o.filename,null!=e?e:o.tokline,null!=r?r:o.tokcol,null!=i?i:o.tokpos)}function f(n,e){c(e,n.line,n.col)}function l(n){null==n&&(n=t.token),f(n,"Unexpected token: "+n.type+" ("+n.value+")")}function p(n,e){if(r(n,e))return a();f(t.token,"Unexpected token "+t.token.type+" Â«"+t.token.value+"Â», expected "+n+" Â«"+e+"Â»")}function d(n){return p("punc",n)}function h(){return!e.strict&&(t.token.nlb||r("eof")||r("punc","}"))}function m(){r("punc",";")?a():h()||l()}function v(){d("(");var n=ne(!0);return d(")"),n}function _(n){return function(){var e=t.token,r=n(),i=s();return r.start=e,r.end=i,r}}function g(){(r("operator","/")||r("operator","/="))&&(t.peeked=null,t.token=t.input(t.token.value.substr(1)))}t.token=a();var b=_(function(){var n;switch(g(),t.token.type){case"string":var u=t.in_directives,f=y();return u&&f.body instanceof Rn&&!r("punc",",")?new w({start:f.body.start,end:f.body.end,quote:f.body.quote,value:f.body.value}):f;case"num":case"regexp":case"operator":case"atom":return y();case"name":return ye(i(),"punc",":")?function(){var n=Bn(zn);o(function(e){return e.name==n.name},t.labels)&&c("Label "+n.name+" defined twice");d(":"),t.labels.push(n);var e=b();t.labels.pop(),e instanceof S||n.references.forEach(function(e){e instanceof G&&(e=e.label.start,c("Continue label `"+n.name+"` refers to non-IterationStatement.",e.line,e.col,e.pos))});return new B({body:e,label:n})}():y();case"punc":switch(t.token.value){case"{":return new C({start:t.token,body:x(),end:s()});case"[":case"(":return y();case";":return a(),new k;default:l()}case"keyword":switch(n=t.token.value,a(),n){case"break":return D(J);case"continue":return D(G);case"debugger":return m(),new A;case"do":return new $({body:ee(b),condition:(p("keyword","while"),n=v(),m(),n)});case"while":return new O({condition:v(),body:ee(b)});case"for":return function(){d("(");var n=null;if(!r("punc",";")&&(n=r("keyword","var")?(a(),j(!0)):ne(!0,!0),r("operator","in")))return n instanceof an&&n.definitions.length>1&&c("Only one variable declaration allowed in for..in loop"),a(),t=(e=n)instanceof an?e.definitions[0].name:null,i=ne(!0),d(")"),new M({init:e,name:t,object:i,body:ee(b)});var e,t,i;return function(n){d(";");var e=r("punc",";")?null:ne(!0);d(";");var t=r("punc",")")?null:ne(!0);return d(")"),new q({init:n,condition:e,step:t,body:ee(b)})}(n)}();case"function":return F(I);case"if":return function(){var n=v(),e=b(),t=null;r("keyword","else")&&(a(),t=b());return new X({condition:n,body:e,alternative:t})}();case"return":return 0!=t.in_function||e.bare_returns||c("'return' outside of function"),new V({value:r("punc",";")?(a(),null):h()?null:(n=ne(!0),m(),n)});case"switch":return new Z({expression:v(),body:ee(T)});case"throw":return t.token.nlb&&c("Illegal newline after 'throw'"),new Y({value:(n=ne(!0),m(),n)});case"try":return function(){var n=x(),e=null,i=null;if(r("keyword","catch")){var o=t.token;a(),d("(");var u=Bn(Mn);d(")"),e=new tn({start:o,argname:u,body:x(),end:s()})}if(r("keyword","finally")){var o=t.token;a(),i=new rn({start:o,body:x(),end:s()})}e||i||c("Missing catch/finally blocks");return new en({body:n,bcatch:e,bfinally:i})}();case"var":return n=j(),m(),n;case"const":return n=L(),m(),n;case"with":return new z({expression:v(),body:b()});default:l()}}});function y(n){return new E({body:(n=ne(!0),m(),n)})}function D(n){var e,r=null;h()||(r=Bn(Nn,!0)),null!=r?((e=o(function(n){return n.name==r.name},t.labels))||c("Undefined label "+r.name),r.thedef=e):0==t.in_loop&&c(n.TYPE+" not inside a loop or switch"),m();var i=new n({label:r});return e&&e.references.push(i),i}var F=function(n){var e=n===I,i=r("name")?Bn(e?On:qn):null;return e&&!i&&l(),d("("),new n({name:i,argnames:function(n,e){for(;!r("punc",")");)n?n=!1:d(","),e.push(Bn($n));return a(),e}(!0,[]),body:function(n,e){++t.in_function,t.in_directives=!0,t.in_loop=0,t.labels=[];var r=x();return--t.in_function,t.in_loop=n,t.labels=e,r}(t.in_loop,t.labels)})};function x(){d("{");for(var n=[];!r("punc","}");)r("eof")&&l(),n.push(b());return a(),n}function T(){d("{");for(var n,e=[],i=null,o=null;!r("punc","}");)r("eof")&&l(),r("keyword","case")?(o&&(o.end=s()),i=[],o=new nn({start:(n=t.token,a(),n),expression:ne(!0),body:i}),e.push(o),d(":")):r("keyword","default")?(o&&(o.end=s()),i=[],o=new Q({start:(n=t.token,a(),d(":"),n),body:i}),e.push(o)):(i||l(),i.push(b()));return o&&(o.end=s()),a(),e}function H(n,e){for(var i=[];i.push(new sn({start:t.token,name:Bn(e?Tn:Sn),value:r("operator","=")?(a(),ne(!1,n)):null,end:s()})),r("punc",",");)a();return i}var j=function(n){return new an({start:s(),definitions:H(n,!1),end:s()})},L=function(){return new un({start:s(),definitions:H(!1,!0),end:s()})};function U(){var n,e=t.token;switch(e.type){case"name":case"keyword":n=xn(Hn);break;case"num":n=new In({start:e,end:e,value:e.value});break;case"string":n=new Rn({start:e,end:e,value:e.value,quote:e.quote});break;case"regexp":n=new Ln({start:e,end:e,value:e.value});break;case"atom":switch(e.value){case"false":n=new Zn({start:e,end:e});break;case"true":n=new Kn({start:e,end:e});break;case"null":n=new Vn({start:e,end:e})}}return a(),n}var W=function(n){if(r("operator","new"))return function(n){var e=t.token;p("operator","new");var i,o=W(!1);return r("punc","(")?(a(),i=K(")")):i=[],Pn(new fn({start:e,expression:o,args:i,end:s()}),n)}(n);var e=t.token;if(r("punc")){switch(e.value){case"(":a();var i=ne(!0);return i.start=e,i.end=t.token,d(")"),Pn(i,n);case"[":return Pn(on(),n);case"{":return Pn(mn(),n)}l()}if(r("keyword","function")){a();var o=F(R);return o.start=e,o.end=s(),Pn(o,n)}if(ke[t.token.type])return Pn(U(),n);l()};function K(n,e,i){for(var o=!0,u=[];!r("punc",n)&&(o?o=!1:d(","),!e||!r("punc",n));)r("punc",",")&&i?u.push(new Jn({start:t.token,end:t.token})):u.push(ne(!1));return a(),u}var on=_(function(){return d("["),new An({elements:K("]",!e.strict,!0)})}),mn=_(function(){d("{");for(var n=!0,i=[];!r("punc","}")&&(n?n=!1:d(","),e.strict||!r("punc","}"));){var o=t.token,u=o.type,c=En();if("name"==u&&!r("punc",":")){if("get"==c){i.push(new Cn({start:o,key:U(),value:F(P),end:s()}));continue}if("set"==c){i.push(new Fn({start:o,key:U(),value:F(P),end:s()}));continue}}d(":"),i.push(new Dn({start:o,quote:o.quote,key:c,value:ne(!1),end:s()}))}return a(),new wn({properties:i})});function En(){var n=t.token;switch(a(),n.type){case"num":case"string":case"name":case"operator":case"keyword":case"atom":return n.value;default:l()}}function xn(n){var e=t.token.value;return new("this"==e?jn:n)({name:String(e),start:t.token,end:t.token})}function Bn(n,e){if(!r("name"))return e||c("Name expected"),null;var t=xn(n);return a(),t}var Pn=function(n,e){var i=n.start;if(r("punc","."))return a(),Pn(new dn({start:i,expression:n,property:function(){var n=t.token;switch(a(),n.type){case"name":case"operator":case"keyword":case"atom":return n.value;default:l()}}(),end:s()}),e);if(r("punc","[")){a();var o=ne(!0);return d("]"),Pn(new hn({start:i,expression:n,property:o,end:s()}),e)}return e&&r("punc","(")?(a(),Pn(new cn({start:i,expression:n,args:K(")"),end:s()}),!0)):n},Un=function(n){var e=t.token;if(r("operator")&&Ee(e.value)){a(),g();var i=Yn(vn,e.value,Un(n));return i.start=e,i.end=s(),i}for(var o=W(n);r("operator")&&De(t.token.value)&&!t.token.nlb;)(o=Yn(_n,t.token.value,o)).start=e,o.end=t.token,a();return o};function Yn(n,e,t){return"++"!=e&&"--"!=e||Xn(t)||c("Invalid use of "+e+" operator"),new n({operator:e,expression:t})}var Wn=function(n,e,i){var o=r("operator")?t.token.value:null;"in"==o&&i&&(o=null);var u=null!=o?Ce[o]:null;if(null!=u&&u>e){a();var s=Wn(Un(!0),u,i);return Wn(new gn({start:n.start,left:n,operator:o,right:s,end:s.end}),e,i)}return n};var Gn=function(n){var e,i=t.token,o=(e=n,Wn(Un(!0),0,e));if(r("operator","?")){a();var u=ne(!1);return d(":"),new bn({start:i,condition:o,consequent:u,alternative:ne(!1,n),end:s()})}return o};function Xn(n){return!e.strict||!(n instanceof jn)&&(n instanceof pn||n instanceof kn)}var Qn=function(n){var e=t.token,i=Gn(n),o=t.token.value;if(r("operator")&&Fe(o)){if(Xn(i))return a(),new yn({start:e,left:i,operator:o,right:Qn(n),end:s()});c("Invalid assignment")}return i},ne=function(n,e){var o=t.token,u=Qn(e);return n&&r("punc",",")?(a(),new ln({start:o,car:u,cdr:ne(!0,e),end:i()})):u};function ee(n){++t.in_loop;var e=n();return--t.in_loop,e}return e.expression?ne(!0):function(){for(var n=t.token,i=[];!r("eof");)i.push(b());var o=s(),a=e.toplevel;return a?(a.body=a.body.concat(i),a.end=o):a=new N({start:n,body:i,end:o}),a}()}function Be(n,e){Qn.call(this),this.before=n,this.after=e}function Se(n,e,t){this.name=t.name,this.orig=[t],this.scope=n,this.references=[],this.global=!1,this.mangled_name=null,this.undeclared=!1,this.constant=!1,this.index=e}Be.prototype=new Qn,function(n){function e(e,t){e.DEFMETHOD("transform",function(e,r){var i,o;return e.push(this),e.before&&(i=e.before(this,t,r)),i===n&&(e.after?(e.stack[e.stack.length-1]=i=this.clone(),t(i,e),(o=e.after(i,r))!==n&&(i=o)):t(i=this,e)),e.pop(this),i})}function t(n,e){return f(n,function(n){return n.transform(e,!0)})}e(b,c),e(B,function(n,e){n.label=n.label.transform(e),n.body=n.body.transform(e)}),e(E,function(n,e){n.body=n.body.transform(e)}),e(F,function(n,e){n.body=t(n.body,e)}),e(T,function(n,e){n.condition=n.condition.transform(e),n.body=n.body.transform(e)}),e(q,function(n,e){n.init&&(n.init=n.init.transform(e)),n.condition&&(n.condition=n.condition.transform(e)),n.step&&(n.step=n.step.transform(e)),n.body=n.body.transform(e)}),e(M,function(n,e){n.init=n.init.transform(e),n.object=n.object.transform(e),n.body=n.body.transform(e)}),e(z,function(n,e){n.expression=n.expression.transform(e),n.body=n.body.transform(e)}),e(U,function(n,e){n.value&&(n.value=n.value.transform(e))}),e(W,function(n,e){n.label&&(n.label=n.label.transform(e))}),e(X,function(n,e){n.condition=n.condition.transform(e),n.body=n.body.transform(e),n.alternative&&(n.alternative=n.alternative.transform(e))}),e(Z,function(n,e){n.expression=n.expression.transform(e),n.body=t(n.body,e)}),e(nn,function(n,e){n.expression=n.expression.transform(e),n.body=t(n.body,e)}),e(en,function(n,e){n.body=t(n.body,e),n.bcatch&&(n.bcatch=n.bcatch.transform(e)),n.bfinally&&(n.bfinally=n.bfinally.transform(e))}),e(tn,function(n,e){n.argname=n.argname.transform(e),n.body=t(n.body,e)}),e(on,function(n,e){n.definitions=t(n.definitions,e)}),e(sn,function(n,e){n.name=n.name.transform(e),n.value&&(n.value=n.value.transform(e))}),e(j,function(n,e){n.name&&(n.name=n.name.transform(e)),n.argnames=t(n.argnames,e),n.body=t(n.body,e)}),e(cn,function(n,e){n.expression=n.expression.transform(e),n.args=t(n.args,e)}),e(ln,function(n,e){n.car=n.car.transform(e),n.cdr=n.cdr.transform(e)}),e(dn,function(n,e){n.expression=n.expression.transform(e)}),e(hn,function(n,e){n.expression=n.expression.transform(e),n.property=n.property.transform(e)}),e(mn,function(n,e){n.expression=n.expression.transform(e)}),e(gn,function(n,e){n.left=n.left.transform(e),n.right=n.right.transform(e)}),e(bn,function(n,e){n.condition=n.condition.transform(e),n.consequent=n.consequent.transform(e),n.alternative=n.alternative.transform(e)}),e(An,function(n,e){n.elements=t(n.elements,e)}),e(wn,function(n,e){n.properties=t(n.properties,e)}),e(En,function(n,e){n.value=n.value.transform(e)})}(),Se.prototype={unmangleable:function(n){return n||(n={}),this.global&&!n.toplevel||this.undeclared||!n.eval&&(this.scope.uses_eval||this.scope.uses_with)||n.keep_fnames&&(this.orig[0]instanceof qn||this.orig[0]instanceof On)},mangle:function(n){var e=n.cache&&n.cache.props;if(this.global&&e&&e.has(this.name))this.mangled_name=e.get(this.name);else if(!this.mangled_name&&!this.unmangleable(n)){var t=this.scope;!n.screw_ie8&&this.orig[0]instanceof qn&&(t=t.parent_scope),this.mangled_name=t.next_mangled(n,this),this.global&&e&&e.set(this.name,this.mangled_name)}}},N.DEFMETHOD("figure_out_scope",function(n){n=u(n,{screw_ie8:!1,cache:null});var e=this,t=e.parent_scope=null,r=new v,i=null,o=0,a=new Qn(function(e,u){if(n.screw_ie8&&e instanceof tn){var s=t;return(t=new H(e)).init_scope_vars(o),t.parent_scope=s,u(),t=s,!0}if(e instanceof H){e.init_scope_vars(o);s=e.parent_scope=t;var c=i,f=r;return i=t=e,r=new v,++o,u(),--o,t=s,i=c,r=f,!0}if(e instanceof B){var l=e.label;if(r.has(l.name))throw new Error(p("Label {name} defined twice",l));return r.set(l.name,l),u(),r.del(l.name),!0}if(e instanceof z)for(var d=t;d;d=d.parent_scope)d.uses_with=!0;else if(e instanceof kn&&(e.scope=t),e instanceof zn&&(e.thedef=e,e.references=[]),e instanceof qn)i.def_function(e);else if(e instanceof On)(e.scope=i.parent_scope).def_function(e);else if(e instanceof Sn||e instanceof Tn){var h=i.def_variable(e);h.constant=e instanceof Tn,h.init=a.parent().value}else if(e instanceof Mn)(n.screw_ie8?t:i).def_variable(e);else if(e instanceof Nn){var m=r.get(e.name);if(!m)throw new Error(p("Undefined label {name} [{line},{col}]",{name:e.name,line:e.start.line,col:e.start.col}));e.thedef=m}});e.walk(a);var s=null,c=e.globals=new v;a=new Qn(function(n,t){if(n instanceof j){var r=s;return s=n,t(),s=r,!0}if(n instanceof W&&n.label)return n.label.thedef.references.push(n),!0;if(n instanceof Hn){var i=n.name,o=n.scope.find_variable(i);if(o)n.thedef=o;else{var u;if(c.has(i)?u=c.get(i):((u=new Se(e,c.size(),n)).undeclared=!0,u.global=!0,c.set(i,u)),n.thedef=u,"eval"==i&&a.parent()instanceof cn)for(var f=n.scope;f&&!f.uses_eval;f=f.parent_scope)f.uses_eval=!0;s&&"arguments"==i&&(s.uses_arguments=!0)}return n.reference(),!0}});e.walk(a),n.cache&&(this.cname=n.cache.cname)}),H.DEFMETHOD("init_scope_vars",function(n){this.variables=new v,this.functions=new v,this.uses_with=!1,this.uses_eval=!1,this.parent_scope=null,this.enclosed=[],this.cname=-1,this.nesting=n}),j.DEFMETHOD("init_scope_vars",function(){H.prototype.init_scope_vars.apply(this,arguments),this.uses_arguments=!1}),Hn.DEFMETHOD("reference",function(){var n=this.definition();n.references.push(this);for(var e=this.scope;e&&(l(e.enclosed,n),e!==n.scope);)e=e.parent_scope;this.frame=this.scope.nesting-n.scope.nesting}),H.DEFMETHOD("find_variable",function(n){return n instanceof kn&&(n=n.name),this.variables.get(n)||this.parent_scope&&this.parent_scope.find_variable(n)}),H.DEFMETHOD("def_function",function(n){this.functions.set(n.name,this.def_variable(n))}),H.DEFMETHOD("def_variable",function(n){var e;return this.variables.has(n.name)?(e=this.variables.get(n.name)).orig.push(n):(e=new Se(this,this.variables.size(),n),this.variables.set(n.name,e),e.global=!this.parent_scope),n.thedef=e}),H.DEFMETHOD("next_mangled",function(n){var e=this.enclosed;n:for(;;){var t=Te(++this.cname);if(he(t)&&!(n.except.indexOf(t)>=0)){for(var r=e.length;--r>=0;){var i=e[r];if(t==(i.mangled_name||i.unmangleable(n)&&i.name))continue n}return t}}}),R.DEFMETHOD("next_mangled",function(n,e){for(var t=e.orig[0]instanceof $n&&this.name&&this.name.definition();;){var r=j.prototype.next_mangled.call(this,n,e);if(!t||t.mangled_name!=r)return r}}),H.DEFMETHOD("references",function(n){return n instanceof kn&&(n=n.definition()),this.enclosed.indexOf(n)<0?null:n}),kn.DEFMETHOD("unmangleable",function(n){return this.definition().unmangleable(n)}),xn.DEFMETHOD("unmangleable",function(){return!0}),zn.DEFMETHOD("unmangleable",function(){return!1}),kn.DEFMETHOD("unreferenced",function(){return 0==this.definition().references.length&&!(this.scope.uses_eval||this.scope.uses_with)}),kn.DEFMETHOD("undeclared",function(){return this.definition().undeclared}),Nn.DEFMETHOD("undeclared",function(){return!1}),zn.DEFMETHOD("undeclared",function(){return!1}),kn.DEFMETHOD("definition",function(){return this.thedef}),kn.DEFMETHOD("global",function(){return this.definition().global}),N.DEFMETHOD("_default_mangler_options",function(n){return u(n,{except:[],eval:!1,sort:!1,toplevel:!1,screw_ie8:!1,keep_fnames:!1})}),N.DEFMETHOD("mangle_names",function(n){var e=-1,t=[];(n=this._default_mangler_options(n)).cache&&this.globals.each(function(e){n.except.indexOf(e.name)<0&&t.push(e)});var r=new Qn(function(i,o){if(i instanceof B){var a=e;return o(),e=a,!0}if(i instanceof H){r.parent();var u=[];return i.variables.each(function(e){n.except.indexOf(e.name)<0&&u.push(e)}),n.sort&&u.sort(function(n,e){return e.references.length-n.references.length}),void t.push.apply(t,u)}if(i instanceof zn){var s;do{s=Te(++e)}while(!he(s));return i.mangled_name=s,!0}n.screw_ie8&&i instanceof Mn&&t.push(i.definition())});this.walk(r),t.forEach(function(e){e.mangle(n)}),n.cache&&(n.cache.cname=this.cname)}),N.DEFMETHOD("compute_char_frequency",function(n){n=this._default_mangler_options(n);var e=new Qn(function(e){e instanceof Pn?Te.consider(e.print_to_string()):e instanceof V?Te.consider("return"):e instanceof Y?Te.consider("throw"):e instanceof G?Te.consider("continue"):e instanceof J?Te.consider("break"):e instanceof A?Te.consider("debugger"):e instanceof w?Te.consider(e.value):e instanceof O?Te.consider("while"):e instanceof $?Te.consider("do while"):e instanceof X?(Te.consider("if"),e.alternative&&Te.consider("else")):e instanceof an?Te.consider("var"):e instanceof un?Te.consider("const"):e instanceof j?Te.consider("function"):e instanceof q?Te.consider("for"):e instanceof M?Te.consider("for in"):e instanceof Z?Te.consider("switch"):e instanceof nn?Te.consider("case"):e instanceof Q?Te.consider("default"):e instanceof z?Te.consider("with"):e instanceof Fn?Te.consider("set"+e.key):e instanceof Cn?Te.consider("get"+e.key):e instanceof Dn?Te.consider(e.key):e instanceof fn?Te.consider("new"):e instanceof jn?Te.consider("this"):e instanceof en?Te.consider("try"):e instanceof tn?Te.consider("catch"):e instanceof rn?Te.consider("finally"):e instanceof kn&&e.unmangleable(n)?Te.consider(e.name):e instanceof mn||e instanceof gn?Te.consider(e.operator):e instanceof dn&&Te.consider(e.property)});this.walk(e),Te.sort()});var Te=function(){var n,e,t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_0123456789";function r(){e=Object.create(null),(n=t.split("").map(function(n){return n.charCodeAt(0)})).forEach(function(n){e[n]=0})}function i(e){var t="",r=54;e++;do{e--,t+=String.fromCharCode(n[e%r]),e=Math.floor(e/r),r=64}while(e>0);return t}return i.consider=function(n){for(var t=n.length;--t>=0;){var r=n.charCodeAt(t);r in e&&++e[r]}},i.sort=function(){n=h(n,function(n,t){return de(n)&&!de(t)?1:de(t)&&!de(n)?-1:e[t]-e[n]})},i.reset=r,r(),i.get=function(){return n},i.freq=function(){return e},i}();function $e(n){n=u(n,{indent_start:0,indent_level:4,quote_keys:!1,space_colon:!0,ascii_only:!1,unescape_regexps:!1,inline_script:!1,width:80,max_line_len:32e3,beautify:!1,source_map:null,bracketize:!1,semicolons:!0,comments:!1,shebang:!0,preserve_line:!1,screw_ie8:!1,preamble:null,quote_style:0},!0);var e=0,t=0,r=1,i=0,o="";function a(n,e){return n.replace(/[\u0080-\uffff]/g,function(n){var t=n.charCodeAt(0).toString(16);if(t.length<=2&&!e){for(;t.length<2;)t="0"+t;return"\\x"+t}for(;t.length<4;)t="0"+t;return"\\u"+t})}function s(e,t){var r=function(e,t){var r=0,i=0;function o(){return"'"+e.replace(/\x27/g,"\\'")+"'"}function u(){return'"'+e.replace(/\x22/g,'\\"')+'"'}switch(e=e.replace(/[\\\b\f\n\r\v\t\x22\x27\u2028\u2029\0\ufeff]/g,function(e){switch(e){case"\\":return"\\\\";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\v":return n.screw_ie8?"\\v":"\\x0B";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case'"':return++r,'"';case"'":return++i,"'";case"\0":return"\\x00";case"\ufeff":return"\\ufeff"}return e}),n.ascii_only&&(e=a(e)),n.quote_style){case 1:return o();case 2:return u();case 3:return"'"==t?o():u();default:return r>i?o():u()}}(e,t);return n.inline_script&&(r=(r=(r=r.replace(/<\x2fscript([>\/\t\n\f\r ])/gi,"<\\/script$1")).replace(/\x3c!--/g,"\\x3c!--")).replace(/--\x3e/g,"--\\x3e")),r}function f(t){return function n(e,t){if(t<=0)return"";if(1==t)return e;var r=n(e,t>>1);return r+=r,1&t&&(r+=e),r}(" ",n.indent_start+e-t*n.indent_level)}var l=!1,p=!1,d=null;var h=m("( [ + * / - , .");function v(e){var a=(e=String(e)).charAt(0);if(p&&(p=!1,a&&!(";}".indexOf(a)<0)||/[;]$/.test(d)||(n.semicolons||h(a)?(o+=";",t++,i++):(o+="\n",i++,r++,t=0,/^\s+$/.test(e)&&(p=!0)),n.beautify||(l=!1))),!n.beautify&&n.preserve_line&&C[C.length-1])for(var u=C[C.length-1].start.line;r<u;)o+="\n",i++,r++,t=0,l=!1;if(l){var s=d.charAt(d.length-1);(ve(s)&&(ve(a)||"\\"==a)||/^[\+\-\/]$/.test(a)&&a==s)&&(o+=" ",t++,i++),l=!1}var c=e.split(/\r?\n/),f=c.length-1;r+=f,0==f?t+=c[f].length:t=c[f].length,i+=e.length,d=e,o+=e}var _=n.beautify?function(){v(" ")}:function(){l=!0},g=n.beautify?function(e){n.beautify&&v(f(e?.5:0))}:c,y=n.beautify?function(n,t){!0===n&&(n=E());var r=e;e=n;var i=t();return e=r,i}:function(n,e){return e()},A=n.beautify?function(){v("\n")}:function(){n.max_line_len&&t>n.max_line_len&&v("\n")},w=n.beautify?function(){v(";")}:function(){p=!0};function E(){return e+n.indent_level}var D=n.source_map?function(e,i){try{e&&n.source_map.add(e.file||"?",r,t,e.line,e.col,i||"name"!=e.type?i:e.value)}catch(n){b.warn("Couldn't figure out mapping for {file}:{line},{col} â†’ {cline},{ccol} [{name}]",{file:e.file,line:e.line,col:e.col,cline:r,ccol:t,name:i||""})}}:c;function F(){return o}n.preamble&&v(n.preamble.replace(/\r\n?|[\n\u2028\u2029]|\s*$/g,"\n"));var C=[];return{get:F,toString:F,indent:g,indentation:function(){return e},current_width:function(){return t-e},should_break:function(){return n.width&&this.current_width()>=n.width},newline:A,print:v,space:_,comma:function(){v(","),_()},colon:function(){v(":"),n.space_colon&&_()},last:function(){return d},semicolon:w,force_semicolon:function(){p=!1,v(";")},to_ascii:a,print_name:function(e){var t;v((t=(t=e).toString(),n.ascii_only&&(t=a(t,!0)),t))},print_string:function(n,e){v(s(n,e))},next_indent:E,with_indent:y,with_block:function(n){var e;return v("{"),A(),y(E(),function(){e=n()}),g(),v("}"),e},with_parens:function(n){v("(");var e=n();return v(")"),e},with_square:function(n){v("[");var e=n();return v("]"),e},add_mapping:D,option:function(e){return n[e]},line:function(){return r},col:function(){return t},pos:function(){return i},push_node:function(n){C.push(n)},pop_node:function(){return C.pop()},stack:function(){return C},parent:function(n){return C[C.length-2-(n||0)]}}}function Oe(n,e){if(!(this instanceof Oe))return new Oe(n,e);Be.call(this,this.before,this.after),this.options=u(n,{sequences:!e,properties:!e,dead_code:!e,drop_debugger:!e,unsafe:!1,unsafe_comps:!1,conditionals:!e,comparisons:!e,evaluate:!e,booleans:!e,loops:!e,unused:!e,hoist_funs:!e,keep_fargs:!0,keep_fnames:!1,hoist_vars:!1,if_return:!e,join_vars:!e,cascade:!e,side_effects:!e,pure_getters:!1,pure_funcs:null,negate_iife:!e,screw_ie8:!1,drop_console:!1,angular:!1,warnings:!0,global_defs:{}},!0)}N.DEFMETHOD("scope_warnings",function(n){n=u(n,{undeclared:!1,unreferenced:!0,assign_to_global:!0,func_arguments:!0,nested_defuns:!0,eval:!0});var e=new Qn(function(t){if(n.undeclared&&t instanceof Hn&&t.undeclared()&&b.warn("Undeclared symbol: {name} [{file}:{line},{col}]",{name:t.name,file:t.start.file,line:t.start.line,col:t.start.col}),n.assign_to_global){var r=null;t instanceof yn&&t.left instanceof Hn?r=t.left:t instanceof M&&t.init instanceof Hn&&(r=t.init),r&&(r.undeclared()||r.global()&&r.scope!==r.definition().scope)&&b.warn("{msg}: {name} [{file}:{line},{col}]",{msg:r.undeclared()?"Accidental global?":"Assignment to global",name:r.name,file:r.start.file,line:r.start.line,col:r.start.col})}n.eval&&t instanceof Hn&&t.undeclared()&&"eval"==t.name&&b.warn("Eval is used [{file}:{line},{col}]",t.start),n.unreferenced&&(t instanceof Bn||t instanceof zn)&&!(t instanceof Mn)&&t.unreferenced()&&b.warn("{type} {name} is declared but not referenced [{file}:{line},{col}]",{type:t instanceof zn?"Label":"Symbol",name:t.name,file:t.start.file,line:t.start.line,col:t.start.col}),n.func_arguments&&t instanceof j&&t.uses_arguments&&b.warn("arguments used in function {name} [{file}:{line},{col}]",{name:t.name?t.name.name:"anonymous",file:t.start.file,line:t.start.line,col:t.start.col}),n.nested_defuns&&t instanceof I&&!(e.parent()instanceof H)&&b.warn('Function {name} declared in nested statement "{type}" [{file}:{line},{col}]',{name:t.name.name,type:e.parent().TYPE,file:t.start.file,line:t.start.line,col:t.start.col})});this.walk(e)}),function(){function n(n,e){n.DEFMETHOD("_codegen",e)}var e=!1;function t(n,e){Array.isArray(n)?n.forEach(function(n){t(n,e)}):n.DEFMETHOD("needs_parens",e)}function r(n,e,t){var r=n.length-1;n.forEach(function(n,i){n instanceof k||(t.indent(),n.print(t),i==r&&e||(t.newline(),e&&t.newline()))})}function i(n,e){n.length>0?e.with_block(function(){r(n,!1,e)}):e.print("{}")}function o(n,e,t){if(t)try{n.walk(new Qn(function(n){if(n instanceof gn&&"in"==n.operator)throw e})),n.print(e)}catch(t){if(t!==e)throw t;n.print(e,!0)}else n.print(e)}function a(n,e){e.option("bracketize")?!n||n instanceof k?e.print("{}"):n instanceof C?n.print(e):e.with_block(function(){e.indent(),n.print(e),e.newline()}):!n||n instanceof k?e.force_semicolon():n.print(e)}function u(n){for(var e=n.stack(),t=e.length,r=e[--t],i=e[--t];t>0;){if(i instanceof y&&i.body===r)return!0;if(!(i instanceof ln&&i.car===r||i instanceof cn&&i.expression===r&&!(i instanceof fn)||i instanceof dn&&i.expression===r||i instanceof hn&&i.expression===r||i instanceof bn&&i.condition===r||i instanceof gn&&i.left===r||i instanceof _n&&i.expression===r))return!1;r=i,i=e[--t]}}function s(n,e){return 0==n.args.length&&!e.option("beautify")}function f(n){var e,t=n.toString(10),r=[t.replace(/^0\./,".").replace("e+","e")];return Math.floor(n)===n?(n>=0?r.push("0x"+n.toString(16).toLowerCase(),"0"+n.toString(8)):r.push("-0x"+(-n).toString(16).toLowerCase(),"-0"+(-n).toString(8)),(e=/^(.*?)(0+)$/.exec(n))&&r.push(e[1]+"e"+e[2].length)):(e=/^0?\.(0+)(.*)$/.exec(n))&&r.push(e[2]+"e-"+(e[1].length+e[2].length),t.substr(t.indexOf("."))),function(n){for(var e=n[0],t=e.length,r=1;r<n.length;++r)n[r].length<t&&(t=(e=n[r]).length);return e}(r)}function l(n,e){n instanceof C?n.print(e):e.with_block(function(){e.indent(),n.print(e),e.newline()})}function p(n,e){n.DEFMETHOD("add_source_map",function(n){e(this,n)})}function d(n,e){e.add_mapping(n.start)}b.DEFMETHOD("print",function(n,t){var r=this,i=r._codegen,o=e;function a(){r.add_comments(n),r.add_source_map(n),i(r,n)}r instanceof w&&"use asm"==r.value&&(e=!0),n.push_node(r),t||r.needs_parens(n)?n.with_parens(a):a(),n.pop_node(),r instanceof j&&(e=o)}),b.DEFMETHOD("print_to_string",function(n){var e=$e(n);return this.print(e),e.get()}),b.DEFMETHOD("add_comments",function(n){var e=n.option("comments"),t=this,r=t.start;if(r&&!r._comments_dumped){r._comments_dumped=!0;var i=r.comments_before||[];t instanceof U&&t.value&&t.value.walk(new Qn(function(n){if(n.start&&n.start.comments_before&&(i=i.concat(n.start.comments_before),n.start.comments_before=[]),n instanceof R||n instanceof An||n instanceof wn)return!0})),e?e.test?i=i.filter(function(n){return e.test(n.value)||"comment5"==n.type}):"function"==typeof e&&(i=i.filter(function(n){return e(t,n)||"comment5"==n.type})):i=i.filter(function(n){return"comment5"==n.type}),!n.option("beautify")&&i.length>0&&/comment[134]/.test(i[0].type)&&0!==n.col()&&i[0].nlb&&n.print("\n"),i.forEach(function(e){/comment[134]/.test(e.type)?(n.print("//"+e.value+"\n"),n.indent()):"comment2"==e.type?(n.print("/*"+e.value+"*/"),r.nlb?(n.print("\n"),n.indent()):n.space()):0===n.pos()&&"comment5"==e.type&&n.option("shebang")&&(n.print("#!"+e.value+"\n"),n.indent())})}}),t(b,function(){return!1}),t(R,function(n){return u(n)}),t(wn,function(n){return u(n)}),t([mn,Wn],function(n){var e=n.parent();return e instanceof pn&&e.expression===this}),t(ln,function(n){var e=n.parent();return e instanceof cn||e instanceof mn||e instanceof gn||e instanceof sn||e instanceof pn||e instanceof An||e instanceof En||e instanceof bn}),t(gn,function(n){var e=n.parent();if(e instanceof cn&&e.expression===this)return!0;if(e instanceof mn)return!0;if(e instanceof pn&&e.expression===this)return!0;if(e instanceof gn){var t=e.operator,r=Ce[t],i=this.operator,o=Ce[i];if(r>o||r==o&&this===e.right)return!0}}),t(pn,function(n){var e=n.parent();if(e instanceof fn&&e.expression===this)try{this.walk(new Qn(function(n){if(n instanceof cn)throw e}))}catch(n){if(n!==e)throw n;return!0}}),t(cn,function(n){var e,t=n.parent();return t instanceof fn&&t.expression===this||this.expression instanceof R&&t instanceof pn&&t.expression===this&&(e=n.parent(1))instanceof yn&&e.left===t}),t(fn,function(n){var e=n.parent();if(s(this,n)&&(e instanceof pn||e instanceof cn&&e.expression===this))return!0}),t(In,function(n){var e=n.parent();if(this.getValue()<0&&e instanceof pn&&e.expression===this)return!0}),t([yn,bn],function(n){var e=n.parent();return e instanceof mn||(e instanceof gn&&!(e instanceof yn)||(e instanceof cn&&e.expression===this||(e instanceof bn&&e.condition===this||(e instanceof pn&&e.expression===this||void 0))))}),n(w,function(n,e){e.print_string(n.value,n.quote),e.semicolon()}),n(A,function(n,e){e.print("debugger"),e.semicolon()}),x.DEFMETHOD("_do_print_body",function(n){a(this.body,n)}),n(y,function(n,e){n.body.print(e),e.semicolon()}),n(N,function(n,e){r(n.body,!0,e),e.print("")}),n(B,function(n,e){n.label.print(e),e.colon(),n.body.print(e)}),n(E,function(n,e){n.body.print(e),e.semicolon()}),n(C,function(n,e){i(n.body,e)}),n(k,function(n,e){e.semicolon()}),n($,function(n,e){e.print("do"),e.space(),n._do_print_body(e),e.space(),e.print("while"),e.space(),e.with_parens(function(){n.condition.print(e)}),e.semicolon()}),n(O,function(n,e){e.print("while"),e.space(),e.with_parens(function(){n.condition.print(e)}),e.space(),n._do_print_body(e)}),n(q,function(n,e){e.print("for"),e.space(),e.with_parens(function(){!n.init||n.init instanceof k?e.print(";"):(n.init instanceof on?n.init.print(e):o(n.init,e,!0),e.print(";"),e.space()),n.condition?(n.condition.print(e),e.print(";"),e.space()):e.print(";"),n.step&&n.step.print(e)}),e.space(),n._do_print_body(e)}),n(M,function(n,e){e.print("for"),e.space(),e.with_parens(function(){n.init.print(e),e.space(),e.print("in"),e.space(),n.object.print(e)}),e.space(),n._do_print_body(e)}),n(z,function(n,e){e.print("with"),e.space(),e.with_parens(function(){n.expression.print(e)}),e.space(),n._do_print_body(e)}),j.DEFMETHOD("_do_print",function(n,e){var t=this;e||n.print("function"),t.name&&(n.space(),t.name.print(n)),n.with_parens(function(){t.argnames.forEach(function(e,t){t&&n.comma(),e.print(n)})}),n.space(),i(t.body,n)}),n(j,function(n,e){n._do_print(e)}),U.DEFMETHOD("_do_print",function(n,e){n.print(e),this.value&&(n.space(),this.value.print(n)),n.semicolon()}),n(V,function(n,e){n._do_print(e,"return")}),n(Y,function(n,e){n._do_print(e,"throw")}),W.DEFMETHOD("_do_print",function(n,e){n.print(e),this.label&&(n.space(),this.label.print(n)),n.semicolon()}),n(J,function(n,e){n._do_print(e,"break")}),n(G,function(n,e){n._do_print(e,"continue")}),n(X,function(n,e){e.print("if"),e.space(),e.with_parens(function(){n.condition.print(e)}),e.space(),n.alternative?(!function(n,e){if(e.option("bracketize"))l(n.body,e);else{if(!n.body)return e.force_semicolon();if(n.body instanceof $&&!e.option("screw_ie8"))l(n.body,e);else{for(var t=n.body;;)if(t instanceof X){if(!t.alternative)return void l(n.body,e);t=t.alternative}else{if(!(t instanceof x))break;t=t.body}a(n.body,e)}}}(n,e),e.space(),e.print("else"),e.space(),a(n.alternative,e)):n._do_print_body(e)}),n(Z,function(n,e){e.print("switch"),e.space(),e.with_parens(function(){n.expression.print(e)}),e.space(),n.body.length>0?e.with_block(function(){n.body.forEach(function(n,t){t&&e.newline(),e.indent(!0),n.print(e)})}):e.print("{}")}),K.DEFMETHOD("_do_print_body",function(n){this.body.length>0&&(n.newline(),this.body.forEach(function(e){n.indent(),e.print(n),n.newline()}))}),n(Q,function(n,e){e.print("default:"),n._do_print_body(e)}),n(nn,function(n,e){e.print("case"),e.space(),n.expression.print(e),e.print(":"),n._do_print_body(e)}),n(en,function(n,e){e.print("try"),e.space(),i(n.body,e),n.bcatch&&(e.space(),n.bcatch.print(e)),n.bfinally&&(e.space(),n.bfinally.print(e))}),n(tn,function(n,e){e.print("catch"),e.space(),e.with_parens(function(){n.argname.print(e)}),e.space(),i(n.body,e)}),n(rn,function(n,e){e.print("finally"),e.space(),i(n.body,e)}),on.DEFMETHOD("_do_print",function(n,e){n.print(e),n.space(),this.definitions.forEach(function(e,t){t&&n.comma(),e.print(n)});var t=n.parent();(t instanceof q||t instanceof M)&&t.init===this||n.semicolon()}),n(an,function(n,e){n._do_print(e,"var")}),n(un,function(n,e){n._do_print(e,"const")}),n(sn,function(n,e){if(n.name.print(e),n.value){e.space(),e.print("="),e.space();var t=e.parent(1),r=t instanceof q||t instanceof M;o(n.value,e,r)}}),n(cn,function(n,e){n.expression.print(e),n instanceof fn&&s(n,e)||e.with_parens(function(){n.args.forEach(function(n,t){t&&e.comma(),n.print(e)})})}),n(fn,function(n,e){e.print("new"),e.space(),cn.prototype._codegen(n,e)}),ln.DEFMETHOD("_do_print",function(n){this.car.print(n),this.cdr&&(n.comma(),n.should_break()&&(n.newline(),n.indent()),this.cdr.print(n))}),n(ln,function(n,e){n._do_print(e)}),n(dn,function(n,e){var t=n.expression;t.print(e),t instanceof In&&t.getValue()>=0&&(/[xa-f.]/i.test(e.last())||e.print(".")),e.print("."),e.add_mapping(n.end),e.print_name(n.property)}),n(hn,function(n,e){n.expression.print(e),e.print("["),n.property.print(e),e.print("]")}),n(vn,function(n,e){var t=n.operator;e.print(t),(/^[a-z]/i.test(t)||/[+-]$/.test(t)&&n.expression instanceof vn&&/^[+-]/.test(n.expression.operator))&&e.space(),n.expression.print(e)}),n(_n,function(n,e){n.expression.print(e),e.print(n.operator)}),n(gn,function(n,e){var t=n.operator;n.left.print(e),">"==t[0]&&n.left instanceof _n&&"--"==n.left.operator?e.print(" "):e.space(),e.print(t),("<"==t||"<<"==t)&&n.right instanceof vn&&"!"==n.right.operator&&n.right.expression instanceof vn&&"--"==n.right.expression.operator?e.print(" "):e.space(),n.right.print(e)}),n(bn,function(n,e){n.condition.print(e),e.space(),e.print("?"),e.space(),n.consequent.print(e),e.space(),e.colon(),n.alternative.print(e)}),n(An,function(n,e){e.with_square(function(){var t=n.elements,r=t.length;r>0&&e.space(),t.forEach(function(n,t){t&&e.comma(),n.print(e),t===r-1&&n instanceof Jn&&e.comma()}),r>0&&e.space()})}),n(wn,function(n,e){n.properties.length>0?e.with_block(function(){n.properties.forEach(function(n,t){t&&(e.print(","),e.newline()),e.indent(),n.print(e)}),e.newline()}):e.print("{}")}),n(Dn,function(n,e){var t=n.key,r=n.quote;e.option("quote_keys")?e.print_string(t+""):("number"==typeof t||!e.option("beautify")&&+t+""==t)&&parseFloat(t)>=0?e.print(f(t)):(te(t)?e.option("screw_ie8"):_e(t))?e.print_name(t):e.print_string(t,r),e.colon(),n.value.print(e)}),n(Fn,function(n,e){e.print("set"),e.space(),n.key.print(e),n.value._do_print(e,!0)}),n(Cn,function(n,e){e.print("get"),e.space(),n.key.print(e),n.value._do_print(e,!0)}),n(kn,function(n,e){var t=n.definition();e.print_name(t?t.mangled_name||t.name:n.name)}),n(Wn,function(n,e){e.print("void 0")}),n(Jn,c),n(Gn,function(n,e){e.print("Infinity")}),n(Yn,function(n,e){e.print("NaN")}),n(jn,function(n,e){e.print("this")}),n(Pn,function(n,e){e.print(n.getValue())}),n(Rn,function(n,e){e.print_string(n.getValue(),n.quote)}),n(In,function(n,t){e&&null!=n.start.raw?t.print(n.start.raw):t.print(f(n.getValue()))}),n(Ln,function(n,e){var t=n.getValue().toString();e.option("ascii_only")?t=e.to_ascii(t):e.option("unescape_regexps")&&(t=t.split("\\\\").map(function(n){return n.replace(/\\u[0-9a-fA-F]{4}|\\x[0-9a-fA-F]{2}/g,function(n){var e=parseInt(n.substr(2),16);return[92,47,46,43,42,63,40,41,91,93,123,125,36,94,58,124,33,10,13,0,65279,8232,8233].indexOf(e)<0?String.fromCharCode(e):n})}).join("\\\\")),e.print(t);var r=e.parent();r instanceof gn&&/^in/.test(r.operator)&&r.left===n&&e.print(" ")}),p(b,c),p(w,d),p(A,d),p(kn,d),p(L,d),p(x,d),p(B,c),p(j,d),p(Z,d),p(K,d),p(C,d),p(N,c),p(fn,d),p(en,d),p(tn,d),p(rn,d),p(on,d),p(Pn,d),p(Fn,function(n,e){e.add_mapping(n.start,n.key.name)}),p(Cn,function(n,e){e.add_mapping(n.start,n.key.name)}),p(En,function(n,e){e.add_mapping(n.start,n.key)})}(),Oe.prototype=new Be,s(Oe.prototype,{option:function(n){return this.options[n]},warn:function(){this.options.warnings&&b.warn.apply(b,arguments)},before:function(n,e,t){if(n._squeezed)return n;var r=!1;return n instanceof H&&(n=n.hoist_declarations(this),r=!0),e(n,this),n=n.optimize(this),r&&n instanceof H&&(n.drop_unused(this),e(n,this)),n._squeezed=!0,n}}),function(){function n(n,e){n.DEFMETHOD("optimize",function(n){var t=this;if(t._optimized)return t;if(n.has_directive("use asm"))return t;var r=e(t,n);return r._optimized=!0,r===t?r:r.transform(n)})}function e(n,e,t){return t||(t={}),e&&(t.start||(t.start=e.start),t.end||(t.end=e.end)),new n(t)}function t(n,t,r){if(t instanceof b)return t.transform(n);switch(typeof t){case"string":return e(Rn,r,{value:t}).optimize(n);case"number":return e(isNaN(t)?Yn:In,r,{value:t}).optimize(n);case"boolean":return e(t?Kn:Zn,r).optimize(n);case"undefined":return e(Wn,r).optimize(n);default:if(null===t)return e(Vn,r,{value:null}).optimize(n);if(t instanceof RegExp)return e(Ln,r,{value:t}).optimize(n);throw new Error(p("Can't handle constant of type: {type}",{type:typeof t}))}}function r(n){if(null===n)return[];if(n instanceof C)return n.body;if(n instanceof k)return[];if(n instanceof y)return[n];throw new Error("Can't convert thing to statement array")}function a(n){return null===n||(n instanceof k||n instanceof C&&0==n.body.length)}function u(n){return n instanceof Z?n:(n instanceof q||n instanceof M||n instanceof T)&&n.body instanceof C?n.body:n}function s(n,t){var i,o=10;do{i=!1,t.option("angular")&&(n=a(n)),n=s(n),t.option("dead_code")&&(n=l(n,t)),t.option("if_return")&&(n=f(n,t)),t.option("sequences")&&(n=p(n,t)),t.option("join_vars")&&(n=h(n,t))}while(i&&o-- >0);return t.option("negate_iife")&&n.forEach(function(n){n instanceof E&&(n.body=function n(t){return t.transform(new Be(function(t){if(t instanceof cn&&t.expression instanceof R)return e(vn,t,{operator:"!",expression:t});if(t instanceof cn)t.expression=n(t.expression);else if(t instanceof ln)t.car=n(t.car);else if(t instanceof bn){var r=n(t.condition);if(r!==t.condition){t.condition=r;var i=t.consequent;t.consequent=t.alternative,t.alternative=i}}return t}))}(n.body))}),n;function a(n){function r(n){return/@ngInject/.test(n.value)}function i(n){return n.argnames.map(function(n){return e(Rn,n,{value:n.name})})}function o(n,t){return e(An,n,{elements:t})}function a(n,t){return e(E,n,{body:e(yn,n,{operator:"=",left:e(dn,t,{expression:e(Hn,t,t),property:"$inject"}),right:o(n,i(n))})})}return n.reduce(function(n,e){if(n.push(e),e.body&&e.body.args)!function n(e){e&&e.args&&(e.args.forEach(function(n,e,t){var a=n.start.comments_before;n instanceof j&&a.length&&r(a[0])&&(t[e]=o(n,i(n).concat(n)))}),e.expression&&e.expression.expression&&n(e.expression.expression))}(e.body);else{var u=e.start,s=u.comments_before;if(s&&s.length>0)r(s.pop())&&(e instanceof I?n.push(a(e,e.name)):e instanceof on?e.definitions.forEach(function(e){e.value&&e.value instanceof j&&n.push(a(e.value,e.name))}):t.warn("Unknown statement marked with @ngInject [{file}:{line},{col}]",u))}return n},[])}function s(n){var e=[];return n.reduce(function(n,t){return t instanceof C?(i=!0,n.push.apply(n,s(t.body))):t instanceof k?i=!0:t instanceof w?e.indexOf(t.value)<0?(n.push(t),e.push(t.value)):i=!0:n.push(t),n},[])}function f(n,t){var o=t.self(),a=o instanceof j,s=[];n:for(var c=n.length;--c>=0;){var f=n[c];switch(!0){case a&&f instanceof V&&!f.value&&0==s.length:i=!0;continue n;case f instanceof X:if(f.body instanceof V){if((a&&0==s.length||s[0]instanceof V&&!s[0].value)&&!f.body.value&&!f.alternative){i=!0;var l=e(E,f.condition,{body:f.condition});s.unshift(l);continue n}if(s[0]instanceof V&&f.body.value&&s[0].value&&!f.alternative){i=!0,(f=f.clone()).alternative=s[0],s[0]=f.transform(t);continue n}if((0==s.length||s[0]instanceof V)&&f.body.value&&!f.alternative&&a){i=!0,(f=f.clone()).alternative=s[0]||e(V,f,{value:e(Wn,f)}),s[0]=f.transform(t);continue n}if(!f.body.value&&a){i=!0,(f=f.clone()).condition=f.condition.negate(t),f.body=e(C,f,{body:r(f.alternative).concat(s)}),f.alternative=null,s=[f.transform(t)];continue n}if(t.option("sequences")&&1==s.length&&a&&s[0]instanceof E&&(!f.alternative||f.alternative instanceof E)){i=!0,s.push(e(V,s[0],{value:e(Wn,s[0])}).transform(t)),(s=r(f.alternative).concat(s)).unshift(f);continue n}}var p=(m=tn(f.body))instanceof W?t.loopcontrol_target(m.label):null;if(m&&(m instanceof V&&!m.value&&a||m instanceof G&&o===u(p)||m instanceof J&&p instanceof C&&o===p)){m.label&&d(m.label.thedef.references,m),i=!0;var h=r(f.body).slice(0,-1);(f=f.clone()).condition=f.condition.negate(t),f.body=e(C,f,{body:r(f.alternative).concat(s)}),f.alternative=e(C,f,{body:h}),s=[f.transform(t)];continue n}var m;p=(m=tn(f.alternative))instanceof W?t.loopcontrol_target(m.label):null;if(m&&(m instanceof V&&!m.value&&a||m instanceof G&&o===u(p)||m instanceof J&&p instanceof C&&o===p)){m.label&&d(m.label.thedef.references,m),i=!0,(f=f.clone()).body=e(C,f.body,{body:r(f.body).concat(s)}),f.alternative=e(C,f.alternative,{body:r(f.alternative).slice(0,-1)}),s=[f.transform(t)];continue n}s.unshift(f);break;default:s.unshift(f)}}return s}function l(n,e){var t=!1,r=n.length,o=e.self();return n=n.reduce(function(n,r){if(t)c(e,r,n);else{if(r instanceof W){var i=e.loopcontrol_target(r.label);r instanceof J&&i instanceof C&&u(i)===o||r instanceof G&&u(i)===o?r.label&&d(r.label.thedef.references,r):n.push(r)}else n.push(r);tn(r)&&(t=!0)}return n},[]),i=n.length!=r,n}function p(n,t){if(n.length<2)return n;var r=[],o=[];function a(){(r=ln.from_array(r))&&o.push(e(E,r,{body:r})),r=[]}return n.forEach(function(n){n instanceof E&&r.length<2e3?r.push(n.body):(a(),o.push(n))}),a(),o=function(n,t){function r(n){i.pop();var e=o.body;return e instanceof ln?e.add(n):e=ln.cons(e,n),e.transform(t)}var i=[],o=null;return n.forEach(function(n){if(o)if(n instanceof q){var t={};try{o.body.walk(new Qn(function(n){if(n instanceof gn&&"in"==n.operator)throw t})),!n.init||n.init instanceof on?n.init||(n.init=o.body,i.pop()):n.init=r(n.init)}catch(n){if(n!==t)throw n}}else n instanceof X?n.condition=r(n.condition):n instanceof z?n.expression=r(n.expression):n instanceof U&&n.value?n.value=r(n.value):n instanceof U?n.value=r(e(Wn,n)):n instanceof Z&&(n.expression=r(n.expression));i.push(n),o=n instanceof E?n:null}),i}(o,t),i=o.length!=n.length,o}function h(n,e){var t=null;return n.reduce(function(n,e){return e instanceof on&&t&&t.TYPE==e.TYPE?(t.definitions=t.definitions.concat(e.definitions),i=!0):e instanceof q&&t instanceof on&&(!e.init||e.init.TYPE==t.TYPE)?(i=!0,n.pop(),e.init?e.init.definitions=t.definitions.concat(e.init.definitions):e.init=t,n.push(e),t=e):(t=e,n.push(e)),n},[])}}function c(n,e,t){n.warn("Dropping unreachable code [{file}:{line},{col}]",e.start),e.walk(new Qn(function(e){return e instanceof on?(n.warn("Declarations in unreachable code! [{file}:{line},{col}]",e.start),e.remove_initializers(),t.push(e),!0):e instanceof I?(t.push(e),!0):e instanceof H||void 0}))}var _,g,D,S,$;function Y(n,e){return n.print_to_string().length>e.print_to_string().length?e:n}function tn(n){return n&&n.aborts()}function rn(n,t){function i(i){i=r(i),n.body instanceof C?(n.body=n.body.clone(),n.body.body=i.concat(n.body.body.slice(1)),n.body=n.body.transform(t)):n.body=e(C,n.body,{body:i}).transform(t),rn(n,t)}var o=n.body instanceof C?n.body.body[0]:n.body;o instanceof X&&(o.body instanceof J&&t.loopcontrol_target(o.body.label)===n?(n.condition?n.condition=e(gn,n.condition,{left:n.condition,operator:"&&",right:o.condition.negate(t)}):n.condition=o.condition.negate(t),i(o.alternative)):o.alternative instanceof J&&t.loopcontrol_target(o.alternative.label)===n&&(n.condition?n.condition=e(gn,n.condition,{left:n.condition,operator:"&&",right:o.condition}):n.condition=o.condition,i(o.body)))}n(b,function(n,e){return n}),b.DEFMETHOD("equivalent_to",function(n){return this.print_to_string()==n.print_to_string()}),g=["!","delete"],D=["in","instanceof","==","!=","===","!==","<","<=",">=",">"],(_=function(n,e){n.DEFMETHOD("is_boolean",e)})(b,function(){return!1}),_(vn,function(){return i(this.operator,g)}),_(gn,function(){return i(this.operator,D)||("&&"==this.operator||"||"==this.operator)&&this.left.is_boolean()&&this.right.is_boolean()}),_(bn,function(){return this.consequent.is_boolean()&&this.alternative.is_boolean()}),_(yn,function(){return"="==this.operator&&this.right.is_boolean()}),_(ln,function(){return this.cdr.is_boolean()}),_(Kn,function(){return!0}),_(Zn,function(){return!0}),(S=function(n,e){n.DEFMETHOD("is_string",e)})(b,function(){return!1}),S(Rn,function(){return!0}),S(vn,function(){return"typeof"==this.operator}),S(gn,function(n){return"+"==this.operator&&(this.left.is_string(n)||this.right.is_string(n))}),S(yn,function(n){return("="==this.operator||"+="==this.operator)&&this.right.is_string(n)}),S(ln,function(n){return this.cdr.is_string(n)}),S(bn,function(n){return this.consequent.is_string(n)&&this.alternative.is_string(n)}),S(cn,function(n){return n.option("unsafe")&&this.expression instanceof Hn&&"String"==this.expression.name&&this.expression.undeclared()}),function(n){function e(n,e){if(!e)throw new Error("Compressor must be passed");return n._eval(e)}b.DEFMETHOD("evaluate",function(e){if(!e.option("evaluate"))return[this];try{var r=this._eval(e);return[Y(t(e,r,this),this),r]}catch(e){if(e!==n)throw e;return[this]}}),n(y,function(){throw new Error(p("Cannot evaluate a statement [{file}:{line},{col}]",this.start))}),n(R,function(){throw n}),n(b,function(){throw n}),n(Pn,function(){return this.getValue()}),n(vn,function(t){var r=this.expression;switch(this.operator){case"!":return!e(r,t);case"typeof":if(r instanceof R)return"function";if((r=e(r,t))instanceof RegExp)throw n;return typeof r;case"void":return void e(r,t);case"~":return~e(r,t);case"-":if(0===(r=e(r,t)))throw n;return-r;case"+":return+e(r,t)}throw n}),n(gn,function(t){var r=this.left,i=this.right;switch(this.operator){case"&&":return e(r,t)&&e(i,t);case"||":return e(r,t)||e(i,t);case"|":return e(r,t)|e(i,t);case"&":return e(r,t)&e(i,t);case"^":return e(r,t)^e(i,t);case"+":return e(r,t)+e(i,t);case"*":return e(r,t)*e(i,t);case"/":return e(r,t)/e(i,t);case"%":return e(r,t)%e(i,t);case"-":return e(r,t)-e(i,t);case"<<":return e(r,t)<<e(i,t);case">>":return e(r,t)>>e(i,t);case">>>":return e(r,t)>>>e(i,t);case"==":return e(r,t)==e(i,t);case"===":return e(r,t)===e(i,t);case"!=":return e(r,t)!=e(i,t);case"!==":return e(r,t)!==e(i,t);case"<":return e(r,t)<e(i,t);case"<=":return e(r,t)<=e(i,t);case">":return e(r,t)>e(i,t);case">=":return e(r,t)>=e(i,t);case"in":return e(r,t)in e(i,t);case"instanceof":return e(r,t)instanceof e(i,t)}throw n}),n(bn,function(n){return e(this.condition,n)?e(this.consequent,n):e(this.alternative,n)}),n(Hn,function(t){var r=this.definition();if(r&&r.constant&&r.init)return e(r.init,t);throw n}),n(dn,function(t){if(t.option("unsafe")&&"length"==this.property){var r=e(this.expression,t);if("string"==typeof r)return r.length}throw n})}(function(n,e){n.DEFMETHOD("_eval",e)}),function(n){function t(n){return e(vn,n,{operator:"!",expression:n})}n(b,function(){return t(this)}),n(y,function(){throw new Error("Cannot negate a statement")}),n(R,function(){return t(this)}),n(vn,function(){return"!"==this.operator?this.expression:t(this)}),n(ln,function(n){var e=this.clone();return e.cdr=e.cdr.negate(n),e}),n(bn,function(n){var e=this.clone();return e.consequent=e.consequent.negate(n),e.alternative=e.alternative.negate(n),Y(t(this),e)}),n(gn,function(n){var e=this.clone(),r=this.operator;if(n.option("unsafe_comps"))switch(r){case"<=":return e.operator=">",e;case"<":return e.operator=">=",e;case">=":return e.operator="<",e;case">":return e.operator="<=",e}switch(r){case"==":return e.operator="!=",e;case"!=":return e.operator="==",e;case"===":return e.operator="!==",e;case"!==":return e.operator="===",e;case"&&":return e.operator="||",e.left=e.left.negate(n),e.right=e.right.negate(n),Y(t(this),e);case"||":return e.operator="&&",e.left=e.left.negate(n),e.right=e.right.negate(n),Y(t(this),e)}return t(this)})}(function(n,e){n.DEFMETHOD("negate",function(n){return e.call(this,n)})}),($=function(n,e){n.DEFMETHOD("has_side_effects",e)})(b,function(n){return!0}),$(k,function(n){return!1}),$(Pn,function(n){return!1}),$(jn,function(n){return!1}),$(cn,function(n){var e=n.option("pure_funcs");return!e||("function"==typeof e?e(this):e.indexOf(this.expression.print_to_string())<0)}),$(F,function(n){for(var e=this.body.length;--e>=0;)if(this.body[e].has_side_effects(n))return!0;return!1}),$(E,function(n){return this.body.has_side_effects(n)}),$(I,function(n){return!0}),$(R,function(n){return!1}),$(gn,function(n){return this.left.has_side_effects(n)||this.right.has_side_effects(n)}),$(yn,function(n){return!0}),$(bn,function(n){return this.condition.has_side_effects(n)||this.consequent.has_side_effects(n)||this.alternative.has_side_effects(n)}),$(mn,function(n){return"delete"==this.operator||"++"==this.operator||"--"==this.operator||this.expression.has_side_effects(n)}),$(Hn,function(n){return this.global()&&this.undeclared()}),$(wn,function(n){for(var e=this.properties.length;--e>=0;)if(this.properties[e].has_side_effects(n))return!0;return!1}),$(En,function(n){return this.value.has_side_effects(n)}),$(An,function(n){for(var e=this.elements.length;--e>=0;)if(this.elements[e].has_side_effects(n))return!0;return!1}),$(dn,function(n){return!n.option("pure_getters")||this.expression.has_side_effects(n)}),$(hn,function(n){return!n.option("pure_getters")||this.expression.has_side_effects(n)||this.property.has_side_effects(n)}),$(pn,function(n){return!n.option("pure_getters")}),$(ln,function(n){return this.car.has_side_effects(n)||this.cdr.has_side_effects(n)}),function(n){function e(){var n=this.body.length;return n>0&&tn(this.body[n-1])}n(y,function(){return null}),n(L,function(){return this}),n(C,e),n(K,e),n(X,function(){return this.alternative&&tn(this.body)&&tn(this.alternative)&&this})}(function(n,e){n.DEFMETHOD("aborts",e)}),n(w,function(n,t){return"up"===t.has_directive(n.value)?e(k,n):n}),n(A,function(n,t){return t.option("drop_debugger")?e(k,n):n}),n(B,function(n,t){return n.body instanceof J&&t.loopcontrol_target(n.body.label)===n.body?e(k,n):0==n.label.references.length?n.body:n}),n(F,function(n,e){return n.body=s(n.body,e),n}),n(C,function(n,t){switch(n.body=s(n.body,t),n.body.length){case 1:return n.body[0];case 0:return e(k,n)}return n}),H.DEFMETHOD("drop_unused",function(n){var t=this;if(n.has_directive("use asm"))return t;if(n.option("unused")&&!(t instanceof N)&&!t.uses_eval){var r=[],o=new v,a=this,u=new Qn(function(e,i){if(e!==t){if(e instanceof I)return o.add(e.name.name,e),!0;if(e instanceof on&&a===t)return e.definitions.forEach(function(e){e.value&&(o.add(e.name.name,e.value),e.value.has_side_effects(n)&&e.value.walk(u))}),!0;if(e instanceof Hn)return l(r,e.definition()),!0;if(e instanceof H){var s=a;return a=e,i(),a=s,!0}}});t.walk(u);for(var s=0;s<r.length;++s)r[s].orig.forEach(function(n){var e=o.get(n.name);e&&e.forEach(function(n){var e=new Qn(function(n){n instanceof Hn&&l(r,n.definition())});n.walk(e)})});var c=new Be(function(o,a,u){if(o instanceof j&&!(o instanceof P)&&!n.option("keep_fargs"))for(var s=o.argnames,l=s.length;--l>=0;){var p=s[l];if(!p.unreferenced())break;s.pop(),n.warn("Dropping unused function argument {name} [{file}:{line},{col}]",{name:p.name,file:p.start.file,line:p.start.line,col:p.start.col})}if(o instanceof I&&o!==t)return i(o.name.definition(),r)?o:(n.warn("Dropping unused function {name} [{file}:{line},{col}]",{name:o.name.name,file:o.name.start.file,line:o.name.start.line,col:o.name.start.col}),e(k,o));if(o instanceof on&&!(c.parent()instanceof M)){var d=o.definitions.filter(function(e){if(i(e.name.definition(),r))return!0;var t={name:e.name.name,file:e.name.start.file,line:e.name.start.line,col:e.name.start.col};return e.value&&e.value.has_side_effects(n)?(e._unused_side_effects=!0,n.warn("Side effects in initialization of unused variable {name} [{file}:{line},{col}]",t),!0):(n.warn("Dropping unused variable {name} [{file}:{line},{col}]",t),!1)});d=h(d,function(n,e){return!n.value&&e.value?-1:!e.value&&n.value?1:0});var m=[];for(l=0;l<d.length;){var v=d[l];v._unused_side_effects?(m.push(v.value),d.splice(l,1)):(m.length>0&&(m.push(v.value),v.value=ln.from_array(m),m=[]),++l)}return m=m.length>0?e(C,o,{body:[e(E,o,{body:ln.from_array(m)})]}):null,0!=d.length||m?0==d.length?u?f.splice(m.body):m:(o.definitions=d,m?(m.body.unshift(o),u?f.splice(m.body):m):o):e(k,o)}if(o instanceof q&&(a(o,this),o.init instanceof C)){var _=o.init.body.slice(0,-1);return o.init=o.init.body.slice(-1)[0].body,_.push(o),u?f.splice(_):e(C,o,{body:_})}return o instanceof H&&o!==t?o:void 0});t.transform(c)}}),H.DEFMETHOD("hoist_declarations",function(n){var t=this;if(n.has_directive("use asm"))return t;var r=n.option("hoist_funs"),i=n.option("hoist_vars");if(r||i){var a=[],u=[],s=new v,c=0,f=0;t.walk(new Qn(function(n){return n instanceof H&&n!==t||(n instanceof an?(++f,!0):void 0)})),i=i&&f>1;var l=new Be(function(n){if(n!==t){if(n instanceof w)return a.push(n),e(k,n);if(n instanceof I&&r)return u.push(n),e(k,n);if(n instanceof an&&i){n.definitions.forEach(function(n){s.set(n.name.name,n),++c});var o=n.to_assignments(),f=l.parent();return f instanceof M&&f.init===n?null==o?n.definitions[0].name:o:f instanceof q&&f.init===n?o:o?e(E,n,{body:o}):e(k,n)}if(n instanceof H)return n}});if(t=t.transform(l),c>0){var p=[];if(s.each(function(n,e){t instanceof j&&o(function(e){return e.name==n.name.name},t.argnames)?s.del(e):((n=n.clone()).value=null,p.push(n),s.set(e,n))}),p.length>0){for(var h=0;h<t.body.length;){if(t.body[h]instanceof E){var m,_,g=t.body[h].body;if(g instanceof yn&&"="==g.operator&&(m=g.left)instanceof kn&&s.has(m.name)){if((b=s.get(m.name)).value)break;b.value=g.right,d(p,b),p.push(b),t.body.splice(h,1);continue}if(g instanceof ln&&(_=g.car)instanceof yn&&"="==_.operator&&(m=_.left)instanceof kn&&s.has(m.name)){var b;if((b=s.get(m.name)).value)break;b.value=_.right,d(p,b),p.push(b),t.body[h].body=g.cdr;continue}}if(t.body[h]instanceof k)t.body.splice(h,1);else{if(!(t.body[h]instanceof C))break;var y=[h,1].concat(t.body[h].body);t.body.splice.apply(t.body,y)}}p=e(an,t,{definitions:p}),u.push(p)}}t.body=a.concat(u,t.body)}return t}),n(E,function(n,t){return t.option("side_effects")&&!n.body.has_side_effects(t)?(t.warn("Dropping side-effect-free statement [{file}:{line},{col}]",n.start),e(k,n)):n}),n(T,function(n,t){var r=n.condition.evaluate(t);if(n.condition=r[0],!t.option("loops"))return n;if(r.length>1){if(r[1])return e(q,n,{body:n.body});if(n instanceof O&&t.option("dead_code")){var i=[];return c(t,n.body,i),e(C,n,{body:i})}}return n}),n(O,function(n,t){return t.option("loops")?((n=T.prototype.optimize.call(n,t))instanceof O&&(rn(n,t),n=e(q,n,n).transform(t)),n):n}),n(q,function(n,t){var r=n.condition;if(r&&(r=r.evaluate(t),n.condition=r[0]),!t.option("loops"))return n;if(r&&r.length>1&&!r[1]&&t.option("dead_code")){var i=[];return n.init instanceof y?i.push(n.init):n.init&&i.push(e(E,n.init,{body:n.init})),c(t,n.body,i),e(C,n,{body:i})}return rn(n,t),n}),n(X,function(n,t){if(!t.option("conditionals"))return n;var r=n.condition.evaluate(t);if(n.condition=r[0],r.length>1)if(r[1]){if(t.warn("Condition always true [{file}:{line},{col}]",n.condition.start),t.option("dead_code")){var i=[];return n.alternative&&c(t,n.alternative,i),i.push(n.body),e(C,n,{body:i}).transform(t)}}else if(t.warn("Condition always false [{file}:{line},{col}]",n.condition.start),t.option("dead_code")){i=[];return c(t,n.body,i),n.alternative&&i.push(n.alternative),e(C,n,{body:i}).transform(t)}a(n.alternative)&&(n.alternative=null);var o=n.condition.negate(t),u=Y(n.condition,o)===o;if(n.alternative&&u){u=!1,n.condition=o;var s=n.body;n.body=n.alternative||e(k),n.alternative=s}if(a(n.body)&&a(n.alternative))return e(E,n.condition,{body:n.condition}).transform(t);if(n.body instanceof E&&n.alternative instanceof E)return e(E,n,{body:e(bn,n,{condition:n.condition,consequent:n.body.body,alternative:n.alternative.body})}).transform(t);if(a(n.alternative)&&n.body instanceof E)return u?e(E,n,{body:e(gn,n,{operator:"||",left:o,right:n.body.body})}).transform(t):e(E,n,{body:e(gn,n,{operator:"&&",left:n.condition,right:n.body.body})}).transform(t);if(n.body instanceof k&&n.alternative&&n.alternative instanceof E)return e(E,n,{body:e(gn,n,{operator:"||",left:n.condition,right:n.alternative.body})}).transform(t);if(n.body instanceof U&&n.alternative instanceof U&&n.body.TYPE==n.alternative.TYPE)return e(n.body.CTOR,n,{value:e(bn,n,{condition:n.condition,consequent:n.body.value||e(Wn,n.body).optimize(t),alternative:n.alternative.value||e(Wn,n.alternative).optimize(t)})}).transform(t);if(n.body instanceof X&&!n.body.alternative&&!n.alternative&&(n.condition=e(gn,n.condition,{operator:"&&",left:n.condition,right:n.body.condition}).transform(t),n.body=n.body.body),tn(n.body)&&n.alternative){var f=n.alternative;return n.alternative=null,e(C,n,{body:[n,f]}).transform(t)}if(tn(n.alternative)){var l=n.body;return n.body=n.alternative,n.condition=u?o:n.condition.negate(t),n.alternative=null,e(C,n,{body:[n,l]}).transform(t)}return n}),n(Z,function(n,t){if(0==n.body.length&&t.option("conditionals"))return e(E,n,{body:n.expression}).transform(t);for(;;){var r=n.body[n.body.length-1];if(r){var i=r.body[r.body.length-1];if(i instanceof J&&u(t.loopcontrol_target(i.label))===n&&r.body.pop(),r instanceof Q&&0==r.body.length){n.body.pop();continue}}break}var o=n.expression.evaluate(t);n:if(2==o.length)try{if(n.expression=o[0],!t.option("dead_code"))break n;var a=o[1],s=!1,c=!1,l=!1,p=!1,d=!1,h=new Be(function(r,i,o){if(r instanceof j||r instanceof E)return r;if(r instanceof Z&&r===n)return i(r=r.clone(),this),d?r:e(C,r,{body:r.body.reduce(function(n,e){return n.concat(e.body)},[])}).transform(t);if(r instanceof X||r instanceof en){var u=s;return s=!c,i(r,this),s=u,r}if(r instanceof x||r instanceof Z){u=c;return c=!0,i(r,this),c=u,r}if(r instanceof J&&this.loopcontrol_target(r.label)===n)return s?(d=!0,r):c?r:(p=!0,o?f.skip:e(k,r));if(r instanceof K&&this.parent()===n){if(p)return f.skip;if(r instanceof nn){var h=r.expression.evaluate(t);if(h.length<2)throw n;return h[1]===a||l?(l=!0,tn(r)&&(p=!0),i(r,this),r):f.skip}return i(r,this),r}});h.stack=t.stack.slice(),n=n.transform(h)}catch(e){if(e!==n)throw e}return n}),n(nn,function(n,e){return n.body=s(n.body,e),n}),n(en,function(n,e){return n.body=s(n.body,e),n}),on.DEFMETHOD("remove_initializers",function(){this.definitions.forEach(function(n){n.value=null})}),on.DEFMETHOD("to_assignments",function(){var n=this.definitions.reduce(function(n,t){if(t.value){var r=e(Hn,t.name,t.name);n.push(e(yn,t,{operator:"=",left:r,right:t.value}))}return n},[]);return 0==n.length?null:ln.from_array(n)}),n(on,function(n,t){return 0==n.definitions.length?e(k,n):n}),n(R,function(n,e){return n=j.prototype.optimize.call(n,e),e.option("unused")&&!e.option("keep_fnames")&&n.name&&n.name.unreferenced()&&(n.name=null),n}),n(cn,function(n,r){if(r.option("unsafe")){var i=n.expression;if(i instanceof Hn&&i.undeclared())switch(i.name){case"Array":if(1!=n.args.length)return e(An,n,{elements:n.args}).transform(r);break;case"Object":if(0==n.args.length)return e(wn,n,{properties:[]});break;case"String":if(0==n.args.length)return e(Rn,n,{value:""});if(n.args.length<=1)return e(gn,n,{left:n.args[0],operator:"+",right:e(Rn,n,{value:""})}).transform(r);break;case"Number":if(0==n.args.length)return e(In,n,{value:0});if(1==n.args.length)return e(vn,n,{expression:n.args[0],operator:"+"}).transform(r);case"Boolean":if(0==n.args.length)return e(Zn,n);if(1==n.args.length)return e(vn,n,{expression:e(vn,null,{expression:n.args[0],operator:"!"}),operator:"!"}).transform(r);break;case"Function":if(0==n.args.length)return e(R,n,{argnames:[],body:[]});if(function(n,e){for(var t=n.length;--t>=0;)if(!e(n[t]))return!1;return!0}(n.args,function(n){return n instanceof Rn}))try{var o=xe(c="(function("+n.args.slice(0,-1).map(function(n){return n.value}).join(",")+"){"+n.args[n.args.length-1].value+"})()");o.figure_out_scope({screw_ie8:r.option("screw_ie8")});var a,u=new Oe(r.options);(o=o.transform(u)).figure_out_scope({screw_ie8:r.option("screw_ie8")}),o.mangle_names();try{o.walk(new Qn(function(n){if(n instanceof j)throw a=n,o}))}catch(n){if(n!==o)throw n}if(!a)return n;var s=a.argnames.map(function(t,r){return e(Rn,n.args[r],{value:t.print_to_string()})}),c=$e();return C.prototype._codegen.call(a,a,c),c=c.toString().replace(/^\{|\}$/g,""),s.push(e(Rn,n.args[n.args.length-1],{value:c})),n.args=s,n}catch(e){if(!(e instanceof ge))throw console.log(e),e;r.warn("Error parsing code passed to new Function [{file}:{line},{col}]",n.args[n.args.length-1].start),r.warn(e.toString())}}else{if(i instanceof dn&&"toString"==i.property&&0==n.args.length)return e(gn,n,{left:e(Rn,n,{value:""}),operator:"+",right:i.expression}).transform(r);if(i instanceof dn&&i.expression instanceof An&&"join"==i.property){var f=0==n.args.length?",":n.args[0].evaluate(r)[1];if(null!=f){var l,p=i.expression.elements.reduce(function(n,e){if(e=e.evaluate(r),0==n.length||1==e.length)n.push(e);else{var i=n[n.length-1];if(2==i.length){var o=""+i[1]+f+e[1];n[n.length-1]=[t(r,o,i[0]),o]}else n.push(e)}return n},[]);if(0==p.length)return e(Rn,n,{value:""});if(1==p.length)return p[0][0];if(""==f)return l=p[0][0]instanceof Rn||p[1][0]instanceof Rn?p.shift()[0]:e(Rn,n,{value:""}),p.reduce(function(n,t){return e(gn,t[0],{operator:"+",left:n,right:t[0]})},l).transform(r);var d=n.clone();return d.expression=d.expression.clone(),d.expression.expression=d.expression.expression.clone(),d.expression.expression.elements=p.map(function(n){return n[0]}),Y(n,d)}}}}if(r.option("side_effects")&&n.expression instanceof R&&0==n.args.length&&!F.prototype.has_side_effects.call(n.expression,r))return e(Wn,n).transform(r);if(r.option("drop_console")&&n.expression instanceof pn){for(var h=n.expression.expression;h.expression;)h=h.expression;if(h instanceof Hn&&"console"==h.name&&h.undeclared())return e(Wn,n).transform(r)}return n.evaluate(r)[0]}),n(fn,function(n,t){if(t.option("unsafe")){var r=n.expression;if(r instanceof Hn&&r.undeclared())switch(r.name){case"Object":case"RegExp":case"Function":case"Error":case"Array":return e(cn,n,n).transform(t)}}return n}),n(ln,function(n,t){if(!t.option("side_effects"))return n;if(!n.car.has_side_effects(t)){var r=t.parent();if(!(r instanceof cn&&r.expression===n))return n.cdr}if(t.option("cascade")){if(n.car instanceof yn&&!n.car.left.has_side_effects(t)){if(n.car.left.equivalent_to(n.cdr))return n.car;if(n.cdr instanceof cn&&n.cdr.expression.equivalent_to(n.car.left))return n.cdr.expression=n.car,n.cdr}if(!n.car.has_side_effects(t)&&!n.cdr.has_side_effects(t)&&n.car.equivalent_to(n.cdr))return n.car}return n.cdr instanceof vn&&"void"==n.cdr.operator&&!n.cdr.expression.has_side_effects(t)?(n.cdr.expression=n.car,n.cdr):n.cdr instanceof Wn?e(vn,n,{operator:"void",expression:n.car}):n}),mn.DEFMETHOD("lift_sequences",function(n){if(n.option("sequences")&&this.expression instanceof ln){var e=this.expression,t=e.to_array();return this.expression=t.pop(),t.push(this),e=ln.from_array(t).transform(n)}return this}),n(_n,function(n,e){return n.lift_sequences(e)}),n(vn,function(n,t){var r=(n=n.lift_sequences(t)).expression;if(t.option("booleans")&&t.in_boolean_context()){switch(n.operator){case"!":if(r instanceof vn&&"!"==r.operator)return r.expression;break;case"typeof":return t.warn("Boolean expression always true [{file}:{line},{col}]",n.start),e(Kn,n)}r instanceof gn&&"!"==n.operator&&(n=Y(n,r.negate(t)))}return n.evaluate(t)[0]}),gn.DEFMETHOD("lift_sequences",function(n){if(n.option("sequences")){if(this.left instanceof ln){var e=this.left.to_array();return this.left=e.pop(),e.push(this),ln.from_array(e).transform(n)}if(this.right instanceof ln&&this instanceof yn&&!function(n,e){var t=e.option("pure_getters");e.options.pure_getters=!1;var r=n.has_side_effects(e);return e.options.pure_getters=t,r}(this.left,n)){e=this.right.to_array();return this.right=e.pop(),e.push(this),ln.from_array(e).transform(n)}}return this});var un=m("== === != !== * & | ^");n(gn,function(n,t){function r(e,r){if(r||!n.left.has_side_effects(t)&&!n.right.has_side_effects(t)){e&&(n.operator=e);var i=n.left;n.left=n.right,n.right=i}}if(un(n.operator)&&(n.right instanceof Pn&&!(n.left instanceof Pn)&&(n.left instanceof gn&&Ce[n.left.operator]>=Ce[n.operator]||r(null,!0)),/^[!=]==?$/.test(n.operator))){if(n.left instanceof Hn&&n.right instanceof bn){if(n.right.consequent instanceof Hn&&n.right.consequent.definition()===n.left.definition()){if(/^==/.test(n.operator))return n.right.condition;if(/^!=/.test(n.operator))return n.right.condition.negate(t)}if(n.right.alternative instanceof Hn&&n.right.alternative.definition()===n.left.definition()){if(/^==/.test(n.operator))return n.right.condition.negate(t);if(/^!=/.test(n.operator))return n.right.condition}}if(n.right instanceof Hn&&n.left instanceof bn){if(n.left.consequent instanceof Hn&&n.left.consequent.definition()===n.right.definition()){if(/^==/.test(n.operator))return n.left.condition;if(/^!=/.test(n.operator))return n.left.condition.negate(t)}if(n.left.alternative instanceof Hn&&n.left.alternative.definition()===n.right.definition()){if(/^==/.test(n.operator))return n.left.condition.negate(t);if(/^!=/.test(n.operator))return n.left.condition}}}if(n=n.lift_sequences(t),t.option("comparisons"))switch(n.operator){case"===":case"!==":(n.left.is_string(t)&&n.right.is_string(t)||n.left.is_boolean()&&n.right.is_boolean())&&(n.operator=n.operator.substr(0,2));case"==":case"!=":n.left instanceof Rn&&"undefined"==n.left.value&&n.right instanceof vn&&"typeof"==n.right.operator&&t.option("unsafe")&&(n.right.expression instanceof Hn&&n.right.expression.undeclared()||(n.right=n.right.expression,n.left=e(Wn,n.left).optimize(t),2==n.operator.length&&(n.operator+="=")))}if(t.option("conditionals"))if("&&"==n.operator){if((i=n.left.evaluate(t)).length>1)return i[1]?(t.warn("Condition left of && always true [{file}:{line},{col}]",n.start),(o=n.right.evaluate(t))[0]):(t.warn("Condition left of && always false [{file}:{line},{col}]",n.start),i[0])}else if("||"==n.operator){if((i=n.left.evaluate(t)).length>1)return i[1]?(t.warn("Condition left of || always true [{file}:{line},{col}]",n.start),i[0]):(t.warn("Condition left of || always false [{file}:{line},{col}]",n.start),(o=n.right.evaluate(t))[0])}if(t.option("booleans")&&t.in_boolean_context())switch(n.operator){case"&&":var i=n.left.evaluate(t),o=n.right.evaluate(t);if(i.length>1&&!i[1]||o.length>1&&!o[1])return t.warn("Boolean && always false [{file}:{line},{col}]",n.start),n.left.has_side_effects(t)?e(ln,n,{car:n.left,cdr:e(Zn)}).optimize(t):e(Zn,n);if(i.length>1&&i[1])return o[0];if(o.length>1&&o[1])return i[0];break;case"||":i=n.left.evaluate(t),o=n.right.evaluate(t);if(i.length>1&&i[1]||o.length>1&&o[1])return t.warn("Boolean || always true [{file}:{line},{col}]",n.start),n.left.has_side_effects(t)?e(ln,n,{car:n.left,cdr:e(Kn)}).optimize(t):e(Kn,n);if(i.length>1&&!i[1])return o[0];if(o.length>1&&!o[1])return i[0];break;case"+":i=n.left.evaluate(t),o=n.right.evaluate(t);if(i.length>1&&i[0]instanceof Rn&&i[1]||o.length>1&&o[0]instanceof Rn&&o[1])return t.warn("+ in boolean context always true [{file}:{line},{col}]",n.start),e(Kn,n)}if(t.option("comparisons")&&n.is_boolean()){if(!(t.parent()instanceof gn)||t.parent()instanceof yn){var a=e(vn,n,{operator:"!",expression:n.negate(t)});n=Y(n,a)}switch(n.operator){case"<":r(">");break;case"<=":r(">=")}}return"+"==n.operator&&n.right instanceof Rn&&""===n.right.getValue()&&n.left instanceof gn&&"+"==n.left.operator&&n.left.is_string(t)?n.left:(t.option("evaluate")&&"+"==n.operator&&(n.left instanceof Pn&&n.right instanceof gn&&"+"==n.right.operator&&n.right.left instanceof Pn&&n.right.is_string(t)&&(n=e(gn,n,{operator:"+",left:e(Rn,null,{value:""+n.left.getValue()+n.right.left.getValue(),start:n.left.start,end:n.right.left.end}),right:n.right.right})),n.right instanceof Pn&&n.left instanceof gn&&"+"==n.left.operator&&n.left.right instanceof Pn&&n.left.is_string(t)&&(n=e(gn,n,{operator:"+",left:n.left.left,right:e(Rn,null,{value:""+n.left.right.getValue()+n.right.getValue(),start:n.left.right.start,end:n.right.end})})),n.left instanceof gn&&"+"==n.left.operator&&n.left.is_string(t)&&n.left.right instanceof Pn&&n.right instanceof gn&&"+"==n.right.operator&&n.right.left instanceof Pn&&n.right.is_string(t)&&(n=e(gn,n,{operator:"+",left:e(gn,n.left,{operator:"+",left:n.left.left,right:e(Rn,null,{value:""+n.left.right.getValue()+n.right.left.getValue(),start:n.left.right.start,end:n.right.left.end})}),right:n.right.right}))),n.right instanceof gn&&n.right.operator==n.operator&&("&&"==n.operator||"||"==n.operator)?(n.left=e(gn,n.left,{operator:n.operator,left:n.left,right:n.right.left}),n.right=n.right.right,n.transform(t)):n.evaluate(t)[0])}),n(Hn,function(n,r){if(n.undeclared()&&(o=n,!((a=r.parent())instanceof gn&&"="===a.operator&&a.left===o))){var i=r.option("global_defs");if(i&&i.hasOwnProperty(n.name))return t(r,i[n.name],n);switch(n.name){case"undefined":return e(Wn,n);case"NaN":return e(Yn,n).transform(r);case"Infinity":return e(Gn,n).transform(r)}}var o,a;return n}),n(Gn,function(n,t){return e(gn,n,{operator:"/",left:e(In,n,{value:1}),right:e(In,n,{value:0})})}),n(Wn,function(n,t){if(t.option("unsafe")){var r=t.find_parent(H),i=r.find_variable("undefined");if(i){var o=e(Hn,n,{name:"undefined",scope:r,thedef:i});return o.reference(),o}}return n});var sn=["+","-","/","*","%",">>","<<",">>>","|","^","&"];function Dn(n,t){return t.option("booleans")&&t.in_boolean_context()&&!n.has_side_effects(t)?e(Kn,n):n}n(yn,function(n,e){return"="==(n=n.lift_sequences(e)).operator&&n.left instanceof Hn&&n.right instanceof gn&&n.right.left instanceof Hn&&n.right.left.name==n.left.name&&i(n.right.operator,sn)&&(n.operator=n.right.operator+"=",n.right=n.right.right),n}),n(bn,function(n,r){if(!r.option("conditionals"))return n;if(n.condition instanceof ln){var i=n.condition.car;return n.condition=n.condition.cdr,ln.cons(i,n)}var o=n.condition.evaluate(r);if(o.length>1)return o[1]?(r.warn("Condition always true [{file}:{line},{col}]",n.start),n.consequent):(r.warn("Condition always false [{file}:{line},{col}]",n.start),n.alternative);var a=o[0].negate(r);Y(o[0],a)===a&&(n=e(bn,n,{condition:a,consequent:n.alternative,alternative:n.consequent}));var u=n.consequent,s=n.alternative;if(u instanceof yn&&s instanceof yn&&u.operator==s.operator&&u.left.equivalent_to(s.left)&&!u.left.has_side_effects(r))return e(yn,n,{operator:u.operator,left:u.left,right:e(bn,n,{condition:n.condition,consequent:u.right,alternative:s.right})});if(u instanceof cn&&s.TYPE===u.TYPE&&u.args.length==s.args.length&&!u.expression.has_side_effects(r)&&u.expression.equivalent_to(s.expression)){if(0==u.args.length)return e(ln,n,{car:n.condition,cdr:u});if(1==u.args.length)return u.args[0]=e(bn,n,{condition:n.condition,consequent:u.args[0],alternative:s.args[0]}),u}return u instanceof bn&&u.alternative.equivalent_to(s)?e(bn,n,{condition:e(gn,n,{left:n.condition,operator:"&&",right:u.condition}),consequent:u.consequent,alternative:s}):u instanceof Pn&&s instanceof Pn&&u.equivalent_to(s)?n.condition.has_side_effects(r)?ln.from_array([n.condition,t(r,u.value,n)]):t(r,u.value,n):u instanceof Kn&&s instanceof Zn?(n.condition=n.condition.negate(r),e(vn,n.condition,{operator:"!",expression:n.condition})):u instanceof Zn&&s instanceof Kn?n.condition.negate(r):n}),n(Xn,function(n,t){if(t.option("booleans")){var r=t.parent();return r instanceof gn&&("=="==r.operator||"!="==r.operator)?(t.warn("Non-strict equality against boolean: {operator} {value} [{file}:{line},{col}]",{operator:r.operator,value:n.value,file:r.start.file,line:r.start.line,col:r.start.col}),e(In,n,{value:+n.value})):e(vn,n,{operator:"!",expression:e(In,n,{value:1-n.value})})}return n}),n(hn,function(n,t){var r=n.property;if(r instanceof Rn&&t.option("properties")){if(r=r.getValue(),te(r)?t.option("screw_ie8"):_e(r))return e(dn,n,{expression:n.expression,property:r}).optimize(t);var i=parseFloat(r);isNaN(i)||i.toString()!=r||(n.property=e(In,n.property,{value:i}))}return n}),n(dn,function(n,t){var r=n.property;return te(r)&&!t.option("screw_ie8")?e(hn,n,{expression:n.expression,property:e(Rn,n,{value:r})}).optimize(t):n.evaluate(t)[0]}),n(An,Dn),n(wn,Dn),n(Ln,Dn),n(V,function(n,e){return n.value instanceof Wn&&(n.value=null),n})}(),function(){var e={ExpressionStatement:function(n){var e=n.expression;return"Literal"===e.type&&"string"==typeof e.value?new w({start:r(n),end:i(n),value:e.value}):new E({start:r(n),end:i(n),body:u(e)})},TryStatement:function(n){var e=n.handlers||[n.handler];if(e.length>1||n.guardedHandlers&&n.guardedHandlers.length)throw new Error("Multiple catch clauses are not supported.");return new en({start:r(n),end:i(n),body:u(n.block).body,bcatch:u(e[0]),bfinally:n.finalizer?new rn(u(n.finalizer)):null})},Property:function(n){var e=n.key,t="Identifier"==e.type?e.name:e.value,o={start:r(e),end:i(n.value),key:t,value:u(n.value)};switch(n.kind){case"init":return new Dn(o);case"set":return o.value.name=u(e),new Fn(o);case"get":return o.value.name=u(e),new Cn(o)}},ObjectExpression:function(n){return new wn({start:r(n),end:i(n),properties:n.properties.map(function(n){return n.type="Property",u(n)})})},SequenceExpression:function(n){return ln.from_array(n.expressions.map(u))},MemberExpression:function(n){return new(n.computed?hn:dn)({start:r(n),end:i(n),property:n.computed?u(n.property):n.property.name,expression:u(n.object)})},SwitchCase:function(n){return new(n.test?nn:Q)({start:r(n),end:i(n),expression:u(n.test),body:n.consequent.map(u)})},VariableDeclaration:function(n){return new("const"===n.kind?un:an)({start:r(n),end:i(n),definitions:n.declarations.map(u)})},Literal:function(n){var e=n.value,t={start:r(n),end:i(n)};if(null===e)return new Vn(t);switch(typeof e){case"string":return t.value=e,new Rn(t);case"number":return t.value=e,new In(t);case"boolean":return new(e?Kn:Zn)(t);default:var o=n.regex;return o&&o.pattern?t.value=new RegExp(o.pattern,o.flags).toString():t.value=n.regex&&n.raw?n.raw:e,new Ln(t)}},Identifier:function(n){var e=a[a.length-2];return new("LabeledStatement"==e.type?zn:"VariableDeclarator"==e.type&&e.id===n?"const"==e.kind?Tn:Sn:"FunctionExpression"==e.type?e.id===n?qn:$n:"FunctionDeclaration"==e.type?e.id===n?On:$n:"CatchClause"==e.type?Mn:"BreakStatement"==e.type||"ContinueStatement"==e.type?Nn:Hn)({start:r(n),end:i(n),name:n.name})}};function t(n){if("Literal"==n.type)return null!=n.raw?n.raw:n.value+""}function r(n){var e=n.loc,r=e&&e.start,i=n.range;return new g({file:e&&e.source,line:r&&r.line,col:r&&r.column,pos:i?i[0]:n.start,endline:r&&r.line,endcol:r&&r.column,endpos:i?i[0]:n.start,raw:t(n)})}function i(n){var e=n.loc,r=e&&e.end,i=n.range;return new g({file:e&&e.source,line:r&&r.line,col:r&&r.column,pos:i?i[1]:n.end,endline:r&&r.line,endcol:r&&r.column,endpos:i?i[1]:n.end,raw:t(n)})}function o(t,o,a){var l="function From_Moz_"+t+"(M){\n";l+="return new U2."+o.name+"({\nstart: my_start_token(M),\nend: my_end_token(M)";var p="function To_Moz_"+t+"(M){\n";p+="return {\ntype: "+JSON.stringify(t),a&&a.split(/\s*,\s*/).forEach(function(n){var e=/([a-z0-9$_]+)(=|@|>|%)([a-z0-9$_]+)/i.exec(n);if(!e)throw new Error("Can't understand property map: "+n);var t=e[1],r=e[2],i=e[3];switch(l+=",\n"+i+": ",p+=",\n"+t+": ",r){case"@":l+="M."+t+".map(from_moz)",p+="M."+i+".map(to_moz)";break;case">":l+="from_moz(M."+t+")",p+="to_moz(M."+i+")";break;case"=":l+="M."+t,p+="M."+i;break;case"%":l+="from_moz(M."+t+").body",p+="to_moz_block(M)";break;default:throw new Error("Can't understand operator in propmap: "+n)}}),l+="\n})\n}",p+="\n}\n}",l=new Function("U2","my_start_token","my_end_token","from_moz","return("+l+")")(n,r,i,u),p=new Function("to_moz","to_moz_block","return("+p+")")(c,f),e[t]=l,s(o,p)}e.UpdateExpression=e.UnaryExpression=function(n){return new(("prefix"in n?n.prefix:"UnaryExpression"==n.type)?vn:_n)({start:r(n),end:i(n),operator:n.operator,expression:u(n.argument)})},o("Program",N,"body@body"),o("EmptyStatement",k),o("BlockStatement",C,"body@body"),o("IfStatement",X,"test>condition, consequent>body, alternate>alternative"),o("LabeledStatement",B,"label>label, body>body"),o("BreakStatement",J,"label>label"),o("ContinueStatement",G,"label>label"),o("WithStatement",z,"object>expression, body>body"),o("SwitchStatement",Z,"discriminant>expression, cases@body"),o("ReturnStatement",V,"argument>value"),o("ThrowStatement",Y,"argument>value"),o("WhileStatement",O,"test>condition, body>body"),o("DoWhileStatement",$,"test>condition, body>body"),o("ForStatement",q,"init>init, test>condition, update>step, body>body"),o("ForInStatement",M,"left>init, right>object, body>body"),o("DebuggerStatement",A),o("FunctionDeclaration",I,"id>name, params@argnames, body%body"),o("VariableDeclarator",sn,"id>name, init>value"),o("CatchClause",tn,"param>argname, body%body"),o("ThisExpression",jn),o("ArrayExpression",An,"elements@elements"),o("FunctionExpression",R,"id>name, params@argnames, body%body"),o("BinaryExpression",gn,"operator=operator, left>left, right>right"),o("LogicalExpression",gn,"operator=operator, left>left, right>right"),o("AssignmentExpression",yn,"operator=operator, left>left, right>right"),o("ConditionalExpression",bn,"test>condition, consequent>consequent, alternate>alternative"),o("NewExpression",fn,"callee>expression, arguments@args"),o("CallExpression",cn,"callee>expression, arguments@args"),s(w,function(n){return{type:"ExpressionStatement",expression:{type:"Literal",value:n.value}}}),s(E,function(n){return{type:"ExpressionStatement",expression:c(n.body)}}),s(K,function(n){return{type:"SwitchCase",test:c(n.expression),consequent:n.body.map(c)}}),s(en,function(n){return{type:"TryStatement",block:f(n),handler:c(n.bcatch),guardedHandlers:[],finalizer:c(n.bfinally)}}),s(tn,function(n){return{type:"CatchClause",param:c(n.argname),guard:null,body:f(n)}}),s(on,function(n){return{type:"VariableDeclaration",kind:n instanceof un?"const":"var",declarations:n.definitions.map(c)}}),s(ln,function(n){return{type:"SequenceExpression",expressions:n.to_array().map(c)}}),s(pn,function(n){var e=n instanceof hn;return{type:"MemberExpression",object:c(n.expression),computed:e,property:e?c(n.property):{type:"Identifier",name:n.property}}}),s(mn,function(n){return{type:"++"==n.operator||"--"==n.operator?"UpdateExpression":"UnaryExpression",operator:n.operator,prefix:n instanceof vn,argument:c(n.expression)}}),s(gn,function(n){return{type:"&&"==n.operator||"||"==n.operator?"LogicalExpression":"BinaryExpression",left:c(n.left),operator:n.operator,right:c(n.right)}}),s(wn,function(n){return{type:"ObjectExpression",properties:n.properties.map(c)}}),s(En,function(n){var e,t=he(n.key)?{type:"Identifier",name:n.key}:{type:"Literal",value:n.key};return n instanceof Dn?e="init":n instanceof Cn?e="get":n instanceof Fn&&(e="set"),{type:"Property",kind:e,key:t,value:c(n.value)}}),s(kn,function(n){var e=n.definition();return{type:"Identifier",name:e?e.mangled_name||e.name:n.name}}),s(Ln,function(n){var e=n.value;return{type:"Literal",value:e,raw:e.toString(),regex:{pattern:e.source,flags:e.toString().match(/[gimuy]*$/)[0]}}}),s(Pn,function(n){var e=n.value;return"number"==typeof e&&(e<0||0===e&&1/e<0)?{type:"UnaryExpression",operator:"-",prefix:!0,argument:{type:"Literal",value:-e,raw:n.start.raw}}:{type:"Literal",value:e,raw:n.start.raw}}),s(Un,function(n){return{type:"Identifier",name:String(n.value)}}),Xn.DEFMETHOD("to_mozilla_ast",Pn.prototype.to_mozilla_ast),Vn.DEFMETHOD("to_mozilla_ast",Pn.prototype.to_mozilla_ast),Jn.DEFMETHOD("to_mozilla_ast",function(){return null}),F.DEFMETHOD("to_mozilla_ast",C.prototype.to_mozilla_ast),j.DEFMETHOD("to_mozilla_ast",R.prototype.to_mozilla_ast);var a=null;function u(n){a.push(n);var t=null!=n?e[n.type](n):null;return a.pop(),t}function s(n,e){n.DEFMETHOD("to_mozilla_ast",function(){return n=this,t=e(this),r=n.start,i=n.end,null!=r.pos&&null!=i.endpos&&(t.range=[r.pos,i.endpos]),r.line&&(t.loc={start:{line:r.line,column:r.col},end:i.endline?{line:i.endline,column:i.endcol}:null},r.file&&(t.loc.source=r.file)),t;var n,t,r,i})}function c(n){return null!=n?n.to_mozilla_ast():null}function f(n){return{type:"BlockStatement",body:n.body.map(c)}}b.from_mozilla_ast=function(n){var e=a;a=[];var t=u(n);return a=e,t}}(),n.Compressor=Oe,n.DefaultsError=a,n.Dictionary=v,n.JS_Parse_Error=ge,n.MAP=f,n.OutputStream=$e,n.SourceMap=function(n){var e,t=(n=u(n,{file:null,root:null,orig:null,orig_line_diff:0,dest_line_diff:0})).orig&&new MOZ_SourceMap.SourceMapConsumer(n.orig);return e=t?MOZ_SourceMap.SourceMapGenerator.fromSourceMap(t):new MOZ_SourceMap.SourceMapGenerator({file:n.file,sourceRoot:n.root}),{add:function(r,i,o,a,u,s){if(t){var c=t.originalPositionFor({line:a,column:u});if(null===c.source)return;r=c.source,a=c.line,u=c.column,s=c.name||s}e.addMapping({generated:{line:i+n.dest_line_diff,column:o},original:{line:a+n.orig_line_diff,column:u},source:r,name:s})},get:function(){return e},toString:function(){return JSON.stringify(e.toJSON())}}},n.TreeTransformer=Be,n.TreeWalker=Qn,n.base54=Te,n.defaults=u,n.mangle_properties=function(n,e){var t=(e=u(e,{reserved:null,cache:null,only_cache:!1,regex:null})).reserved;null==t&&(t=function(){var n=[];function e(e){l(n,e)}return[Object,Array,Function,Number,String,Boolean,Error,Math,Date,RegExp].forEach(function(n){Object.getOwnPropertyNames(n).map(e),n.prototype&&Object.getOwnPropertyNames(n.prototype).map(e)}),n}());var r=e.cache;null==r&&(r={cname:-1,props:new v});var i=e.regex,o=[],a=[];return n.walk(new Qn(function(n){n instanceof Dn?f(n.key):n instanceof En?f(n.key.name):n instanceof dn?this.parent()instanceof yn&&f(n.property):n instanceof hn&&this.parent()instanceof yn&&function(n){var e={};try{!function n(t){t.walk(new Qn(function(t){if(t instanceof ln)return n(t.cdr),!0;if(t instanceof Rn)return f(t.value),!0;if(t instanceof bn)return n(t.consequent),n(t.alternative),!0;throw e}))}(n)}catch(n){if(n!==e)throw n}}(n.property)})),n.transform(new Be(function(n){n instanceof Dn?n.key=p(n.key):n instanceof En?n.key.name=p(n.key.name):n instanceof dn?n.property=p(n.property):n instanceof hn&&(n.property=function n(e){return e.transform(new Be(function(e){return e instanceof ln?e.cdr=n(e.cdr):e instanceof Rn?e.value=p(e.value):e instanceof bn&&(e.consequent=n(e.consequent),e.alternative=n(e.alternative)),e}))}(n.property))}));function s(n){return!(a.indexOf(n)>=0)&&!(t.indexOf(n)>=0)&&(e.only_cache?r.props.has(n):!/^[0-9.]+$/.test(n))}function c(n){return!(i&&!i.test(n))&&!(t.indexOf(n)>=0)&&(r.props.has(n)||o.indexOf(n)>=0)}function f(n){s(n)&&l(o,n),c(n)||l(a,n)}function p(n){if(!c(n))return n;var e=r.props.get(n);if(!e){do{e=Te(++r.cname)}while(!s(e));r.props.set(n,e)}return e}},n.merge=s,n.parse=xe,n.push_uniq=l,n.string_template=p,n.is_identifier=he,e.UglifyJS=n}({},function(){return this}());
$(function(){mkTool("js-minify",function(r){var o=UglifyJS.parse(r);o.figure_out_scope();var e=UglifyJS.Compressor();return(o=o.transform(e)).print_to_string()},{exceptionFn:function(r){return r instanceof UglifyJS.JS_Parse_Error?($("#action-error").show(),void $("#action-error").text(r.message)):e.message?($("#action-error").show(),void $("#action-error").text("Failed compressing: "+r.message)):($("#action-error").show(),void $("#action-error").text("Something went wrong while minifying..."))}})});	