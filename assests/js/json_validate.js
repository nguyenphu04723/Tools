var undoStack=[];function mkUndo(t){var n="#"+t+"-submit-undo",r="#"+t+"-text";$(n).click(function(t){t.preventDefault();var e=undoStack.pop();$(r).val(e),0==undoStack.length&&$(n).hide()})}function mkTool(t,n,r){r=r||{};var e="#"+t+"-submit-undo",o="#"+t+"-text";$("#"+t+"-submit").click(function(){var t=$(o).val();if(r.allowEmptyText||t.length){$("#action-error").hide();try{if(r.asyncResultFn)n(t,r.asyncResultFn);else{var a=n(t,r.asyncResultFn);$(o).val(a)}}catch(t){return void(r.exceptionFn&&r.exceptionFn(t))}undoStack.push(t),$(e).show()}}),mkUndo(t)}$(function(){function t(t,n,r,e){if(0!=$("#tool-"+t).length){var o,a="#submit";$("#file-select").on("change",function(t){$("#action-error").hide();var r=t.target.files[0];if(r.type!=n.inputMime)return $("#action-error").show(),void $("#action-error").text("Selected file is not a "+n.inputHumanFormat);o=r,$(a).attr("disabled",!1)}),$("#drag-and-drop").on("dragover",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").addClass("hover")}),$("#drag-and-drop").on("dragenter",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").addClass("hover")}),$("#drag-and-drop").on("dragleave",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").removeClass("hover")}),$("#drag-and-drop").on("dragend",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").removeClass("hover")}),$("#drag-and-drop").on("drop",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").removeClass("hover"),$("#action-error").hide(),t.dataTransfer=t.originalEvent.dataTransfer;var r=t.dataTransfer.files[0];if(r.type!=n.inputMime)return $("#action-error").show(),void $("#action-error").text("Selected file is not a "+n.inputHumanFormat);$("#drag-and-drop-selected").text("Selected "+r.name),o=r,$(a).attr("disabled",!1)}),$(a).click(function(){var t=new FileReader;t.onload=function(){var n=new Image;n.onload=function(){var t=$("<canvas>")[0];t.width=n.width,t.height=n.height,t.getContext("2d").drawImage(n,0,0),t.toBlob(function(t){var n=o.name.lastIndexOf(".");if(-1!=n)var e=o.name.substring(0,n)+"."+r.outputExt;else e=o.name+"."+optputOpts.outputExt;saveAs(t,e)},r.outputMime)},n.src=t.result},t.readAsDataURL(o)})}}function n(t){var n="";if(t instanceof Array){if(t.length){var r=t[0];if(0==(i=Object.keys(r)).length)for(var e=0;e<t.length;e++){n+=t[e],e!=t.length-1&&(n+="\t")}else{for(e=0;e<i.length;e++){n+=i[e],e!=i.length-1&&(n+="\t")}n+="\n";for(e=0;e<t.length;e++){for(var o=0;o<i.length;o++){var a=i[o];n+=t[e][a],o!=i.length-1&&(n+="\t")}n+="\n"}}}}else{var i=Object.keys(t);for(e=0;e<i.length;e++){n+=i[e],e!=i.length-1&&(n+="\t")}n+="\n";for(o=0;o<i.length;o++){n+=t[a=i[o]],o!=i.length-1&&(n+="\t")}n+="\n"}return n}if($("#copy-to-clipboard").click(function(t){t.preventDefault(),$("#tool-implementation textarea").select(),document.execCommand("copy")}),mkTool("json-to-tsv",function(t){return n(JSON.parse(t))},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("json-to-xml",function(t){try{var n=JSON.parse(t)}catch(t){throw new Error("Invalid JSON")}return vkbeautify.xml(json2xml(n))},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("yaml-to-xml",function(t){try{var n=YAML.parse(t)}catch(t){throw new Error("Invalid YAML")}return vkbeautify.xml(json2xml(n))},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("yaml-to-csv",function(t){try{var n=YAML.parse(t)}catch(t){throw new Error("Invalid YAML")}return json2csv({data:n})},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("json-to-text",function(t){try{var n=JSON.parse(t)}catch(t){throw new Error("Invalid JSON")}return jsonToText(n)},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("json-to-yaml",function(t){try{var n=JSON.parse(t)}catch(t){throw new Error("Invalid JSON")}return YAML.stringify(n)},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("yaml-to-json",function(t){try{var n=YAML.parse(t)}catch(t){throw new Error("Invalid YAML")}return JSON.stringify(n,0,2)},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("yaml-to-tsv",function(t){try{var r=YAML.parse(t)}catch(t){throw new Error("Invalid YAML")}return n(r)},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("tsv-extract-column",function(t){var n=$("#tsv-extract-column-number").val();if(!/^\d+$/.test(n))throw new Error("Invalid column number");for(var r=(t=t.replace("\r\n","\n")).split("\n"),e="",o=0;o<r.length;o++){var a=r[o];if(a.length)e+=a.split("\t")[n-1]+"\n";else e+="\n"}return e},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("tsv-delete-column",function(t){var n=$("#tsv-delete-column-number").val();if(!/^\d+$/.test(n))throw new Error("Invalid column number");for(var r=(t=t.replace("\r\n","\n")).split("\n"),e="",o=0;o<r.length;o++){var a=r[o];if(a.length){var i=a.split("\t");i.splice(n-1,1),e+=i.join("\t")+"\n"}else e+="\n"}return e},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("tsv-replace-column",function(t){var n=$("#tsv-replace-column-number").val();if(!/^\d+$/.test(n))throw new Error("Invalid column number");var r=$("#tsv-replace-column-new-column").val(),e=(t=t.replace("\r\n","\n")).split("\n"),o="";if(0==r.length)for(var a=0;a<e.length;a++){(l=e[a].split("\t")).splice(l-1,1),o+=l.join("\t")+"\n"}else{var i=r.split("\n");if(i.length<e.length){$("#action-error").show(),$("#action-error").text("The new column has less rows than the existing TSV. Replacing anyway.");for(a=0;a<e.length-i.length;a++)i.push("")}i.length>e.length&&($("#action-error").show(),$("#action-error").text("The new column has more rows than the existing TSV. Replacing anyway."),i.splice(e.length,i.length));for(a=0;a<e.length;a++){var l;(l=e[a].split("\t"))[n-1]=i[a],o+=l.join("\t")+"\n"}}return o},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("tsv-append-column",function(t){var n=$("#tsv-append-column-new-column").val(),r=(t=t.replace("\r\n","\n")).split("\n"),e="";if(0==n.length)for(var o=0;o<r.length;o++){(i=r[o].split("\t")).push(""),e+=i.join("\t")+"\n"}else{var a=n.split("\n");if(a.length<r.length){$("#action-error").show(),$("#action-error").text("The new column has less rows than the existing TSV. Appending anyway.");for(o=0;o<r.length-a.length;o++)a.push("")}a.length>r.length&&($("#action-error").show(),$("#action-error").text("The new column has more rows than the existing TSV. Appending anyway."),a.splice(r.length,a.length));for(o=0;o<r.length;o++){var i;(i=r[o].split("\t")).push(a[o]),e+=i.join("\t")+"\n"}}return e},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("tsv-insert-column",function(t){var n=$("#tsv-insert-column-number").val();if(!/^-?\d+$/.test(n))throw new Error("Invalid column number");var r=$("#tsv-insert-column-new-column").val(),e=(t=t.replace("\r\n","\n")).split("\n"),o="";if(0==r.length)for(var a=0;a<e.length;a++){var i=e[a].split("\t");if(-1==n){var l=i.length;i.splice(l,0,"")}else i.splice(n-1,0,"");o+=i.join("\t")+"\n"}else{var s=r.split("\n");if(s.length<e.length){$("#action-error").show(),$("#action-error").text("The new column has less rows than the existing TSV. Inserting anyway.");for(a=0;a<e.length-s.length;a++)s.push("")}s.length>e.length&&($("#action-error").show(),$("#action-error").text("The new column has more rows than the existing TSV. Inserting anyway."),s.splice(e.length,s.length));for(a=0;a<e.length;a++){i=e[a].split("\t");if(-1==n){l=i.length;i.splice(l,0,s[a])}else i.splice(n-1,0,s[a]);o+=i.join("\t")+"\n"}}return o},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("extract-column",function(t){var n=$("#extract-column-number").val(),r=$("#extract-column-delimiter").val();if(!/^\d+$/.test(n))throw new Error("Invalid column number");for(var e=(t=t.replace("\r\n","\n")).split("\n"),o="",a=0;a<e.length;a++){var i=e[a];if(i.length){if(" "==r)var l=i.split(/\s+/g);else l=i.split(r);o+=l[n-1]+"\n"}else o+="\n"}return o},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("delete-column",function(t){var n=$("#delete-column-number").val(),r=$("#delete-column-delimiter").val();if(!/^\d+$/.test(n))throw new Error("Invalid column number");for(var e=(t=t.replace("\r\n","\n")).split("\n"),o="",a=0;a<e.length;a++){var i=e[a];if(i.length){if(" "==r)var l=i.split(/\s+/g);else l=i.split(r);l.splice(n-1,1),o+=l.join(r)+"\n"}else o+="\n"}return o},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("replace-column",function(t){var n=$("#replace-column-number").val(),r=$("#replace-column-delimiter").val();if(!/^\d+$/.test(n))throw new Error("Invalid column number");var e=$("#replace-column-new-column").val(),o=(t=t.replace("\r\n","\n")).split("\n"),a="";if(0==e.length)for(var i=0;i<o.length;i++){(s=o[i].split(r)).splice(s-1,1),a+=s.join(r)+"\n"}else{var l=e.split("\n");if(l.length<o.length){$("#action-error").show(),$("#action-error").text("The new column has less rows than the existing TSV. Replacing anyway.");for(i=0;i<o.length-l.length;i++)l.push("")}l.length>o.length&&($("#action-error").show(),$("#action-error").text("The new column has more rows than the existing TSV. Replacing anyway."),l.splice(o.length,l.length));for(i=0;i<o.length;i++){var s;(s=o[i].split(r))[n-1]=l[i],a+=s.join(r)+"\n"}}return a},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("swap-columns",function(t){var n=$("#swap-columns-col1").val(),r=$("#swap-columns-col2").val(),e=$("#swap-columns-delimiter").val();if(!/^\d+$/.test(n))throw new Error("Invalid column 1 number");if(!/^\d+$/.test(r))throw new Error("Invalid column 2 number");if(n==r)throw new Error("Can't swap the same column");for(var o=(t=t.replace("\r\n","\n")).split("\n"),a="",i=0;i<o.length;i++){var l=o[i];if(l.length){if(" "==e)var s=l.split(/\s+/g);else s=l.split(e);var c=s[n-1],p=s[r-1];s[n-1]=p,s[r-1]=c,a+=s.join(e)+"\n"}else a+="\n"}return a},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("change-delimiter",function(t){for(var n=(t=t.replace("\r\n","\n")).split("\n"),r=$("#change-delimiter-old-delimiter").val(),e=$("#change-delimiter-new-delimiter").val(),o="",a=0;a<n.length;a++){var i=n[a];if(" "==r)var l=i.split(/\s+/g);else l=i.split(r);o+=(l=l.join(e))+"\n"}return o}),mkTool("csv-columns-to-rows",function(t,n){var r=(t=t.replace("\r\n","\n")).split("\n");r.splice(0,0,r[0]),t=r.join("\n");var e=new(0,window.csvtojson.Converter)({});e.transform=function(t,n,r){t.rowIndex_xyzzy=r,t.row_xyzzy=n},e.fromString(t,function(r,e){if(r)throw new Error(r);n(e,t)})},{asyncResultFn:function(t,n){for(var r=[],e=0;e<t.length;e++)for(var o=t[e].row_xyzzy,a=0;a<o.length;a++)void 0==r[a]&&(r[a]=[]),r[a].push(o[a]);var i=json2csv({data:r});i=i.split("\n").slice(1).join("\n"),$("#csv-columns-to-rows-text").val(i)},exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("csv-rows-to-columns",function(t,n){var r=(t=t.replace("\r\n","\n")).split("\n");r.splice(0,0,r[0]),t=r.join("\n");var e=new(0,window.csvtojson.Converter)({});e.transform=function(t,n,r){t.rowIndex_xyzzy=r,t.row_xyzzy=n},e.fromString(t,function(r,e){if(r)throw new Error(r);n(e,t)})},{asyncResultFn:function(t,n){for(var r=[],e=0;e<t.length;e++)for(var o=t[e].row_xyzzy,a=0;a<o.length;a++)void 0==r[a]&&(r[a]=[]),r[a].push(o[a]);var i=json2csv({data:r});i=i.split("\n").slice(1).join("\n"),$("#csv-rows-to-columns-text").val(i)},exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("csv-swap-columns",function(t,n){var r=$("#csv-swap-columns-col1").val();if(!/^\d+$/.test(r))throw new Error("Invalid column 1 number");var e=$("#csv-swap-columns-col2").val();if(!/^\d+$/.test(e))throw new Error("Invalid column 2 number");if(r==e)throw new Error("Can't swap the same column");var o=(t=t.replace("\r\n","\n")).split("\n");o.splice(0,0,o[0]),t=o.join("\n");var a=new(0,window.csvtojson.Converter)({});a.transform=function(t,n,r){t.rowIndex_xyzzy=r,t.row_xyzzy=n},a.fromString(t,function(o,a){if(o)throw new Error(o);n(a,t,r,e)})},{asyncResultFn:function(t,n,r,e){if(void 0===t[0].row_xyzzy[r-1]){var o="Column "+r+" doesn't exist";return $("#action-error").show(),void $("#action-error").text(o)}if(void 0===t[0].row_xyzzy[e-1]){o="Column "+e+" doesn't exist";return $("#action-error").show(),void $("#action-error").text(o)}for(var a=[],i=0;i<t.length;i++){var l=t[i].row_xyzzy,s=l[r-1],c=l[e-1];l[r-1]=c,l[e-1]=s,a.push(l)}var p=json2csv({data:a});p=p.split("\n").slice(1).join("\n"),$("#csv-swap-columns-text").val(p)},exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("csv-replace-column",function(t,n){var r=$("#csv-replace-column-number").val();if(!/^\d+$/.test(r))throw new Error("Invalid column number");var e=$("#csv-replace-column-new-column").val(),o=(t=t.replace("\r\n","\n")).split("\n");o.splice(0,0,o[0]),t=o.join("\n");var a=new(0,window.csvtojson.Converter)({});a.transform=function(t,n,r){t.rowIndex_xyzzy=r,t.row_xyzzy=n},a.fromString(t,function(o,a){if(o)throw new Error(o);n(a,t,r,e)})},{asyncResultFn:function(t,n,r,e){if(void 0===t[0].row_xyzzy[r-1]){var o="Column "+r+" doesn't exist";return $("#action-error").show(),void $("#action-error").text(o)}if(0==e.length){for(var a=[],i=0;i<t.length;i++)t[i].row_xyzzy.splice(r-1,1),a.push(t[i].row_xyzzy);l=(l=json2csv({data:a})).split("\n").slice(1).join("\n"),$("#csv-replace-column-text").val(l)}else{var l,s=e.split("\n");if(s.length<t.length){$("#action-error").show(),$("#action-error").text("The new column has less rows than the existing CSV. Replacing anyway.");for(i=0;i<t.length-s.length;i++)s.push("")}s.length>t.length&&($("#action-error").show(),$("#action-error").text("The new column has more rows than the existing CSV. Replacing anyway."),s.splice(t.length,s.length));for(a=[],i=0;i<t.length;i++)t[i].row_xyzzy[r-1]=s[i],a.push(t[i].row_xyzzy);l=(l=json2csv({data:a})).split("\n").slice(1).join("\n"),$("#csv-replace-column-text").val(l)}},exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("csv-append-column",function(t,n){var r=$("#csv-append-column-new-column").val(),e=(t=t.replace("\r\n","\n")).split("\n");e.splice(0,0,e[0]),t=e.join("\n");var o=new(0,window.csvtojson.Converter)({});o.transform=function(t,n,r){t.rowIndex_xyzzy=r,t.row_xyzzy=n},o.fromString(t,function(e,o){if(e)throw new Error(e);n(o,t,r)})},{asyncResultFn:function(t,n,r){var e=r.split("\n");if(e.length<t.length){$("#action-error").show(),$("#action-error").text("The new column has less rows than the existing CSV. Appending anyway.");for(var o=0;o<t.length-e.length;o++)e.push("")}e.length>t.length&&($("#action-error").show(),$("#action-error").text("The new column has more rows than the existing CSV. Appending anyway."),e.splice(t.length,e.length));var a=t[0].row_xyzzy.length,i=[];for(o=0;o<t.length;o++)t[o].row_xyzzy[a]=e[o],i.push(t[o].row_xyzzy);var l=json2csv({data:i});l=l.split("\n").slice(1).join("\n"),$("#csv-append-column-text").val(l)},exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("csv-insert-column",function(t,n){var r=$("#csv-insert-column-number").val();if(!/^-?\d+$/.test(r))throw new Error("Invalid column number");var e=$("#csv-insert-column-new-column").val(),o=(t=t.replace("\r\n","\n")).split("\n");o.splice(0,0,o[0]),t=o.join("\n");var a=new(0,window.csvtojson.Converter)({});a.transform=function(t,n,r){t.rowIndex_xyzzy=r,t.row_xyzzy=n},a.fromString(t,function(o,a){if(o)throw new Error(o);n(a,t,r,e)})},{asyncResultFn:function(t,n,r,e){if(0==e.length){for(var o=[],a=0;a<t.length;a++){if(-1==r){var i=t[a].row_xyzzy.length;t[a].row_xyzzy.splice(i,0,"")}else t[a].row_xyzzy.splice(r-1,0,"");o.push(t[a].row_xyzzy)}l=(l=json2csv({data:o})).split("\n").slice(1).join("\n"),$("#csv-insert-column-text").val(l)}else{var l,s=e.split("\n");if(s.length<t.length){$("#action-error").show(),$("#action-error").text("The new column has less rows than the existing CSV. Inserting anyway.");for(a=0;a<t.length-s.length;a++)s.push("")}s.length>t.length&&($("#action-error").show(),$("#action-error").text("The new column has more rows than the existing CSV. Inserting anyway."),s.splice(t.length,s.length));for(o=[],a=0;a<t.length;a++){if(-1==r){i=t[a].row_xyzzy.length;t[a].row_xyzzy.splice(i,0,s[a])}else t[a].row_xyzzy.splice(r-1,0,s[a]);o.push(t[a].row_xyzzy)}l=(l=json2csv({data:o})).split("\n").slice(1).join("\n"),$("#csv-insert-column-text").val(l)}},exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("csv-change-delimiter",function(t,n){var r=$("#csv-change-delimiter-new-delimiter").val(),e=(t=t.replace("\r\n","\n")).split("\n");e.splice(0,0,e[0]),t=e.join("\n"),new(0,window.csvtojson.Converter)({}).fromString(t,function(e,o){if(e)throw new Error(e);n(o,t,r)})},{asyncResultFn:function(t,n,r){var e=json2csv({data:t,del:r});e=e.split("\n").slice(1).join("\n"),$("#csv-change-delimiter-text").val(e)},exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("tsv-change-delimiter",function(t){for(var n=(t=t.replace("\r\n","\n")).split("\n"),r=$("#tsv-change-delimiter-new-delimiter").val(),e="",o=0;o<n.length;o++){var a=n[o].split("\t");e+=(a=a.join(r))+"\n"}return e}),mkTool("tsv-swap-columns",function(t){var n=$("#tsv-swap-columns-col1").val();if(!/^\d+$/.test(n))throw new Error("Invalid column 1 number");var r=$("#tsv-swap-columns-col2").val();if(!/^\d+$/.test(r))throw new Error("Invalid column 2 number");if(n==r)throw new Error("Can't swap the same column");for(var e=(t=t.replace("\r\n","\n")).split("\n"),o="",a=0;a<e.length;a++){var i=e[a];if(i.length){var l=i.split("\t"),s=l[n-1],c=l[r-1];l[n-1]=c,l[r-1]=s,o+=l.join("\t")+"\n"}else o+="\n"}return o},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("tsv-columns-to-rows",function(t,n){for(var r=(t=t.replace("\r\n","\n")).split("\n"),e=[],o=0;o<r.length;o++)for(var a=r[o].split("\t"),i=0;i<a.length;i++)void 0==e[i]&&(e[i]=[]),e[i].push(a[i]);for(o=0;o<e.length;o++)e[o]=e[o].join("\t");return e.join("\n")}),mkTool("tsv-rows-to-columns",function(t,n){for(var r=(t=t.replace("\r\n","\n")).split("\n"),e=[],o=0;o<r.length;o++)for(var a=r[o].split("\t"),i=0;i<a.length;i++)void 0==e[i]&&(e[i]=[]),e[i].push(a[i]);for(o=0;o<e.length;o++)e[o]=e[o].join("\t");return e.join("\n")}),mkTool("text-columns-to-rows",function(t,n){for(var r=(t=t.replace("\r\n","\n")).split("\n"),e=$("#text-columns-to-rows-delimiter").val(),o=[],a=0;a<r.length;a++){var i=r[a];if(" "==e)var l=i.split(/\s+/g);else l=i.split(e);for(var s=0;s<l.length;s++)void 0==o[s]&&(o[s]=[]),o[s].push(l[s])}for(a=0;a<o.length;a++)o[a]=o[a].join(e);return o.join("\n")}),mkTool("text-rows-to-columns",function(t,n){for(var r=(t=t.replace("\r\n","\n")).split("\n"),e=$("#text-rows-to-columns-delimiter").val(),o=[],a=0;a<r.length;a++){var i=r[a];if(" "==e)var l=i.split(/\s+/g);else l=i.split(e);for(var s=0;s<l.length;s++)void 0==o[s]&&(o[s]=[]),o[s].push(l[s])}for(a=0;a<o.length;a++)o[a]=o[a].join(e);return o.join("\n")}),mkTool("tsv-transpose",function(t){for(var n=(t=t.replace("\r\n","\n")).split("\n"),r=[],e=0;e<n.length;e++)for(var o=n[e].split("\t"),a=0;a<o.length;a++)void 0==r[a]&&(r[a]=[]),r[a].push(o[a]);for(e=0;e<r.length;e++)r[e]=r[e].join("\t");return r.join("\n")}),mkTool("text-transpose",function(t){for(var n=(t=t.replace("\r\n","\n")).split("\n"),r=$("#text-transpose-delimiter").val(),e=[],o=0;o<n.length;o++){var a=n[o];if(" "==r)var i=a.split(/\s+/g);else i=a.split(r);for(var l=0;l<i.length;l++)void 0==e[l]&&(e[l]=[]),e[l].push(i[l])}for(o=0;o<e.length;o++)e[o]=e[o].join(r);return e.join("\n")}),mkTool("xml-prettify",function(t){return vkbeautify.xml(t)}),mkTool("xml-minify",function(t){return vkbeautify.xmlmin(t)}),mkTool("mysql-password",function(t){var n=CryptoJS.SHA1(t);return("*"+CryptoJS.SHA1(n)).toUpperCase()}),mkTool("mariadb-password",function(t){var n=CryptoJS.SHA1(t);return("*"+CryptoJS.SHA1(n)).toUpperCase()}),mkTool("postgres-password",function(t){var n=$("#postgres-username").val();return"md5"+CryptoJS.MD5(t.toString()+n.toString())}),mkTool("bcrypt",function(t,n){var r=new bCrypt,e=$("#bcrypt-pass").val(),o=$("#bcrypt-rounds").val()||10;r.hashpw(e,r.gensalt(o),function(t){n(t)})},{allowEmptyText:!0,asyncResultFn:function(t){$("#bcrypt-text").val(t)},exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("bcrypt-check",function(t,n){for(var r=t.split("\n"),e=new bCrypt,o=$("#bcrypt-check-pass").val(),a=0;a<r.length;a++){var i=r[a];0!=i.length&&function(){var t=a;e.checkpw(o,i,function(r){n(i,t,r)})}()}},{asyncResultFn:function(t,n,r){var e=$("#bcrypt-check-text").val().split("\n"),o=!1;1==r&&(o=!0),e[n]=o?"Valid: "+e[n]:"Invalid: "+e[n],$("#bcrypt-check-text").val(e.join("\n"))},exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),"undefined"!=typeof scrypt_module_factory){function r(t){mkTool("scrypt",function(n){var r=$("#scrypt-pass").val(),e=$("#scrypt-salt").val(),o=$("#scrypt-output-size").val(),a=$("#scrypt-n").val(),i=$("#scrypt-r").val(),l=$("#scrypt-p").val(),s=t.crypto_scrypt(t.encode_utf8(r),t.encode_utf8(e),a,i,l,o);return t.to_hex(s)},{allowEmptyText:!0,exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}})}scrypt_module_factory(r)}if("undefined"!=typeof scrypt_module_factory){function r(t){mkTool("scrypt-check",function(n){for(var r=n.split("\n"),e=$("#scrypt-check-pass").val(),o=$("#scrypt-check-salt").val(),a=($("#scrypt-check-output-size").val(),$("#scrypt-check-n").val()),i=$("#scrypt-check-r").val(),l=$("#scrypt-check-p").val(),s="",c=0;c<r.length;c++){var p=r[c];if(0==p.length)s+="\n";else{var u=t.crypto_scrypt(t.encode_utf8(e),t.encode_utf8(o),a,i,l,p.length/2);s+=(u=t.to_hex(u))==p?"Valid: "+p+"\n":"Invalid: "+p+"\n"}}return s},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}})}scrypt_module_factory(r)}if(mkTool("xor-encrypt",function(t){var n=$("#xor-encrypt-pass").val();if(0==n.length)throw new Error("empty pass");for(var r="",e=0;e<t.length;e++){var o=(t[e].charCodeAt(0)^n[e%n.length].charCodeAt(0)).toString(16);1==o.length&&(o="0"+o),r+=o,e!=t.length-1&&(r+="-")}return r},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("xor-decrypt",function(t){var n=$("#xor-decrypt-pass").val();if(0==n.length)throw new Error("empty pass");for(var r=t.split("-"),e="",o=0;o<r.length;o++){var a=parseInt(r[o],16),i=n[o%n.length].charCodeAt(0);e+=String.fromCharCode(a^i)}return e},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("aes-encrypt",function(t){var n=$("#aes-encrypt-pass").val();return CryptoJS.AES.encrypt(t,n)}),mkTool("aes-decrypt",function(t){var n=$("#aes-decrypt-pass").val(),r=CryptoJS.AES.decrypt(t,n);return CryptoJS.enc.Utf8.stringify(r)}),mkTool("rc4-encrypt",function(t){var n=$("#rc4-encrypt-pass").val();return CryptoJS.RC4.encrypt(t,n)}),mkTool("rc4-decrypt",function(t){var n=$("#rc4-decrypt-pass").val(),r=CryptoJS.RC4.decrypt(t,n);return CryptoJS.enc.Utf8.stringify(r)}),mkTool("des-encrypt",function(t){var n=$("#des-encrypt-pass").val();return CryptoJS.DES.encrypt(t,n)}),mkTool("des-decrypt",function(t){var n=$("#des-decrypt-pass").val(),r=CryptoJS.DES.decrypt(t,n);return CryptoJS.enc.Utf8.stringify(r)}),mkTool("triple-des-encrypt",function(t){var n=$("#triple-des-encrypt-pass").val();return CryptoJS.TripleDES.encrypt(t,n)}),mkTool("triple-des-decrypt",function(t){var n=$("#triple-des-decrypt-pass").val(),r=CryptoJS.TripleDES.decrypt(t,n);return CryptoJS.enc.Utf8.stringify(r)}),mkTool("rabbit-encrypt",function(t){var n=$("#rabbit-encrypt-pass").val();return CryptoJS.Rabbit.encrypt(t,n)}),mkTool("rabbit-decrypt",function(t){var n=$("#rabbit-decrypt-pass").val(),r=CryptoJS.Rabbit.decrypt(t,n);return CryptoJS.enc.Utf8.stringify(r)}),mkTool("ntlm-hash",function(t){var n=t.split("").join("\0")+"\0";return md4(n).toUpperCase()}),mkTool("md2-hash",function(t){return md2(t)},{allowEmptyText:!0}),mkTool("md4-hash",function(t){return md4(t)},{allowEmptyText:!0}),mkTool("md5-hash",function(t){return CryptoJS.MD5(t)},{allowEmptyText:!0}),mkTool("md6-hash",function(t){var n=parseInt($("#md6-hash-size").val(),10);return(new md6hash).hex(t,n)},{allowEmptyText:!0}),mkTool("ripemd128-hash",function(t){return CryptoJS.RIPEMD128(t)},{allowEmptyText:!0}),mkTool("ripemd160-hash",function(t){return CryptoJS.RIPEMD160(t)},{allowEmptyText:!0}),mkTool("ripemd256-hash",function(t){return CryptoJS.RIPEMD256(t)},{allowEmptyText:!0}),mkTool("ripemd320-hash",function(t){return CryptoJS.RIPEMD320(t)},{allowEmptyText:!0}),mkTool("sha1-hash",function(t){return CryptoJS.SHA1(t)},{allowEmptyText:!0}),mkTool("sha2-hash",function(t){var n=parseInt($("#sha2-hash-size").val(),10);return 224==n?CryptoJS.SHA224(t):256==n?CryptoJS.SHA256(t):384==n?CryptoJS.SHA384(t):512==n?CryptoJS.SHA512(t):"unknown hash size"},{allowEmptyText:!0}),mkTool("sha3-hash",function(t){var n=parseInt($("#sha3-hash-size").val(),10);if(224==n)var r=sha3_224(t);else if(256==n)r=sha3_256(t);else if(384==n)r=sha3_384(t);else if(512==n)r=sha3_512(t);return r},{allowEmptyText:!0}),mkTool("sha224-hash",function(t){return CryptoJS.SHA224(t)},{allowEmptyText:!0}),mkTool("sha256-hash",function(t){return CryptoJS.SHA256(t)},{allowEmptyText:!0}),mkTool("sha384-hash",function(t){return CryptoJS.SHA384(t)},{allowEmptyText:!0}),mkTool("sha512-hash",function(t){return CryptoJS.SHA512(t)},{allowEmptyText:!0}),mkTool("crc16-hash",function(t){return crc16(t)},{allowEmptyText:!0}),mkTool("crc32-hash",function(t){return(CRC32.str(t)>>>0).toString(16)},{allowEmptyText:!0}),mkTool("adler32-hash",function(t){for(var n=(ADLER32.str(t)>>>0).toString(16),r=8-n.length;r-- >0;)n="0"+n;return n},{allowEmptyText:!0}),mkTool("whirlpool-hash",function(t){return Whirlpool(t)},{allowEmptyText:!0}),mkTool("seconds-to-hms",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=0;e<n.length;e++){var o=n[e];if(/(\d+)/.test(o)){var a=o;r+=Math.floor(a/3600)+":"+Math.floor(a/60)+":"+(a=a%60)}else r+=o;r+="\n"}return r}),mkTool("hms-to-seconds",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=0;e<n.length;e++){var o=n[e];if(/(\d+)/.test(o)){var a=o.split(":");r+=(3600*parseInt(a[0],10)+60*parseInt(a[1],10)+parseInt(a[2],10)).toString()}else r+=o;r+="\n"}return r}),mkTool("dec-to-gray",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=0;e<n.length;e++){var o=n[e];if(o=(o=o.replace(/^\s+/,"")).replace(/\s+$/,""),/(\d+)/.test(o)){for(var a=parseInt(o,10),i=(a^a>>1).toString(2);i.length<8;)i="0"+i;r+=i}r+="\n"}return r},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("gray-to-dec",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=0;e<n.length;e++){var o=n[e];if(o=(o=o.replace(/^\s+/,"")).replace(/\s+$/,""),/[01]+/.test(o)){for(var a=parseInt(o,2),i=a>>1;0!=i;i>>=1)a^=i;r+=a.toString()}else r+=o;r+="\n"}return r},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("bin-to-gray",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=0;e<n.length;e++){var o=n[e];if(o=(o=o.replace(/^\s+/,"")).replace(/\s+$/,""),/(\d+)/.test(o)){for(var a=parseInt(o,2),i=(a^a>>1).toString(2);i.length<8;)i="0"+i;r+=i}r+="\n"}return r},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("gray-to-bin",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=0;e<n.length;e++){var o=n[e];if(o=(o=o.replace(/^\s+/,"")).replace(/\s+$/,""),/[01]+/.test(o)){for(var a=parseInt(o,2),i=a>>1;0!=i;i>>=1)a^=i;for(var l=a.toString(2);l.length<8;)l="0"+l;r+=l}else r+=o;r+="\n"}return r},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("hex-to-gray",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=0;e<n.length;e++){var o=n[e];if(o=(o=(o=o.replace(/^\s+/,"")).replace(/\s+$/,"")).replace(/^0x/i,""),/[0-9a-f]/i.test(o)){for(var a=parseInt(o,16),i=(a^a>>1).toString(2);i.length<8;)i="0"+i;r+=i}r+="\n"}return r},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("gray-to-hex",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=0;e<n.length;e++){var o=n[e];if(o=(o=o.replace(/^\s+/,"")).replace(/\s+$/,""),/[01]+/.test(o)){for(var a=parseInt(o,2),i=a>>1;0!=i;i>>=1)a^=i;r+="0x"+a.toString(16)}else r+=o;r+="\n"}return r},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("markdown-to-html",function(t){return(new showdown.Converter).makeHtml(t)}),mkTool("text-to-binary",function(t){for(var n=[],r=0;r<t.length;r++)for(var e=unescape(encodeURIComponent(t[r])),o=0;o<e.length;o++)n.push(e[o].charCodeAt(0));var a="",i=$("#text-to-binary-format-field input").val();for(r=0;r<n.length;r++){for(var l=n[r].toString(2),s=l;s.length<8;)s="0"+s.toString();var c=i;a+=c=(c=c.replace(/%0b/g,s)).replace(/%b/g,l)}return a}),$("#text-to-binary-format").click(function(t){t.preventDefault(),$("#text-to-binary-format-field").slideToggle()}),mkTool("binary-to-text",function(t){t=t.replace(/\s+/g," "),bytes=t.split(" ");for(var n=0;n<bytes.length;n++)if(bytes[n].length<8)for(var r=bytes[n].length;8!=r;r++)bytes[n]="0"+bytes[n];if((t=bytes.join("")).length%8!=0)throw new Error("Input binary doesnt split into groups of 8 bits evenly.");var e="";for(n=0;n<t.length;n+=8)e+=String.fromCharCode(parseInt(t.substr(n,8),2));return e},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("text-to-octal",function(t){for(var n=[],r=0;r<t.length;r++)for(var e=unescape(encodeURIComponent(t[r])),o=0;o<e.length;o++)n.push(e[o].charCodeAt(0));var a="",i=$("#text-to-octal-format-field input").val();for(r=0;r<n.length;r++){var l=n[r].toString(8),s=i;a+=s=s.replace(/%o/g,l)}return a}),$("#text-to-octal-format").click(function(t){t.preventDefault(),$("#text-to-octal-format-field").slideToggle()}),mkTool("octal-to-text",function(t){t=t.replace(/\s+/g," "),bytes=t.split(" ");for(var n=0;n<bytes.length;n++)if(bytes[n].length<3)for(var r=bytes[n].length;3!=r;r++)bytes[n]="0"+bytes[n];if((t=bytes.join("")).length%3!=0)throw new Error("Input octal doesnt split into groups of 3 digits evenly.");var e="";for(n=0;n<t.length;n+=3)e+=String.fromCharCode(parseInt(t.substr(n,3),8));return e},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("text-to-ascii",function(t){for(var n=[],r=0;r<t.length;r++)for(var e=unescape(encodeURIComponent(t[r])),o=0;o<e.length;o++)n.push(e[o].charCodeAt(0));var a="";for(r=0;r<n.length;r++){var i=n[r].toString(10),l="%d ";a+=l=l.replace(/%d/g,i)}return a}),mkTool("ascii-to-text",function(t){t=t.replace(/\s+/g," "),bytes=t.split(" ");for(var n="",r=0;r<bytes.length;r++)n+=String.fromCharCode(bytes[r]);return n},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),$("#text-to-decimal-format").click(function(t){t.preventDefault(),$("#text-to-decimal-format-field").slideToggle()}),mkTool("text-to-decimal",function(t){for(var n=[],r=0;r<t.length;r++)for(var e=unescape(encodeURIComponent(t[r])),o=0;o<e.length;o++)n.push(e[o].charCodeAt(0));var a="",i=$("#text-to-decimal-format-field input").val();for(r=0;r<n.length;r++){var l=n[r].toString(10),s=i;a+=s=s.replace(/%d/g,l)}return a}),mkTool("decimal-to-text",function(t){t=t.replace(/\s+/g," "),bytes=t.split(" ");for(var n="",r=0;r<bytes.length;r++)n+=String.fromCharCode(bytes[r]);return n},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("text-to-hex",function(t){for(var n=[],r=0;r<t.length;r++)for(var e=unescape(encodeURIComponent(t[r])),o=0;o<e.length;o++)n.push(e[o].charCodeAt(0));var a="",i=$("#text-to-hex-format-field input").val();for(r=0;r<n.length;r++){var l=n[r].toString(16);1==l.length&&(l="0"+l);var s=i;a+=s=s.replace(/%x/g,l)}return a}),$("#text-to-hex-format").click(function(t){t.preventDefault(),$("#text-to-hex-format-field").slideToggle()}),mkTool("hex-to-text",function(t){t=(t=t.replace(/0x/g,"")).replace(/\s+/g," "),bytes=t.split(" ");for(var n=0;n<bytes.length;n++)1==bytes[n].length&&(bytes[n]="0"+bytes[n]);if((t=bytes.join("")).length%2!=0)throw new Error("Uneven number of hex characters.");var r="";for(n=0;n<t.length;n+=2)r+=String.fromCharCode(parseInt(t.substr(n,2),16));return r},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t.message)}}),mkTool("text-lowercase",function(t){for(var n="",r=0;r<t.length;r++)n+=t[r].toLowerCase();return n}),mkTool("text-uppercase",function(t){for(var n="",r=0;r<t.length;r++)n+=t[r].toUpperCase();return n}),mkTool("text-titlecase",function(t){return t=t.toLowerCase(),titleCase(t)}),mkTool("text-capitalize",function(t){for(var n=(t=t.replace(/\r\n/,"\n")).split("\n"),r=0;r<n.length;r++){for(var e=n[r].split(" "),o=0;o<e.length;o++)e[o]=e[o].charAt(0).toUpperCase()+e[o].substring(1);n[r]=e.join(" ")}return n.join("\n")}),mkTool("text-invert-case",function(t){for(var n="",r=0;r<t.length;r++){n+=t[r].toLowerCase()==t[r]?t[r].toUpperCase():t[r].toLowerCase()}return n}),mkTool("text-randomcase",function(t){for(var n="",r=0;r<t.length;r++){var e=t[r].toLowerCase();Math.random()<.5?n+=e:n+=e.toUpperCase()}return n}),mkTool("spaces-to-tabs",function(t){var n=$("#spaces-to-tabs-count").val(),r=new RegExp(" {"+n+"}","g");return t.replace(r,"\t")}),mkTool("tabs-to-spaces",function(t){for(var n=$("#tabs-to-spaces-count").val(),r="",e=1;e<=n;e++)r+=" ";return t.replace(/\t/g,r)}),mkTool("spaces-to-newlines",function(t){return t.replace(/\s+/g,"\n")}),mkTool("newlines-to-spaces",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r=[],e=0;e<n.length;e++)/\w/.test(n[e])&&r.push(n[e]);return r.join(" ")}),mkTool("add-slashes",function(t){return t=(t=(t=(t=(t=t.replace(/\\/g,"\\\\")).replace(/\t/g,"\\t")).replace(/\n/g,"\\n")).replace(/'/g,"\\'")).replace(/"/g,'\\"')}),mkTool("strip-slashes",function(t){return t.replace(/\\(.?)/g,function(t,n){return"\\"==n?"\\":"t"==n?"\t":"n"==n?"\n":""==n?"":n})}),mkTool("remove-accents",function(t){return t=removeAccents(t)}),mkTool("remove-whitespace",function(t){return t=(t=(t=(t=t.replace(/ +/g," ")).replace(/\t+/g," ")).replace(/^\s+/g,"")).replace(/\s+$/g,"")}),mkTool("remove-all-whitespace",function(t){return t=t.replace(/\s+/g,"")}),mkTool("remove-punctuation",function(t){return t=t.replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,\-.\/:;<=>?@\[\]^_`{|}~]/g,"")}),mkTool("text-repeat",function(t){for(var n=$("#text-repeat-count").val(),r="",e=1;e<=n;e++)r+=t;return r}),mkTool("text-right-align",function(t){for(var n=t.split("\n"),r=0,e=0;e<n.length;e++)n[e].length>r&&(r=n[e].length);ret="";for(e=0;e<n.length;e++){for(var o=n[e],a=r-o.length,i=o,l=0;l<a;l++)i=" "+i.toString();ret+=i+"\n"}return ret}),mkTool("text-left-pad",function(t){var n=$("#text-left-pad-width").val(),r=$("#text-left-pad-symbol").val(),e=t.split("\n");ret="";for(var o=0;o<e.length;o++){var a=e[o];if(a.length>=n)ret+=a;else{for(var i=n-a.length,l=a,s=0;s<i;s++)l=r.toString()+l.toString();ret+=l}ret+="\n"}return ret}),mkTool("text-right-pad",function(t){var n=$("#text-right-pad-width").val(),r=$("#text-right-pad-symbol").val(),e=t.split("\n");ret="";for(var o=0;o<e.length;o++){var a=e[o];if(a.length>=n)ret+=a;else{for(var i=n-a.length,l=a,s=0;s<i;s++)l+=r.toString();ret+=l}ret+="\n"}return ret}),mkTool("text-replace",function(t){var n=$("#text-replace-from").val(),r=$("#text-replace-to").val();return"\\n"==r?r="\n":"\\t"==r&&(r="\t"),t.split(n).join(r)}),mkTool("text-reverse",function(t){return t.split("").reverse().join("")}),mkTool("text-length",function(t){return t.length}),mkTool("text-truncate",function(t){var n=t.split("\n"),r=$("#text-truncate-length").val();ret="";for(var e=0;e<n.length;e++){var o=n[e];o.length>r&&(o=o.substr(0,r)),ret+=o+"\n"}return ret}),mkTool("text-trim",function(t){var n=t.split("\n");ret="";for(var r=0;r<n.length;r++){var e=n[r];e=(e=e.replace(/^\s+/g,"")).replace(/\s+$/g,""),ret+=e+"\n"}return ret}),mkTool("merge-lists",function(t){for(var n=t.split("\n"),r=$("#merge-lists-text2").val().split("\n"),e=$("#merge-lists-delimiter").val(),o="",a=0;a<n.length;a++){var i=n[a],l=r[a];if(void 0===l)break;o+=i+""+e+l+"\n"}return o}),mkTool("zip-lists",function(t){for(var n=t.split("\n"),r=$("#zip-lists-text2").val().split("\n"),e="",o=0;o<n.length;o++){var a=n[o],i=r[o];if(void 0===i)break;e+=a+"\n",e+=i+"\n"}return e}),mkTool("common-elements",function(t){for(var n=t.split("\n"),r=$("#common-elements-text2").val().split("\n"),e={},o=0;o<n.length;o++){e[n[o]]=1}var a="";for(o=0;o<r.length;o++){var i=r[o];void 0!==e[i]&&(a+=i+"\n")}return $("#common-elements-text2").val(""),a}),mkTool("distinct-elements",function(t){for(var n=t.split("\n"),r=$("#distinct-elements-text2").val().split("\n"),e={},o=0;o<n.length;o++){e[l=n[o]]=1}var a={};for(o=0;o<r.length;o++){a[s=r[o]]=1}var i="";for(o=0;o<n.length;o++){var l;void 0===e[l=n[o]]&&void 0!==a[l]?i+=l+"\n":void 0!==e[l]&&void 0===a[l]&&(i+=l+"\n")}for(o=0;o<r.length;o++){var s;void 0===e[s=r[o]]&&void 0!==a[s]?i+=s+"\n":void 0!==e[s]&&void 0===a[s]&&(i+=s+"\n")}return $("#distinct-elements-text2").val(""),i}),mkTool("grep",function(t){var n=$("#grep-regex").val(),r=$("#grep-invert").is(":checked"),e=n.match(/^\/(.*?)\/([gimuy]*)$/);if(e)var o=new RegExp(e[1],e[2]);else o=new RegExp(n);for(var a=(t=t.replace(/\r\n/g,"\n")).split("\n"),i="",l=0;l<a.length;l++){var s=a[l];r?o.test(s)||(i+=s+"\n"):o.test(s)&&(i+=s+"\n")}return i}),mkTool("head",function(t){for(var n=$("#head-how-many").val(),r=(t=t.replace(/\r\n/g,"\n")).split("\n"),e="",o=0;o<n&&!(o>=r.length);o++)e+=r[o]+"\n";return e}),mkTool("tail",function(t){var n=$("#tail-how-many").val(),r=(t=t.replace(/\r\n/g,"\n")).split("\n");r=r.reverse();for(var e=[],o=0;o<n&&!(o>=r.length);o++)e.push(r[o]);return(e=e.reverse()).join("\n")}),mkTool("extract-lines",function(t){for(var n=$("#extract-lines-start").val(),r=$("#extract-lines-end").val(),e=(t=t.replace(/\r\n/g,"\n")).split("\n"),o="",a=n-1;a<=r-1&&!(a>=e.length);a++)o+=e[a]+"\n";return o}),mkTool("letter-count",function(t){return t.length}),$("#number-lines-format").click(function(t){t.preventDefault(),$("#number-lines-field").slideToggle()}),mkTool("number-lines",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=$('#number-lines-field input[name="format"]').val(),o=0;o<n.length;o++){var a=n[o];r+=e.replace("NR",o+1)+a+"\n"}return r}),mkTool("prefix-lines",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=$('#prefix-lines-field input[name="prefix"]').val(),o=0;o<n.length;o++){r+=e+n[o]+"\n"}return r}),mkTool("suffix-lines",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=$('#suffix-lines-field input[name="suffix"]').val(),o=0;o<n.length;o++){r+=n[o]+e+"\n"}return r}),mkTool("prefix-suffix-lines",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=$('#prefix-suffix-lines-field input[name="prefix"]').val(),o=$('#prefix-suffix-lines-field input[name="suffix"]').val(),a=0;a<n.length;a++){r+=e+n[a]+o+"\n"}return r}),mkTool("longest-line",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=0;e<n.length;e++){var o=n[e];o.length>r.length&&(r=o)}return r}),mkTool("shortest-line",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=-1,o=0;o<n.length;o++){var a=n[o];a.length&&(-1==e||a.length<r.length)&&(r=a,e=a.length)}return r}),mkTool("duplicate-lines",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r={},e="",o=0;o<n.length;o++){var a=n[o];r[a]||(r[a]=1,e+=a+"\n")}return e}),mkTool("empty-lines",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=0;e<n.length;e++){var o=n[e];/^[\s\t]*$/.test(o)||(r+=o+"\n")}return r}),mkTool("random-lines",function(t){var n=(t=t.replace(/\r\n/g,"\n")).split("\n");return(n=function(t){for(var n,r,e=t.length;0!==e;)r=Math.floor(Math.random()*e),n=t[e-=1],t[e]=t[r],t[r]=n;return t}(n)).join("\n")}),mkTool("random-letters",function(t){var n=(t=t.replace(/\r\n/g,"\n")).split("");return(n=function(t){for(var n,r,e=t.length;0!==e;)r=Math.floor(Math.random()*e),n=t[e-=1],t[e]=t[r],t[r]=n;return t}(n)).join("")}),mkTool("join-lines",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r=[],e=$("#join-lines-symbol").val(),o=0;o<n.length;o++)/\w/.test(n[o])&&r.push(n[o]);return r.join(e)}),mkTool("filter-lines",function(t){for(var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r="",e=$("#filter-lines-pattern").val(),o=$("#filter-lines-invert").is(":checked"),a=0;a<n.length;a++)o?n[a].indexOf(e)>=0||(r+=n[a]+"\n"):n[a].indexOf(e)>=0&&(r+=n[a]+"\n");return r}),mkTool("text-split",function(t){var n=$("#text-split-symbol").val();return t.split(n).join("\n")}),mkTool("reverse-lines",function(t){var n=(t=t.replace(/\r\n/g,"\n")).split("\n");return n.reverse(),n.join("\n")}),mkTool("text-sort",function(t){var n=(t=t.replace(/\r\n/g,"\n")).split("\n");return n.sort(),n.join("\n")}),mkTool("numeric-sort",function(t){var n=(t=t.replace(/\r\n/g,"\n")).split("\n");return n.sort(function(t,n){return parseInt(t,10)-parseInt(n,10)}),n.join("\n")}),mkTool("word-sort",function(t){var n=(t=(t=(t=t.replace(/[?.,!"]/g," ")).replace(/\s+$/g,"")).replace(/^\s+/g,"")).split(/\s+/);return n.sort(function(t,n){return t.toLowerCase()<n.toLowerCase()?-1:t.toLowerCase()>n.toLowerCase()?1:0}),n.join(" ")}),mkTool("line-length-sort",function(t){var n=(t=t.replace(/\r\n/g,"\n")).split("\n"),r=$("#line-length-sort-format").val();return n.sort(function(t,n){return"s2l"==r?t.length-n.length:n.length-t.length}),n.join("\n")}),mkTool("ip-sort",function(t){var n=(t=t.replace(/\r\n/g,"\n")).split("\n");return n.sort(function(t,n){var r=t.split("."),e=n.split(".");return 256*parseInt(r[0],10)*256*256+256*parseInt(r[1],10)*256+256*parseInt(r[2],10)+parseInt(r[3],10)-(256*parseInt(e[0],10)*256*256+256*parseInt(e[1],10)*256+256*parseInt(e[2],10)+parseInt(e[3],10))}),n.join("\n")}),mkTool("word-wrap",function(t){var n=$("#word-wrap-length").val();return wordwrap(n)(t)}),mkTool("word-split",function(t){return t.split(/\s+/g).join("\n")}),mkTool("word-count",function(t){return t.match(/\S+/g).length}),mkTool("line-count",function(t){return t.split("\n").length}),mkTool("paragraph-count",function(t){for(var n=t.split(/\n\n+/g),r=0,e=0;e<n.length;e++)0!=n[e].length&&r++;return r}),mkTool("text-from-regex",function(t){for(var n=parseInt($("#text-from-regex-how-many").val(),10),r=$("#text-from-regex-regex").val(),e="",o=1;o<=n;o++){e+=new RandExp(r).gen(),e+="\n"}return e},{allowEmptyText:!0,exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("regex-replace",function(t){var n=$("#regex-replace-regex").val(),r=n.match(/^\/(.*?)\/([gimuy]*)$/);if(r)var e=new RegExp(r[1],r[2]);else e=new RegExp(n);var o=$("#regex-replace-to").val();return t=t.replace(e,o)},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("regex-extract-matches",function(t){var n=$("#regex-extract-matches-regex").val(),r=n.match(/^\/(.*?)\/([gimuy]*)$/);if(r)var e=new RegExp(r[1],r[2]);else e=new RegExp(n);var o=t.match(e),a="";if(o)for(var i=0;i<o.length;i++)a+=o[i],a+="\n";return a},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("extract-emails",function(t){var n=t.match(/[a-z0-9._%+-]+@[a-z0-9-]+\.([a-z0-9]+)/gi),r="";if(n)for(var e=0;e<n.length;e++)r+=n[e],r+="\n";return r}),mkTool("extract-urls",function(t){var n=new RegExp("(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?","gi"),r=t.match(n),e="";if(r)for(var o=0;o<r.length;o++)e+=r[o],e+="\n";return e},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("extract-numbers",function(t){var n=t.match(/-?[0-9](\.[0-9]+)?/gi),r="";if(n)for(var e=0;e<n.length;e++)r+=n[e],r+="\n";return r},{exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("text-info",function(t){for(var n=t.length,r=t.match(/\S+/g).length,e=t.split("\n").length,o=t.split(/\n\n+/g),a=0,i=0;i<o.length;i++)0!=o[i].length&&a++;var l=t.split(/[.?!]+/),s=0;for(i=0;i<l.length;i++)/\w/.test(l[i])&&s++;var c={},p={},u=0,m=0,f=0,h=t.split("");for(i=0;i<h.length;i++){var g=h[i];void 0===c[g]?c[g]=1:c[g]++;var v=g.charCodeAt(0);v>=0&&v<=127?u++:v>127&&v<=255?m++:f++}var d=t.split(/\s+/g);for(i=0;i<d.length;i++){var w=d[i].toLowerCase();(w=w.replace(/[,.?!]+/,"")).length&&(void 0===p[w]?p[w]=1:p[w]++)}var $="Text statistics:\nLength:      "+n+"\nWords:       "+r+"\nSentences:   "+s+"\nLines:       "+e+"\nParagraphs:  "+a+"\n\nAscii Characters (0-127):            "+u+"\nExtended Ascii Characters (127-255): "+m+"\nAll Ascii Characters (0-255):        "+(m+u)+"\nUnicode Characters (255+):           "+f+"\n\nWord statistics:\n",x=Object.keys(p).sort(function(t,n){return p[n]-p[t]});for(i=0;i<x.length;i++){$+=(T=x[i])+": "+p[T]+"\n"}$+="\nCharacter statistics:\n";var y=Object.keys(c).sort(function(t,n){return c[n]-c[t]});for(i=0;i<y.length;i++){var T,k=T=y[i];"10"==T.charCodeAt(0)?k="â†µ":"32"==T.charCodeAt(0)&&(k="âŽµ"),$+=k+": "+c[T]+"\n"}return $}),mkTool("random-pick",function(t){for(var n=t.split("\n"),r=parseInt($("#random-pick-how-many").val(),10),e=[],o=0;o<r;o++){var a=parseInt(Math.random()*n.length,10);e.push(n[a]),n.splice(a,1)}return e.join("\n")}),$("#random-string-format").change(function(){"custom"==$("#random-string-format").val()?$("#random-string-custom-format").slideDown():$("#random-string-custom-format").slideUp()}),mkTool("random-string",function(){var t=$("#random-string-length").val(),n=$("#random-string-format").val(),r="abcdefghijklmnopqrstuvwxyz",e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",a="abcdefghijklmnopqrstuvwxyz0123456789",i="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",s="0123456789";if("custom"==n){var c=$("#random-string-custom-format input").val();if(0==c.length)return""}for(var p="",u=0;u<t;u++){if("alphalc"==n)p+=r.charAt(Math.random()*r.length);else if("alphauc"==n){p+=e.charAt(Math.random()*e.length)}else if("alphamix"==n){p+=o.charAt(Math.random()*o.length)}else if("alphalcnum"==n){p+=a.charAt(Math.random()*a.length)}else if("alphaucnum"==n){p+=i.charAt(Math.random()*i.length)}else if("alphamixnum"==n){p+=l.charAt(Math.random()*l.length)}else if("num"==n){p+=s.charAt(Math.random()*s.length)}else if("custom"==n){p+=c.charAt(Math.random()*c.length)}}return p},{allowEmptyText:!0}),$("#random-password-format").change(function(){"custom"==$("#random-password-format").val()?$("#random-password-custom-format").slideDown():$("#random-password-custom-format").slideUp()}),mkTool("random-password",function(){var t=$("#random-password-length").val(),n=$("#random-password-format").val(),r="abcdefghijklmnopqrstuvwxyz",e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",a="abcdefghijklmnopqrstuvwxyz0123456789",i="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",s="0123456789";if("custom"==n){var c=$("#random-password-custom-format input").val();if(0==c.length)return""}for(var p="",u=0;u<t;u++){if("alphalc"==n)p+=r.charAt(Math.random()*r.length);else if("alphauc"==n){p+=e.charAt(Math.random()*e.length)}else if("alphamix"==n){p+=o.charAt(Math.random()*o.length)}else if("alphalcnum"==n){p+=a.charAt(Math.random()*a.length)}else if("alphaucnum"==n){p+=i.charAt(Math.random()*i.length)}else if("alphamixnum"==n){p+=l.charAt(Math.random()*l.length)}else if("num"==n){p+=s.charAt(Math.random()*s.length)}else if("custom"==n){p+=c.charAt(Math.random()*c.length)}}return p},{allowEmptyText:!0}),mkTool("random-number",function(){for(var t=parseInt($("#random-number-start").val(),10),n=parseInt($("#random-number-end").val(),10),r=parseInt($("#random-number-how-many").val(),10),e="",o=0;o<r;o++)e+=parseInt(Math.random()*(n-t+1)+t,10).toString(),o!=r-1&&(e+="\n");return e},{allowEmptyText:!0}),mkTool("random-bin",function(){for(var t=parseInt($("#random-bin-how-many-digits").val(),10),n=parseInt($("#random-bin-how-many-results").val(),10),r="",e=0;e<n;e++){for(var o="",a=0;a<t;a++){o+=parseInt(2*Math.random(),10)}r+=o,r+="\n"}return r},{allowEmptyText:!0}),mkTool("random-oct",function(){for(var t=parseInt($("#random-oct-how-many-digits").val(),10),n=parseInt($("#random-oct-how-many-results").val(),10),r="",e=0;e<n;e++){for(var o="",a=0;a<t;a++){o+=parseInt(8*Math.random(),10)}r+=o,r+="\n"}return r},{allowEmptyText:!0}),mkTool("random-dec",function(){for(var t=parseInt($("#random-dec-how-many-digits").val(),10),n=parseInt($("#random-dec-how-many-results").val(),10),r="",e=0;e<n;e++){for(var o="",a=0;a<t;a++){o+=parseInt(10*Math.random(),10)}r+=o,r+="\n"}return r},{allowEmptyText:!0}),mkTool("random-hex",function(){for(var t=parseInt($("#random-hex-how-many-digits").val(),10),n=parseInt($("#random-hex-how-many-results").val(),10),r="",e=0;e<n;e++){for(var o="",a=0;a<t;a++){o+=parseInt(16*Math.random(),10).toString(16)}r+=o,r+="\n"}return r},{allowEmptyText:!0}),mkTool("random-fractions",function(){for(var t=parseInt($("#random-fractions-start").val(),10),n=parseInt($("#random-fractions-end").val(),10),r=parseInt($("#random-fractions-how-many").val(),10),e=parseInt($("#random-fractions-precision").val(),10),o="",a=0;a<r;a++)o+=(Math.random()*(n-t)+t).toFixed(e).toString(),a!=r-1&&(o+="\n");return o},{allowEmptyText:!0}),$("#random-ip-range").click(function(t){t.preventDefault(),$("#random-ip-range-field").slideToggle()}),mkTool("random-ip",function(){var t=parseInt($("#random-ip-how-many").val(),10),n=$('#random-ip-range-field input[name="start"]').val(),r=$('#random-ip-range-field input[name="end"]').val();function e(t,n){return parseInt(parseInt(t,10)+Math.random()*(parseInt(n,10)-parseInt(t,10)+1),10).toString()}for(var o="",a=0;a<t;a++){o+=e(n.split(".")[0],r.split(".")[0])+"."+e(n.split(".")[1],r.split(".")[1])+"."+e(n.split(".")[2],r.split(".")[2])+"."+e(n.split(".")[3],r.split(".")[3]),a!=t-1&&(o+="\n")}return o},{allowEmptyText:!0}),$("#random-mac-range").click(function(t){t.preventDefault(),$("#random-mac-range-field").slideToggle()}),mkTool("random-mac",function(){var t=parseInt($("#random-mac-how-many").val(),10),n=$('#random-mac-range-field input[name="start"]').val(),r=$('#random-mac-range-field input[name="end"]').val();function e(t,n){return parseInt(parseInt(t,16)+Math.random()*(parseInt(n,16)-parseInt(t,16)),16)}for(var o="",a=0;a<t;a++){var i=e(n.split(":")[0],r.split(":")[0]).toString(16);1==(i=parseInt(i,10).toString(16)).length&&(i="0"+i);var l=e(n.split(":")[1],r.split(":")[1]).toString(16);1==(l=parseInt(l,10).toString(16)).length&&(l="0"+l);var s=e(n.split(":")[2],r.split(":")[2]).toString(16);1==(s=parseInt(s,10).toString(16)).length&&(s="0"+s);var c=e(n.split(":")[3],r.split(":")[3]).toString(16);1==(c=parseInt(c,10).toString(16)).length&&(c="0"+c);var p=e(n.split(":")[4],r.split(":")[4]).toString(16);1==(p=parseInt(p,10).toString(16)).length&&(p="0"+p);var u=e(n.split(":")[5],r.split(":")[5]).toString(16);1==(u=parseInt(u,10).toString(16)).length&&(u="0"+u),o+=i+":"+l+":"+s+":"+c+":"+p+":"+u,a!=t-1&&(o+="\n")}return o},{allowEmptyText:!0}),$("#random-date-format").change(function(){"custom"==$("#random-date-format").val()?$("#random-date-custom-format").slideDown():$("#random-date-custom-format").slideUp()}),$("#random-date-range").click(function(t){t.preventDefault(),$("#random-date-range-field").slideToggle()}),mkTool("random-date",function(){var t=parseInt($("#random-date-how-many").val(),10),n=$("#random-date-format").val(),r=$('#random-date-range-field input[name="start"]').val(),e=$('#random-date-range-field input[name="end"]').val(),o=new Date(r).getTime(),a=new Date(e).getTime();if(isNaN(o))o=new Date(1900,0,1).getTime();if(isNaN(a))a=new Date(2099,0,31).getTime();for(var i="",l=0;l<t;l++){var s=new Date(o+Math.random()*(a-o+1e3)),c=s.getFullYear(),p=s.getFullYear().toString().substr(2,2),u=["January","February","March","April","May","June","July","August","September","October","November","December"][s.getMonth()],m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][s.getMonth()],f=s.getMonth()+1;f<10&&(f="0"+f.toString());var h=s.getDate(),g=s.getDate();g<10&&(g="0"+g.toString());var v=s.getHours(),d=s.getHours();d<10&&(d="0"+d.toString());var w=s.getMinutes(),x=s.getMinutes();x<10&&(x="0"+x.toString());var y=s.getSeconds(),T=s.getSeconds();if(T<10&&(T="0"+T.toString()),"yyyy-mm-dd-hh-mm-ss"==n)i+=[c,f,g].join("-")+" "+[d,x,T].join(":");else if("yyyy-dd-mm-hh-mm-ss"==n)i+=[c,g,f].join("-")+" "+[d,x,T].join(":");else if("mm-dd-yyyy-hh-mm-ss"==n)i+=[f,g,c].join("-")+" "+[d,x,T].join(":");else if("iso8601"==n){var k=s.toISOString();i+=k=k.replace(/\.\d+Z/,"Z")}else if("year-month-date-hh-mm-ss"==n)i+=[c,u,g].join(" ")+" "+[d,x,T].join(":");else if("year-date-month-hh-mm-ss"==n)i+=[c,u,g].join(" ")+" "+[d,x,T].join(":");else if("month-date-year-hh-mm-ss"==n)i+=[u,g,c].join(" ")+" "+[d,x,T].join(":");else if("custom"==n){var b=$("#random-date-custom-format input").val();i+=b=(b=(b=(b=(b=(b=(b=(b=(b=(b=(b=(b=(b=b.replace("YYYY",c)).replace("YY",p)).replace("MM",f)).replace("month",u)).replace("mon",m)).replace("DD",g)).replace("d",h)).replace("hh",d)).replace("h",v)).replace("mm",x)).replace("m",w)).replace("ss",T)).replace("s",y)}l!=t-1&&(i+="\n")}return i},{allowEmptyText:!0}),$("#random-time-format").change(function(){"custom"==$("#random-time-format").val()?$("#random-time-custom-format").slideDown():$("#random-time-custom-format").slideUp()}),$("#random-time-range").click(function(t){t.preventDefault(),$("#random-time-range-field").slideToggle()}),mkTool("random-time",function(){var t=parseInt($("#random-time-how-many").val(),10),n=$("#random-time-format").val(),r=$('#random-time-range-field input[name="start"]').val(),e=$('#random-time-range-field input[name="end"]').val();if(!/\d+:\d+:\d+/.test(r))throw new Error("Invalid start time, doesn't match h:m:s");if(!/\d+:\d+:\d+/.test(e))throw new Error("Invalid end time, doesn't match h:m:s");var o=parseInt(r.split(":")[0],10),a=parseInt(r.split(":")[1],10),i=parseInt(r.split(":")[2],10),l=parseInt(e.split(":")[0],10),s=parseInt(e.split(":")[1],10),c=parseInt(e.split(":")[2],10);if(isNaN(o))throw new Error("Start time hour isn't a valid number");if(isNaN(a))throw new Error("Start time minute isn't a valid number");if(isNaN(i))throw new Error("Start time second isn't a valid number");if(isNaN(l))throw new Error("End time hour isn't a valid number");if(isNaN(s))throw new Error("End time minute isn't a valid number");if(isNaN(c))throw new Error("End time second isn't a valid number");if(o>24)throw new Error("Start time hour bigger than 24");if(a>60)throw new Error("Start time minute bigger than 60");if(i>60)throw new Error("Start time second bigger than 60");if(l>24)throw new Error("End time hour bigger than 24");if(s>60)throw new Error("End time minute bigger than 60");if(c>60)throw new Error("End time second bigger than 60");var p=3600*o+60*a+i,u=3600*l+60*s+c;if(p>u)throw new Error("Start time is bigger than end time");for(var m,f,h="",g=0;g<t;g++){var v=(m=p,f=u,parseInt(Math.random()*(f-m+1)+m,10).toString()),d=parseInt(v/3600,10),w=d;1==w.toString().length&&(w="0"+w);var x=parseInt(v%3600/60,10),y=x;1==y.toString().length&&(y="0"+y);var T=parseInt(v%60,10),k=T;1==k.toString().length&&(k="0"+k);var b="am";if(d>=12&&(d-=12,b="pm"),"hh-mm-ss"==n)h+=w+":"+y+":"+k;else if("h-m-s"==n)h+=d+":"+x+":"+T;else if("h-m-s-am-pm"==n)h+=d+":"+x+":"+T+" "+b;else if("custom"==n){var S=$("#random-time-custom-format input").val();h+=S=(S=(S=(S=(S=(S=(S=S.replace("hh",w)).replace("h",d)).replace("mm",y)).replace("m",x)).replace("ss",k)).replace("s",T)).replace("ampm",b)}h+="\n"}return h},{allowEmptyText:!0,exceptionFn:function(t){$("#action-error").show(),$("#action-error").text(t)}}),mkTool("prime-numbers",function(){for(var t=parseInt($("#prime-numbers-how-many").val(),10),n=[],r=parseInt($("#prime-numbers-start").val(),10);;r++){isPrime=!0,upTo=Math.floor(Math.sqrt(r));for(var e=2;e<=upTo;e++)if(r%e==0){isPrime=!1;break}if(isPrime&&(n.push(r),n.length>=t))break}return n.join("\n")},{allowEmptyText:!0}),mkTool("fibonacci-numbers",function(){var t=parseInt($("#fibonacci-numbers-how-many").val(),10),n=parseInt($("#fibonacci-numbers-start").val(),10),r=[],e=1,o=1,a=1;for(t>1&&1==n&&r.push(e),t>2&&1==n&&r.push(o);!(r.length>=t);)a=e+o,e=o,a>=n&&r.push(a),o=a;return r.join("\n")},{allowEmptyText:!0}),mkTool("pi-digits",function(){var t=parseInt($("#pi-digits-how-many").val(),10);if(0==t)return"3";Decimal.config({precision:t+2});for(var n=new Decimal(0),r=new Decimal(1),e=new Decimal(2),o=new Decimal(4),a=r,i=n,l=t+2,s=n,c=n;c.lte(l);c=c.plus(r)){var p=o.div(s.plus(1)).minus(e.div(s.plus(4))).minus(r.div(s.plus(5))).minus(r.div(s.plus(6)));i=i.plus(a.times(p)),a=a.div(16),s=s.plus(8)}return i.toString().substr(0,i.toString().length-1)},{allowEmptyText:!0}),mkTool("e-digits",function(){var t=parseInt($("#e-digits-how-many").val(),10);if(0==t)return"2";function n(t){if(0==t)return new Decimal(1);for(var n=new Decimal(1),r=new Decimal(1);r.lte(t);r=r.plus(new Decimal(1)))n=n.mul(r);return n}Decimal.config({precision:t+100});for(var r=new Decimal(1),e=t+100,o=new Decimal(1);o.lte(e);o=o.plus(new Decimal(1))){var a=new Decimal(1);a=a.div(n(o.toFixed())),r=r.plus(a)}return r.toString().substr(0,t+2)},{allowEmptyText:!0}),mkTool("miles-to-km",function(t){for(var n=t.split("\n"),r="",e=0;e<n.length;e++){var o=n[e],a=parseFloat(o);if(NaN==a)r+=o+"\n";else r+=(1.609344*a).toFixed(4)+"\n"}return r}),mkTool("km-to-miles",function(t){for(var n=t.split("\n"),r="",e=0;e<n.length;e++){var o=n[e],a=parseFloat(o);if(NaN==a)r+=o+"\n";else r+=(a/1.609344).toFixed(4)+"\n"}return r}),mkTool("c-to-f",function(t){for(var n=t.split("\n"),r="",e=0;e<n.length;e++){var o=n[e],a=parseFloat(o);if(NaN==a)r+=o+"\n";else r+=(1.8*a+32).toFixed(4)+"\n"}return r}),mkTool("f-to-c",function(t){for(var n=t.split("\n"),r="",e=0;e<n.length;e++){var o=n[e],a=parseFloat(o);if(NaN==a)r+=o+"\n";else r+=((a-32)/1.8).toFixed(4)+"\n"}return r}),mkTool("deg-to-rad",function(t){for(var n=t.split("\n"),r="",e=0;e<n.length;e++){var o=n[e],a=parseFloat(o);if(NaN==a)r+=o+"\n";else r+=(a*Math.PI/180).toFixed(4)+"\n"}return r}),mkTool("rad-to-deg",function(t){for(var n=t.split("\n"),r="",e=0;e<n.length;e++){var o=n[e],a=parseFloat(o);if(NaN==a)r+=o+"\n";else r+=(180*a/Math.PI).toFixed(4)+"\n"}return r}),mkTool("kg-to-lbs",function(t){for(var n=t.split("\n"),r="",e=0;e<n.length;e++){var o=n[e],a=parseFloat(o);if(NaN==a)r+=o+"\n";else r+=(2.2046226218*a).toFixed(4)+"\n"}return r}),mkTool("lbs-to-kg",function(t){for(var n=t.split("\n"),r="",e=0;e<n.length;e++){var o=n[e],a=parseFloat(o);if(NaN==a)a+=o+"\n";else r+=(a/2.2046226218).toFixed(4)+"\n"}return r}),mkTool("hex-to-rgb",function(t){$("#action-error").hide();for(var n=t.split("\n"),r="",e=0;e<n.length;e++){var o=n[e];if(0!=o.length){if(3==(o=(o=o.replace(/\s+/g,"")).replace(/^#/,"")).length)var a=o[0].toString()+o[0].toString(),i=o[1].toString()+o[1].toString(),l=o[2].toString()+o[2].toString();else{if(6!=o.length)return $("#action-error").show(),$("#action-error").text("Invalid Hex value. Should be #RRGGBB or #RGB"),t;a=o[0].toString()+o[1].toString(),i=o[2].toString()+o[3].toString(),l=o[4].toString()+o[5].toString()}var s=parseInt(a,16),c=parseInt(i,16),p=parseInt(l,16);if(isNaN(s))return $("#action-error").show(),$("#action-error").text("Invalid RED value"),t;if(isNaN(c))return $("#action-error").show(),$("#action-error").text("Invalid GREEN value"),t;if(isNaN(p))return $("#action-error").show(),$("#action-error").text("Invalid BLUE value"),t;r+=n[e]+" rgb("+s+", "+c+", "+p+")\n"}else r+="\n"}return r}),mkTool("rgb-to-hex",function(t){$("#action-error").hide();for(var n=t.split("\n"),r="",e=0;e<n.length;e++){var o=n[e];if(0!=o.length){var a=(o=(o=o.replace(/,/g," ")).replace(/\./g," ")).match(/(\d+)\s+(\d+)\s+(\d+)/);if(!a)return $("#action-error").show(),$("#action-error").text("Invalid color on line "+(e+1)),t;var i=parseInt(a[1],10),l=parseInt(a[2],10),s=parseInt(a[3],10),c=i.toString(16);1==c.length&&(c="0"+c);var p=l.toString(16);1==p.length&&(p="0"+p);var u=s.toString(16);1==u.length&&(u="0"+u),r+=n[e]+" #"+c+p+u+"\n"}else r+="\n"}return r}),t("jpg-to-png",{inputMime:"image/jpeg",inputHumanFormat:"JPEG"},{outputMime:"image/png",outputExt:"png"}),t("png-to-jpg",{inputMime:"image/png",inputHumanFormat:"PNG"},{outputMime:"image/jpeg",outputExt:"jpg"}),t("gif-to-png",{inputMime:"image/gif",inputHumanFormat:"GIF"},{outputMime:"image/png",outputExt:"png"}),t("gif-to-jpg",{inputMime:"image/gif",inputHumanFormat:"GIF"},{outputMime:"image/jpeg",outputExt:"jpg"}),t("bmp-to-png",{inputMime:"image/bmp",inputHumanFormat:"BMP"},{outputMime:"image/png",outputExt:"png"}),t("bmp-to-jpg",{inputMime:"image/bmp",inputHumanFormat:"BMP"},{outputMime:"image/jpeg",outputExt:"jpg"}),$("#tool-image-to-base64").length){var e="#file-select",o="#submit";$(e).on("change",function(t){$("#action-error").hide();var n=t.target.files[0];a=n,$(o).attr("disabled",!1)}),$("#drag-and-drop").on("dragover",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").addClass("hover")}),$("#drag-and-drop").on("dragenter",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").addClass("hover")}),$("#drag-and-drop").on("dragleave",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").removeClass("hover")}),$("#drag-and-drop").on("dragend",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").removeClass("hover")}),$("#drag-and-drop").on("drop",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").removeClass("hover"),$("#action-error").hide(),t.dataTransfer=t.originalEvent.dataTransfer;var n=t.dataTransfer.files[0];$("#drag-and-drop-selected").text("Selected "+n.name),a=n,$(o).attr("disabled",!1)}),$(o).click(function(){var t=new FileReader;t.onload=function(){var n=t.result.indexOf(","),r=t.result.substr(n+1);$("#image-to-base64-output textarea").val(r),$("#image-to-base64-output").slideDown()},t.readAsDataURL(a)})}if($("#tool-file-to-base64").length){var a;e="#file-select",o="#submit";$(e).on("change",function(t){$("#action-error").hide();var n=t.target.files[0];a=n,$(o).attr("disabled",!1)}),$("#drag-and-drop").on("dragover",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").addClass("hover")}),$("#drag-and-drop").on("dragenter",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").addClass("hover")}),$("#drag-and-drop").on("dragleave",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").removeClass("hover")}),$("#drag-and-drop").on("dragend",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").removeClass("hover")}),$("#drag-and-drop").on("drop",function(t){t.preventDefault(),t.stopPropagation(),$("#drag-and-drop").removeClass("hover"),$("#action-error").hide(),t.dataTransfer=t.originalEvent.dataTransfer;var n=t.dataTransfer.files[0];$("#drag-and-drop-selected").text("Selected "+n.name),a=n,$(o).attr("disabled",!1)}),$(o).click(function(){var t=new FileReader;t.onload=function(){var n=t.result.indexOf(","),r=t.result.substr(n+1);$("#file-to-base64-output textarea").val(r),$("#file-to-base64-output").slideDown()},t.readAsDataURL(a)})}});
$(function(){mkTool("json-validate",function(text){return $("#action-error").hide(),$("#action-success").hide(),JSON.parse(text),$("#action-success").show(),$("#action-success").text("All good!"),text},{exceptionFn:function(err){$("#action-error").show(),$("#action-error").text(err.toString())}})});